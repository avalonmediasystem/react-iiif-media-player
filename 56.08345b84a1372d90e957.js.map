{"version":3,"sources":["webpack:///./node_modules/iiif-explorer/dist/esm-es5/ion-refresher-content.entry.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/index-6b565e81.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/spinner-configs-11ca13d6.js"],"names":["RefresherContent","hostRef","this","prototype","componentWillLoad","undefined","pullingIcon","mode","overflowRefresher","el","style","webkitOverflowScrolling","get","refreshingSpinner","render","hasSpinner","class","name","paused","icon","lazy","pullingText","innerHTML","refreshingText","Object","defineProperty","enumerable","configurable","sanitizeDOMString","untrustedString","documentFragment_1","document","createDocumentFragment","workingDiv","createElement","appendChild","blockedTags","forEach","blockedTag","getElementsToRemove","querySelectorAll","elementIndex","length","element","parentNode","removeChild","childElements","getElementChildren","childIndex","sanitizeElement","dfChildren","fragmentDiv","getInnerDiv","querySelector","err","console","error","nodeType","i","attributes","attribute","item","attributeName","allowedAttributes","includes","toLowerCase","attributeValue","value","removeAttribute","children","childNodes","SPINNERS","dur","circles","fn","index","total","animationDelay","angle","Math","PI","r","sin","cos","step","elmDuration","cx","cy","fill","viewBox","transform","_","lines","y1","y2"],"mappings":"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","file":"56.08345b84a1372d90e957.js","sourcesContent":["import { r as registerInstance, e as getIonMode, j as config, i as isPlatform, h, H as Host, d as getElement } from './core-0428d3c8.js';\r\nimport { s as sanitizeDOMString } from './index-6b565e81.js';\r\nimport { S as SPINNERS } from './spinner-configs-11ca13d6.js';\r\nvar RefresherContent = /** @class */ (function () {\r\n    function RefresherContent(hostRef) {\r\n        registerInstance(this, hostRef);\r\n    }\r\n    RefresherContent.prototype.componentWillLoad = function () {\r\n        if (this.pullingIcon === undefined) {\r\n            var mode = getIonMode(this);\r\n            var overflowRefresher = this.el.style.webkitOverflowScrolling !== undefined ? 'lines' : 'arrow-down';\r\n            this.pullingIcon = config.get('refreshingIcon', mode === 'ios' && isPlatform('mobile') ? config.get('spinner', overflowRefresher) : 'circular');\r\n        }\r\n        if (this.refreshingSpinner === undefined) {\r\n            var mode = getIonMode(this);\r\n            this.refreshingSpinner = config.get('refreshingSpinner', config.get('spinner', mode === 'ios' ? 'lines' : 'circular'));\r\n        }\r\n    };\r\n    RefresherContent.prototype.render = function () {\r\n        var pullingIcon = this.pullingIcon;\r\n        var hasSpinner = pullingIcon != null && SPINNERS[pullingIcon] !== undefined;\r\n        var mode = getIonMode(this);\r\n        return (h(Host, { class: mode }, h(\"div\", { class: \"refresher-pulling\" }, this.pullingIcon && hasSpinner &&\r\n            h(\"div\", { class: \"refresher-pulling-icon\" }, h(\"div\", { class: \"spinner-arrow-container\" }, h(\"ion-spinner\", { name: this.pullingIcon, paused: true }), mode === 'md' && this.pullingIcon === 'circular' &&\r\n                h(\"div\", { class: \"arrow-container\" }, h(\"ion-icon\", { name: \"caret-back-sharp\" })))), this.pullingIcon && !hasSpinner &&\r\n            h(\"div\", { class: \"refresher-pulling-icon\" }, h(\"ion-icon\", { icon: this.pullingIcon, lazy: false })), this.pullingText &&\r\n            h(\"div\", { class: \"refresher-pulling-text\", innerHTML: sanitizeDOMString(this.pullingText) })), h(\"div\", { class: \"refresher-refreshing\" }, this.refreshingSpinner &&\r\n            h(\"div\", { class: \"refresher-refreshing-icon\" }, h(\"ion-spinner\", { name: this.refreshingSpinner })), this.refreshingText &&\r\n            h(\"div\", { class: \"refresher-refreshing-text\", innerHTML: sanitizeDOMString(this.refreshingText) }))));\r\n    };\r\n    Object.defineProperty(RefresherContent.prototype, \"el\", {\r\n        get: function () { return getElement(this); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return RefresherContent;\r\n}());\r\nexport { RefresherContent as ion_refresher_content };\r\n","/**\r\n * Does a simple sanitization of all elements\r\n * in an untrusted string\r\n */\r\nvar sanitizeDOMString = function (untrustedString) {\r\n    try {\r\n        if (typeof untrustedString !== 'string' || untrustedString === '') {\r\n            return untrustedString;\r\n        }\r\n        /**\r\n         * Create a document fragment\r\n         * separate from the main DOM,\r\n         * create a div to do our work in\r\n         */\r\n        var documentFragment_1 = document.createDocumentFragment();\r\n        var workingDiv = document.createElement('div');\r\n        documentFragment_1.appendChild(workingDiv);\r\n        workingDiv.innerHTML = untrustedString;\r\n        /**\r\n         * Remove any elements\r\n         * that are blocked\r\n         */\r\n        blockedTags.forEach(function (blockedTag) {\r\n            var getElementsToRemove = documentFragment_1.querySelectorAll(blockedTag);\r\n            for (var elementIndex = getElementsToRemove.length - 1; elementIndex >= 0; elementIndex--) {\r\n                var element = getElementsToRemove[elementIndex];\r\n                if (element.parentNode) {\r\n                    element.parentNode.removeChild(element);\r\n                }\r\n                else {\r\n                    documentFragment_1.removeChild(element);\r\n                }\r\n                /**\r\n                 * We still need to sanitize\r\n                 * the children of this element\r\n                 * as they are left behind\r\n                 */\r\n                var childElements = getElementChildren(element);\r\n                /* tslint:disable-next-line */\r\n                for (var childIndex = 0; childIndex < childElements.length; childIndex++) {\r\n                    sanitizeElement(childElements[childIndex]);\r\n                }\r\n            }\r\n        });\r\n        /**\r\n         * Go through remaining elements and remove\r\n         * non-allowed attribs\r\n         */\r\n        // IE does not support .children on document fragments, only .childNodes\r\n        var dfChildren = getElementChildren(documentFragment_1);\r\n        /* tslint:disable-next-line */\r\n        for (var childIndex = 0; childIndex < dfChildren.length; childIndex++) {\r\n            sanitizeElement(dfChildren[childIndex]);\r\n        }\r\n        // Append document fragment to div\r\n        var fragmentDiv = document.createElement('div');\r\n        fragmentDiv.appendChild(documentFragment_1);\r\n        // First child is always the div we did our work in\r\n        var getInnerDiv = fragmentDiv.querySelector('div');\r\n        return (getInnerDiv !== null) ? getInnerDiv.innerHTML : fragmentDiv.innerHTML;\r\n    }\r\n    catch (err) {\r\n        console.error(err);\r\n        return '';\r\n    }\r\n};\r\n/**\r\n * Clean up current element based on allowed attributes\r\n * and then recursively dig down into any child elements to\r\n * clean those up as well\r\n */\r\nvar sanitizeElement = function (element) {\r\n    // IE uses childNodes, so ignore nodes that are not elements\r\n    if (element.nodeType && element.nodeType !== 1) {\r\n        return;\r\n    }\r\n    for (var i = element.attributes.length - 1; i >= 0; i--) {\r\n        var attribute = element.attributes.item(i);\r\n        var attributeName = attribute.name;\r\n        // remove non-allowed attribs\r\n        if (!allowedAttributes.includes(attributeName.toLowerCase())) {\r\n            element.removeAttribute(attributeName);\r\n            continue;\r\n        }\r\n        // clean up any allowed attribs\r\n        // that attempt to do any JS funny-business\r\n        var attributeValue = attribute.value;\r\n        /* tslint:disable-next-line */\r\n        if (attributeValue != null && attributeValue.toLowerCase().includes('javascript:')) {\r\n            element.removeAttribute(attributeName);\r\n        }\r\n    }\r\n    /**\r\n     * Sanitize any nested children\r\n     */\r\n    var childElements = getElementChildren(element);\r\n    /* tslint:disable-next-line */\r\n    for (var i = 0; i < childElements.length; i++) {\r\n        sanitizeElement(childElements[i]);\r\n    }\r\n};\r\n/**\r\n * IE doesn't always support .children\r\n * so we revert to .childNodes instead\r\n */\r\nvar getElementChildren = function (el) {\r\n    return (el.children != null) ? el.children : el.childNodes;\r\n};\r\nvar allowedAttributes = ['class', 'id', 'href', 'src', 'name', 'slot'];\r\nvar blockedTags = ['script', 'style', 'iframe', 'meta', 'link', 'object', 'embed'];\r\nexport { sanitizeDOMString as s };\r\n","var spinners = {\r\n    'bubbles': {\r\n        dur: 1000,\r\n        circles: 9,\r\n        fn: function (dur, index, total) {\r\n            var animationDelay = (dur * index / total) - dur + \"ms\";\r\n            var angle = 2 * Math.PI * index / total;\r\n            return {\r\n                r: 5,\r\n                style: {\r\n                    'top': 9 * Math.sin(angle) + \"px\",\r\n                    'left': 9 * Math.cos(angle) + \"px\",\r\n                    'animation-delay': animationDelay,\r\n                }\r\n            };\r\n        }\r\n    },\r\n    'circles': {\r\n        dur: 1000,\r\n        circles: 8,\r\n        fn: function (dur, index, total) {\r\n            var step = index / total;\r\n            var animationDelay = (dur * step) - dur + \"ms\";\r\n            var angle = 2 * Math.PI * step;\r\n            return {\r\n                r: 5,\r\n                style: {\r\n                    'top': 9 * Math.sin(angle) + \"px\",\r\n                    'left': 9 * Math.cos(angle) + \"px\",\r\n                    'animation-delay': animationDelay,\r\n                }\r\n            };\r\n        }\r\n    },\r\n    'circular': {\r\n        dur: 1400,\r\n        elmDuration: true,\r\n        circles: 1,\r\n        fn: function () {\r\n            return {\r\n                r: 20,\r\n                cx: 48,\r\n                cy: 48,\r\n                fill: 'none',\r\n                viewBox: '24 24 48 48',\r\n                transform: 'translate(0,0)',\r\n                style: {}\r\n            };\r\n        }\r\n    },\r\n    'crescent': {\r\n        dur: 750,\r\n        circles: 1,\r\n        fn: function () {\r\n            return {\r\n                r: 26,\r\n                style: {}\r\n            };\r\n        }\r\n    },\r\n    'dots': {\r\n        dur: 750,\r\n        circles: 3,\r\n        fn: function (_, index) {\r\n            var animationDelay = -(110 * index) + 'ms';\r\n            return {\r\n                r: 6,\r\n                style: {\r\n                    'left': 9 - (9 * index) + \"px\",\r\n                    'animation-delay': animationDelay,\r\n                }\r\n            };\r\n        }\r\n    },\r\n    'lines': {\r\n        dur: 1000,\r\n        lines: 12,\r\n        fn: function (dur, index, total) {\r\n            var transform = \"rotate(\" + (30 * index + (index < 6 ? 180 : -180)) + \"deg)\";\r\n            var animationDelay = (dur * index / total) - dur + \"ms\";\r\n            return {\r\n                y1: 17,\r\n                y2: 29,\r\n                style: {\r\n                    'transform': transform,\r\n                    'animation-delay': animationDelay,\r\n                }\r\n            };\r\n        }\r\n    },\r\n    'lines-small': {\r\n        dur: 1000,\r\n        lines: 12,\r\n        fn: function (dur, index, total) {\r\n            var transform = \"rotate(\" + (30 * index + (index < 6 ? 180 : -180)) + \"deg)\";\r\n            var animationDelay = (dur * index / total) - dur + \"ms\";\r\n            return {\r\n                y1: 12,\r\n                y2: 20,\r\n                style: {\r\n                    'transform': transform,\r\n                    'animation-delay': animationDelay,\r\n                }\r\n            };\r\n        }\r\n    }\r\n};\r\nvar SPINNERS = spinners;\r\nexport { SPINNERS as S };\r\n"],"sourceRoot":""}