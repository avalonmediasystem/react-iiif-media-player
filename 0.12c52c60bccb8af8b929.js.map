{"version":3,"sources":["webpack:///./node_modules/iiif-explorer/dist/esm-es5/helpers-b7c9db54.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/animation-2b8428ef.js"],"names":["__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","raf","h","__zone_symbol__requestAnimationFrame","requestAnimationFrame","setTimeout","hasShadowDom","el","shadowRoot","attachShadow","findItemLabel","componentEl","itemEl","closest","querySelector","renderHiddenInput","always","container","name","value","disabled","input","ownerDocument","createElement","type","classList","add","appendChild","clamp","min","n","max","Math","assert","actual","reason","message","console","error","Error","now","ev","timeStamp","Date","pointerCoord","changedTouches","touch","x","clientX","y","clientY","undefined","pageX","pageY","isEndSide","side","isRTL","document","dir","debounceEvent","event","wait","original","_original","emit","debounce","bind","func","timer","args","_i","clearTimeout","apply","animationPrefix","convertCamelCaseToHypen","str","replace","toLowerCase","getAnimationPrefix","supportsUnprefixed","style","animationName","supportsWebkitPrefix","webkitAnimationName","setStyleProperty","element","propertyName","prefix","startsWith","setProperty","removeStyleProperty","removeProperty","keyframeIds","addClassToArray","classes","className","classNameToAppend","isArray","createAnimation","animationId","_delay","_duration","_easing","_iterations","_fill","_direction","parentAnimation","cssAnimationsTimerFallback","forceDirectionValue","forceDurationValue","forceDelayValue","keyframeName","ani","_keyframes","beforeAddClasses","beforeRemoveClasses","initialized","beforeStylesValue","afterAddClasses","afterRemoveClasses","afterStylesValue","numAnimationsRunning","shouldForceLinearEasing","shouldForceSyncPlayback","willComplete","finished","shouldCalculateNumAnimations","id","onFinishCallbacks","onFinishOneTimeCallbacks","elements","childAnimations","stylesheets","_beforeAddReadFunctions","_beforeAddWriteFunctions","_afterAddReadFunctions","_afterAddWriteFunctions","webAnimations","supportsAnimationEffect","AnimationEffect","window","supportsWebAnimations","Element","prototype","animate","cleanUp","cleanUpElements","cleanUpStyleSheets","onFinish","callback","opts","oneTimeCallback","push","c","o","clearOnFinish","forEach","animation","cancel","elementsArray_1","slice","stylesheet","parentNode","removeChild","getFill","getDirection","getEasing","getDuration","getIterations","getDelay","animationFinish","clearCSSAnimationsTimeout","currentStep","addClasses","removeClasses","styles","elementClassList","property","remove","hasOwnProperty","onFinishCallback","afterAnimation","initializeCSSAnimation","toggleAnimationName","processedKeyframes","keyframes","keyframe","key","newKey","processKeyframes","keyframeRules","map","offset","frameString","join","generateKeyframeRules","stylesheet_1","styleContainer","rootNode","getRootNode","head","getStyleContainer","keyframePrefix","existingStylesheet","textContent","createKeyframeStylesheet","index","indexOf","generateKeyframeName","iterationsCount","Infinity","toString","initializeAnimation","beforeAnimation","delay","duration","easing","iterations","fill","direction","pause","onfinish","setAnimationStep","step","currentTime","effect","getComputedTiming","animationDuration_1","updateWebAnimation","updateTiming","updateCSSAnimation","update","deep","pauseAnimation","onAnimationEndFallback","clearCSSAnimationPlayState","play","Promise","resolve","sync","animationDelay","animationDuration","animationIterations","isFinite","passive","unregister","unRegTrans","onTransitionEnd","target","addEventListener","removeEventListener","playCSSAnimations","from","_a","firstFrame","to","lastFrame","fromTo","fromValue","toValue","parent","stop","destroy","childAnimation","keyframeValues","addAnimation","animationToAdd","animationToAdd_1","addElement","nodeType","animationFill","animationDirection","animationEasing","getWebAnimations","getKeyframes","afterAddRead","readFn","afterAddWrite","writeFn","afterClearStyles","propertyNames","propertyNames_2","afterStyles","afterRemoveClass","afterAddClass","beforeAddRead","beforeAddWrite","beforeClearStyles","propertyNames_1","beforeStyles","beforeRemoveClass","beforeAddClass","progressStart","forceLinearEasing","progressStep","progressEnd","playTo","dur"],"mappings":"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","file":"0.12c52c60bccb8af8b929.js","sourcesContent":["var __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n/**\r\n * Patched version of requestAnimationFrame that avoids ngzone\r\n * Use only when you know ngzone should not run\r\n */\r\nvar raf = function (h) {\r\n    if (typeof __zone_symbol__requestAnimationFrame === 'function') {\r\n        return __zone_symbol__requestAnimationFrame(h);\r\n    }\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        return requestAnimationFrame(h);\r\n    }\r\n    return setTimeout(h);\r\n};\r\nvar hasShadowDom = function (el) {\r\n    return !!el.shadowRoot && !!el.attachShadow;\r\n};\r\nvar findItemLabel = function (componentEl) {\r\n    var itemEl = componentEl.closest('ion-item');\r\n    if (itemEl) {\r\n        return itemEl.querySelector('ion-label');\r\n    }\r\n    return null;\r\n};\r\nvar renderHiddenInput = function (always, container, name, value, disabled) {\r\n    if (always || hasShadowDom(container)) {\r\n        var input = container.querySelector('input.aux-input');\r\n        if (!input) {\r\n            input = container.ownerDocument.createElement('input');\r\n            input.type = 'hidden';\r\n            input.classList.add('aux-input');\r\n            container.appendChild(input);\r\n        }\r\n        input.disabled = disabled;\r\n        input.name = name;\r\n        input.value = value || '';\r\n    }\r\n};\r\nvar clamp = function (min, n, max) {\r\n    return Math.max(min, Math.min(n, max));\r\n};\r\nvar assert = function (actual, reason) {\r\n    if (!actual) {\r\n        var message = 'ASSERT: ' + reason;\r\n        console.error(message);\r\n        debugger; // tslint:disable-line\r\n        throw new Error(message);\r\n    }\r\n};\r\nvar now = function (ev) {\r\n    return ev.timeStamp || Date.now();\r\n};\r\nvar pointerCoord = function (ev) {\r\n    // get X coordinates for either a mouse click\r\n    // or a touch depending on the given event\r\n    if (ev) {\r\n        var changedTouches = ev.changedTouches;\r\n        if (changedTouches && changedTouches.length > 0) {\r\n            var touch = changedTouches[0];\r\n            return { x: touch.clientX, y: touch.clientY };\r\n        }\r\n        if (ev.pageX !== undefined) {\r\n            return { x: ev.pageX, y: ev.pageY };\r\n        }\r\n    }\r\n    return { x: 0, y: 0 };\r\n};\r\n/**\r\n * @hidden\r\n * Given a side, return if it should be on the end\r\n * based on the value of dir\r\n * @param side the side\r\n * @param isRTL whether the application dir is rtl\r\n */\r\nvar isEndSide = function (side) {\r\n    var isRTL = document.dir === 'rtl';\r\n    switch (side) {\r\n        case 'start': return isRTL;\r\n        case 'end': return !isRTL;\r\n        default:\r\n            throw new Error(\"\\\"\" + side + \"\\\" is not a valid value for [side]. Use \\\"start\\\" or \\\"end\\\" instead.\");\r\n    }\r\n};\r\nvar debounceEvent = function (event, wait) {\r\n    var original = event._original || event;\r\n    return {\r\n        _original: event,\r\n        emit: debounce(original.emit.bind(original), wait)\r\n    };\r\n};\r\nvar debounce = function (func, wait) {\r\n    if (wait === void 0) { wait = 0; }\r\n    var timer;\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        clearTimeout(timer);\r\n        timer = setTimeout.apply(void 0, __spreadArrays([func, wait], args));\r\n    };\r\n};\r\nexport { renderHiddenInput as a, assert as b, clamp as c, debounceEvent as d, debounce as e, findItemLabel as f, hasShadowDom as h, isEndSide as i, now as n, pointerCoord as p, raf as r };\r\n","var __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { r as raf } from './helpers-b7c9db54.js';\r\n/**\r\n * Web Animations requires hyphenated CSS properties\r\n * to be written in camelCase when animating\r\n */\r\nvar processKeyframes = function (keyframes) {\r\n    keyframes.forEach(function (keyframe) {\r\n        for (var key in keyframe) {\r\n            if (keyframe.hasOwnProperty(key)) {\r\n                var value = keyframe[key];\r\n                if (key === 'easing') {\r\n                    var newKey = 'animation-timing-function';\r\n                    keyframe[newKey] = value;\r\n                    delete keyframe[key];\r\n                }\r\n                else {\r\n                    var newKey = convertCamelCaseToHypen(key);\r\n                    if (newKey !== key) {\r\n                        keyframe[newKey] = value;\r\n                        delete keyframe[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return keyframes;\r\n};\r\nvar convertCamelCaseToHypen = function (str) {\r\n    return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\r\n};\r\nvar animationPrefix;\r\nvar getAnimationPrefix = function (el) {\r\n    if (animationPrefix === undefined) {\r\n        var supportsUnprefixed = el.style.animationName !== undefined;\r\n        var supportsWebkitPrefix = el.style.webkitAnimationName !== undefined;\r\n        animationPrefix = (!supportsUnprefixed && supportsWebkitPrefix) ? '-webkit-' : '';\r\n    }\r\n    return animationPrefix;\r\n};\r\nvar setStyleProperty = function (element, propertyName, value) {\r\n    var prefix = propertyName.startsWith('animation') ? getAnimationPrefix(element) : '';\r\n    element.style.setProperty(prefix + propertyName, value);\r\n};\r\nvar removeStyleProperty = function (element, propertyName) {\r\n    var prefix = propertyName.startsWith('animation') ? getAnimationPrefix(element) : '';\r\n    element.style.removeProperty(prefix + propertyName);\r\n};\r\nvar animationEnd = function (el, callback) {\r\n    var unRegTrans;\r\n    var opts = { passive: true };\r\n    var unregister = function () {\r\n        if (unRegTrans) {\r\n            unRegTrans();\r\n        }\r\n    };\r\n    var onTransitionEnd = function (ev) {\r\n        if (el === ev.target) {\r\n            unregister();\r\n            callback(ev);\r\n        }\r\n    };\r\n    if (el) {\r\n        el.addEventListener('webkitAnimationEnd', onTransitionEnd, opts);\r\n        el.addEventListener('animationend', onTransitionEnd, opts);\r\n        unRegTrans = function () {\r\n            el.removeEventListener('webkitAnimationEnd', onTransitionEnd, opts);\r\n            el.removeEventListener('animationend', onTransitionEnd, opts);\r\n        };\r\n    }\r\n    return unregister;\r\n};\r\nvar generateKeyframeRules = function (keyframes) {\r\n    if (keyframes === void 0) { keyframes = []; }\r\n    return keyframes.map(function (keyframe) {\r\n        var offset = keyframe.offset;\r\n        var frameString = [];\r\n        for (var property in keyframe) {\r\n            if (keyframe.hasOwnProperty(property) && property !== 'offset') {\r\n                frameString.push(property + \": \" + keyframe[property] + \";\");\r\n            }\r\n        }\r\n        return offset * 100 + \"% { \" + frameString.join(' ') + \" }\";\r\n    }).join(' ');\r\n};\r\nvar keyframeIds = [];\r\nvar generateKeyframeName = function (keyframeRules) {\r\n    var index = keyframeIds.indexOf(keyframeRules);\r\n    if (index < 0) {\r\n        index = (keyframeIds.push(keyframeRules) - 1);\r\n    }\r\n    return \"ion-animation-\" + index;\r\n};\r\nvar getStyleContainer = function (element) {\r\n    var rootNode = element.getRootNode();\r\n    return (rootNode.head || rootNode);\r\n};\r\nvar createKeyframeStylesheet = function (keyframeName, keyframeRules, element) {\r\n    var styleContainer = getStyleContainer(element);\r\n    var keyframePrefix = getAnimationPrefix(element);\r\n    var existingStylesheet = styleContainer.querySelector('#' + keyframeName);\r\n    if (existingStylesheet) {\r\n        return existingStylesheet;\r\n    }\r\n    var stylesheet = (element.ownerDocument || document).createElement('style');\r\n    stylesheet.id = keyframeName;\r\n    stylesheet.textContent = \"@\" + keyframePrefix + \"keyframes \" + keyframeName + \" { \" + keyframeRules + \" } @\" + keyframePrefix + \"keyframes \" + keyframeName + \"-alt { \" + keyframeRules + \" }\";\r\n    styleContainer.appendChild(stylesheet);\r\n    return stylesheet;\r\n};\r\nvar addClassToArray = function (classes, className) {\r\n    if (classes === void 0) { classes = []; }\r\n    if (className !== undefined) {\r\n        var classNameToAppend = (Array.isArray(className)) ? className : [className];\r\n        return __spreadArrays(classes, classNameToAppend);\r\n    }\r\n    return classes;\r\n};\r\n// TODO: Add more tests. until then, be sure to manually test menu and swipe to go back/routing transitions\r\nvar createAnimation = function (animationId) {\r\n    var _delay;\r\n    var _duration;\r\n    var _easing;\r\n    var _iterations;\r\n    var _fill;\r\n    var _direction;\r\n    var _keyframes = [];\r\n    var beforeAddClasses = [];\r\n    var beforeRemoveClasses = [];\r\n    var initialized = false;\r\n    var parentAnimation;\r\n    var beforeStylesValue = {};\r\n    var afterAddClasses = [];\r\n    var afterRemoveClasses = [];\r\n    var afterStylesValue = {};\r\n    var numAnimationsRunning = 0;\r\n    var shouldForceLinearEasing = false;\r\n    var shouldForceSyncPlayback = false;\r\n    var cssAnimationsTimerFallback;\r\n    var forceDirectionValue;\r\n    var forceDurationValue;\r\n    var forceDelayValue;\r\n    var willComplete = true;\r\n    var finished = false;\r\n    var shouldCalculateNumAnimations = true;\r\n    var keyframeName;\r\n    var ani;\r\n    var id = animationId;\r\n    var onFinishCallbacks = [];\r\n    var onFinishOneTimeCallbacks = [];\r\n    var elements = [];\r\n    var childAnimations = [];\r\n    var stylesheets = [];\r\n    var _beforeAddReadFunctions = [];\r\n    var _beforeAddWriteFunctions = [];\r\n    var _afterAddReadFunctions = [];\r\n    var _afterAddWriteFunctions = [];\r\n    var webAnimations = [];\r\n    var supportsAnimationEffect = (typeof AnimationEffect === 'function' || typeof window.AnimationEffect === 'function');\r\n    var supportsWebAnimations = (typeof Element === 'function') && (typeof Element.prototype.animate === 'function') && supportsAnimationEffect;\r\n    var ANIMATION_END_FALLBACK_PADDING_MS = 100;\r\n    var getWebAnimations = function () {\r\n        return webAnimations;\r\n    };\r\n    var destroy = function () {\r\n        childAnimations.forEach(function (childAnimation) {\r\n            childAnimation.destroy();\r\n        });\r\n        cleanUp();\r\n        elements.length = 0;\r\n        childAnimations.length = 0;\r\n        _keyframes.length = 0;\r\n        clearOnFinish();\r\n        initialized = false;\r\n        shouldCalculateNumAnimations = true;\r\n        return ani;\r\n    };\r\n    /**\r\n     * Cancels any Web Animations, removes\r\n     * any animation properties from the\r\n     * animation's elements, and removes the\r\n     * animation's stylesheets from the DOM.\r\n     */\r\n    var cleanUp = function () {\r\n        cleanUpElements();\r\n        cleanUpStyleSheets();\r\n    };\r\n    var resetFlags = function () {\r\n        shouldForceLinearEasing = false;\r\n        shouldForceSyncPlayback = false;\r\n        shouldCalculateNumAnimations = true;\r\n        forceDirectionValue = undefined;\r\n        forceDurationValue = undefined;\r\n        forceDelayValue = undefined;\r\n        numAnimationsRunning = 0;\r\n        finished = false;\r\n        willComplete = true;\r\n    };\r\n    var onFinish = function (callback, opts) {\r\n        var callbacks = (opts && opts.oneTimeCallback) ? onFinishOneTimeCallbacks : onFinishCallbacks;\r\n        callbacks.push({ c: callback, o: opts });\r\n        return ani;\r\n    };\r\n    var clearOnFinish = function () {\r\n        onFinishCallbacks.length = 0;\r\n        onFinishOneTimeCallbacks.length = 0;\r\n        return ani;\r\n    };\r\n    /**\r\n     * Cancels any Web Animations and removes\r\n     * any animation properties from the\r\n     * the animation's elements.\r\n     */\r\n    var cleanUpElements = function () {\r\n        if (supportsWebAnimations) {\r\n            webAnimations.forEach(function (animation) {\r\n                animation.cancel();\r\n            });\r\n            webAnimations.length = 0;\r\n        }\r\n        else {\r\n            var elementsArray_1 = elements.slice();\r\n            raf(function () {\r\n                elementsArray_1.forEach(function (element) {\r\n                    removeStyleProperty(element, 'animation-name');\r\n                    removeStyleProperty(element, 'animation-duration');\r\n                    removeStyleProperty(element, 'animation-timing-function');\r\n                    removeStyleProperty(element, 'animation-iteration-count');\r\n                    removeStyleProperty(element, 'animation-delay');\r\n                    removeStyleProperty(element, 'animation-play-state');\r\n                    removeStyleProperty(element, 'animation-fill-mode');\r\n                    removeStyleProperty(element, 'animation-direction');\r\n                });\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Removes the animation's stylesheets\r\n     * from the DOM.\r\n     */\r\n    var cleanUpStyleSheets = function () {\r\n        stylesheets.forEach(function (stylesheet) {\r\n            /**\r\n             * When sharing stylesheets, it's possible\r\n             * for another animation to have already\r\n             * cleaned up a particular stylesheet\r\n             */\r\n            if (stylesheet && stylesheet.parentNode) {\r\n                stylesheet.parentNode.removeChild(stylesheet);\r\n            }\r\n        });\r\n        stylesheets.length = 0;\r\n    };\r\n    var beforeAddRead = function (readFn) {\r\n        _beforeAddReadFunctions.push(readFn);\r\n        return ani;\r\n    };\r\n    var beforeAddWrite = function (writeFn) {\r\n        _beforeAddWriteFunctions.push(writeFn);\r\n        return ani;\r\n    };\r\n    var afterAddRead = function (readFn) {\r\n        _afterAddReadFunctions.push(readFn);\r\n        return ani;\r\n    };\r\n    var afterAddWrite = function (writeFn) {\r\n        _afterAddWriteFunctions.push(writeFn);\r\n        return ani;\r\n    };\r\n    var beforeAddClass = function (className) {\r\n        beforeAddClasses = addClassToArray(beforeAddClasses, className);\r\n        return ani;\r\n    };\r\n    var beforeRemoveClass = function (className) {\r\n        beforeRemoveClasses = addClassToArray(beforeRemoveClasses, className);\r\n        return ani;\r\n    };\r\n    /**\r\n     * Set CSS inline styles to the animation's\r\n     * elements before the animation begins.\r\n     */\r\n    var beforeStyles = function (styles) {\r\n        if (styles === void 0) { styles = {}; }\r\n        beforeStylesValue = styles;\r\n        return ani;\r\n    };\r\n    /**\r\n     * Clear CSS inline styles from the animation's\r\n     * elements before the animation begins.\r\n     */\r\n    var beforeClearStyles = function (propertyNames) {\r\n        if (propertyNames === void 0) { propertyNames = []; }\r\n        for (var _i = 0, propertyNames_1 = propertyNames; _i < propertyNames_1.length; _i++) {\r\n            var property = propertyNames_1[_i];\r\n            beforeStylesValue[property] = '';\r\n        }\r\n        return ani;\r\n    };\r\n    var afterAddClass = function (className) {\r\n        afterAddClasses = addClassToArray(afterAddClasses, className);\r\n        return ani;\r\n    };\r\n    var afterRemoveClass = function (className) {\r\n        afterRemoveClasses = addClassToArray(afterRemoveClasses, className);\r\n        return ani;\r\n    };\r\n    var afterStyles = function (styles) {\r\n        if (styles === void 0) { styles = {}; }\r\n        afterStylesValue = styles;\r\n        return ani;\r\n    };\r\n    var afterClearStyles = function (propertyNames) {\r\n        if (propertyNames === void 0) { propertyNames = []; }\r\n        for (var _i = 0, propertyNames_2 = propertyNames; _i < propertyNames_2.length; _i++) {\r\n            var property = propertyNames_2[_i];\r\n            afterStylesValue[property] = '';\r\n        }\r\n        return ani;\r\n    };\r\n    var getFill = function () {\r\n        if (_fill !== undefined) {\r\n            return _fill;\r\n        }\r\n        if (parentAnimation) {\r\n            return parentAnimation.getFill();\r\n        }\r\n        return 'both';\r\n    };\r\n    var getDirection = function () {\r\n        if (forceDirectionValue !== undefined) {\r\n            return forceDirectionValue;\r\n        }\r\n        if (_direction !== undefined) {\r\n            return _direction;\r\n        }\r\n        if (parentAnimation) {\r\n            return parentAnimation.getDirection();\r\n        }\r\n        return 'normal';\r\n    };\r\n    var getEasing = function () {\r\n        if (shouldForceLinearEasing) {\r\n            return 'linear';\r\n        }\r\n        if (_easing !== undefined) {\r\n            return _easing;\r\n        }\r\n        if (parentAnimation) {\r\n            return parentAnimation.getEasing();\r\n        }\r\n        return 'linear';\r\n    };\r\n    var getDuration = function () {\r\n        if (shouldForceSyncPlayback) {\r\n            return 0;\r\n        }\r\n        if (forceDurationValue !== undefined) {\r\n            return forceDurationValue;\r\n        }\r\n        if (_duration !== undefined) {\r\n            return _duration;\r\n        }\r\n        if (parentAnimation) {\r\n            return parentAnimation.getDuration();\r\n        }\r\n        return 0;\r\n    };\r\n    var getIterations = function () {\r\n        if (_iterations !== undefined) {\r\n            return _iterations;\r\n        }\r\n        if (parentAnimation) {\r\n            return parentAnimation.getIterations();\r\n        }\r\n        return 1;\r\n    };\r\n    var getDelay = function () {\r\n        if (forceDelayValue !== undefined) {\r\n            return forceDelayValue;\r\n        }\r\n        if (_delay !== undefined) {\r\n            return _delay;\r\n        }\r\n        if (parentAnimation) {\r\n            return parentAnimation.getDelay();\r\n        }\r\n        return 0;\r\n    };\r\n    var getKeyframes = function () {\r\n        return _keyframes;\r\n    };\r\n    var direction = function (animationDirection) {\r\n        _direction = animationDirection;\r\n        update(true);\r\n        return ani;\r\n    };\r\n    var fill = function (animationFill) {\r\n        _fill = animationFill;\r\n        update(true);\r\n        return ani;\r\n    };\r\n    var delay = function (animationDelay) {\r\n        _delay = animationDelay;\r\n        update(true);\r\n        return ani;\r\n    };\r\n    var easing = function (animationEasing) {\r\n        _easing = animationEasing;\r\n        update(true);\r\n        return ani;\r\n    };\r\n    var duration = function (animationDuration) {\r\n        /**\r\n         * CSS Animation Durations of 0ms work fine on Chrome\r\n         * but do not run on Safari, so force it to 1ms to\r\n         * get it to run on both platforms.\r\n         */\r\n        if (!supportsWebAnimations && animationDuration === 0) {\r\n            animationDuration = 1;\r\n        }\r\n        _duration = animationDuration;\r\n        update(true);\r\n        return ani;\r\n    };\r\n    var iterations = function (animationIterations) {\r\n        _iterations = animationIterations;\r\n        update(true);\r\n        return ani;\r\n    };\r\n    var parent = function (animation) {\r\n        parentAnimation = animation;\r\n        return ani;\r\n    };\r\n    var addElement = function (el) {\r\n        if (el != null) {\r\n            if (el.nodeType === 1) {\r\n                elements.push(el);\r\n            }\r\n            else if (el.length >= 0) {\r\n                for (var i = 0; i < el.length; i++) {\r\n                    elements.push(el[i]);\r\n                }\r\n            }\r\n            else {\r\n                console.error('Invalid addElement value');\r\n            }\r\n        }\r\n        return ani;\r\n    };\r\n    var addAnimation = function (animationToAdd) {\r\n        if (animationToAdd != null) {\r\n            if (Array.isArray(animationToAdd)) {\r\n                for (var _i = 0, animationToAdd_1 = animationToAdd; _i < animationToAdd_1.length; _i++) {\r\n                    var animation = animationToAdd_1[_i];\r\n                    animation.parent(ani);\r\n                    childAnimations.push(animation);\r\n                }\r\n            }\r\n            else {\r\n                animationToAdd.parent(ani);\r\n                childAnimations.push(animationToAdd);\r\n            }\r\n        }\r\n        return ani;\r\n    };\r\n    var keyframes = function (keyframeValues) {\r\n        _keyframes = keyframeValues;\r\n        return ani;\r\n    };\r\n    /**\r\n     * Run all \"before\" animation hooks.\r\n     */\r\n    var beforeAnimation = function () {\r\n        // Runs all before read callbacks\r\n        _beforeAddReadFunctions.forEach(function (callback) { return callback(); });\r\n        // Runs all before write callbacks\r\n        _beforeAddWriteFunctions.forEach(function (callback) { return callback(); });\r\n        // Updates styles and classes before animation runs\r\n        var addClasses = beforeAddClasses;\r\n        var removeClasses = beforeRemoveClasses;\r\n        var styles = beforeStylesValue;\r\n        elements.forEach(function (el) {\r\n            var elementClassList = el.classList;\r\n            addClasses.forEach(function (c) { return elementClassList.add(c); });\r\n            removeClasses.forEach(function (c) { return elementClassList.remove(c); });\r\n            for (var property in styles) {\r\n                if (styles.hasOwnProperty(property)) {\r\n                    setStyleProperty(el, property, styles[property]);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Run all \"after\" animation hooks.\r\n     */\r\n    var afterAnimation = function () {\r\n        clearCSSAnimationsTimeout();\r\n        // Runs all after read callbacks\r\n        _afterAddReadFunctions.forEach(function (callback) { return callback(); });\r\n        // Runs all after write callbacks\r\n        _afterAddWriteFunctions.forEach(function (callback) { return callback(); });\r\n        // Updates styles and classes before animation ends\r\n        var currentStep = willComplete ? 1 : 0;\r\n        var addClasses = afterAddClasses;\r\n        var removeClasses = afterRemoveClasses;\r\n        var styles = afterStylesValue;\r\n        elements.forEach(function (el) {\r\n            var elementClassList = el.classList;\r\n            addClasses.forEach(function (c) { return elementClassList.add(c); });\r\n            removeClasses.forEach(function (c) { return elementClassList.remove(c); });\r\n            for (var property in styles) {\r\n                if (styles.hasOwnProperty(property)) {\r\n                    setStyleProperty(el, property, styles[property]);\r\n                }\r\n            }\r\n        });\r\n        onFinishCallbacks.forEach(function (onFinishCallback) {\r\n            return onFinishCallback.c(currentStep, ani);\r\n        });\r\n        onFinishOneTimeCallbacks.forEach(function (onFinishCallback) {\r\n            return onFinishCallback.c(currentStep, ani);\r\n        });\r\n        onFinishOneTimeCallbacks.length = 0;\r\n        shouldCalculateNumAnimations = true;\r\n        if (willComplete) {\r\n            finished = true;\r\n        }\r\n        willComplete = true;\r\n    };\r\n    var animationFinish = function () {\r\n        if (numAnimationsRunning === 0) {\r\n            return;\r\n        }\r\n        numAnimationsRunning--;\r\n        if (numAnimationsRunning === 0) {\r\n            afterAnimation();\r\n            if (parentAnimation) {\r\n                parentAnimation.animationFinish();\r\n            }\r\n        }\r\n    };\r\n    var initializeCSSAnimation = function (toggleAnimationName) {\r\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\r\n        cleanUpStyleSheets();\r\n        var processedKeyframes = processKeyframes(_keyframes);\r\n        elements.forEach(function (element) {\r\n            if (processedKeyframes.length > 0) {\r\n                var keyframeRules = generateKeyframeRules(processedKeyframes);\r\n                keyframeName = (animationId !== undefined) ? animationId : generateKeyframeName(keyframeRules);\r\n                var stylesheet_1 = createKeyframeStylesheet(keyframeName, keyframeRules, element);\r\n                stylesheets.push(stylesheet_1);\r\n                setStyleProperty(element, 'animation-duration', getDuration() + \"ms\");\r\n                setStyleProperty(element, 'animation-timing-function', getEasing());\r\n                setStyleProperty(element, 'animation-delay', getDelay() + \"ms\");\r\n                setStyleProperty(element, 'animation-fill-mode', getFill());\r\n                setStyleProperty(element, 'animation-direction', getDirection());\r\n                var iterationsCount = (getIterations() === Infinity)\r\n                    ? 'infinite'\r\n                    : getIterations().toString();\r\n                setStyleProperty(element, 'animation-iteration-count', iterationsCount);\r\n                setStyleProperty(element, 'animation-play-state', 'paused');\r\n                if (toggleAnimationName) {\r\n                    setStyleProperty(element, 'animation-name', stylesheet_1.id + \"-alt\");\r\n                }\r\n                raf(function () {\r\n                    setStyleProperty(element, 'animation-name', stylesheet_1.id || null);\r\n                });\r\n            }\r\n        });\r\n    };\r\n    var initializeWebAnimation = function () {\r\n        elements.forEach(function (element) {\r\n            var animation = element.animate(_keyframes, {\r\n                id: id,\r\n                delay: getDelay(),\r\n                duration: getDuration(),\r\n                easing: getEasing(),\r\n                iterations: getIterations(),\r\n                fill: getFill(),\r\n                direction: getDirection()\r\n            });\r\n            animation.pause();\r\n            webAnimations.push(animation);\r\n        });\r\n        if (webAnimations.length > 0) {\r\n            webAnimations[0].onfinish = function () {\r\n                animationFinish();\r\n            };\r\n        }\r\n    };\r\n    var initializeAnimation = function (toggleAnimationName) {\r\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\r\n        beforeAnimation();\r\n        if (_keyframes.length > 0) {\r\n            if (supportsWebAnimations) {\r\n                initializeWebAnimation();\r\n            }\r\n            else {\r\n                initializeCSSAnimation(toggleAnimationName);\r\n            }\r\n        }\r\n        initialized = true;\r\n    };\r\n    var setAnimationStep = function (step) {\r\n        step = Math.min(Math.max(step, 0), 0.9999);\r\n        if (supportsWebAnimations) {\r\n            webAnimations.forEach(function (animation) {\r\n                animation.currentTime = animation.effect.getComputedTiming().delay + (getDuration() * step);\r\n                animation.pause();\r\n            });\r\n        }\r\n        else {\r\n            var animationDuration_1 = \"-\" + getDuration() * step + \"ms\";\r\n            elements.forEach(function (element) {\r\n                if (_keyframes.length > 0) {\r\n                    setStyleProperty(element, 'animation-delay', animationDuration_1);\r\n                    setStyleProperty(element, 'animation-play-state', 'paused');\r\n                }\r\n            });\r\n        }\r\n    };\r\n    var updateWebAnimation = function (step) {\r\n        webAnimations.forEach(function (animation) {\r\n            animation.effect.updateTiming({\r\n                delay: getDelay(),\r\n                duration: getDuration(),\r\n                easing: getEasing(),\r\n                iterations: getIterations(),\r\n                fill: getFill(),\r\n                direction: getDirection()\r\n            });\r\n        });\r\n        if (step !== undefined) {\r\n            setAnimationStep(step);\r\n        }\r\n    };\r\n    var updateCSSAnimation = function (toggleAnimationName, step) {\r\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\r\n        raf(function () {\r\n            elements.forEach(function (element) {\r\n                setStyleProperty(element, 'animation-name', keyframeName || null);\r\n                setStyleProperty(element, 'animation-duration', getDuration() + \"ms\");\r\n                setStyleProperty(element, 'animation-timing-function', getEasing());\r\n                setStyleProperty(element, 'animation-delay', (step !== undefined) ? \"-\" + step * getDuration() + \"ms\" : getDelay() + \"ms\");\r\n                setStyleProperty(element, 'animation-fill-mode', getFill() || null);\r\n                setStyleProperty(element, 'animation-direction', getDirection() || null);\r\n                var iterationsCount = (getIterations() === Infinity)\r\n                    ? 'infinite'\r\n                    : getIterations().toString();\r\n                setStyleProperty(element, 'animation-iteration-count', iterationsCount);\r\n                if (toggleAnimationName) {\r\n                    setStyleProperty(element, 'animation-name', keyframeName + \"-alt\");\r\n                }\r\n                raf(function () {\r\n                    setStyleProperty(element, 'animation-name', keyframeName || null);\r\n                });\r\n            });\r\n        });\r\n    };\r\n    var update = function (deep, toggleAnimationName, step) {\r\n        if (deep === void 0) { deep = false; }\r\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\r\n        if (deep) {\r\n            childAnimations.forEach(function (animation) {\r\n                animation.update(deep, toggleAnimationName, step);\r\n            });\r\n        }\r\n        if (supportsWebAnimations) {\r\n            updateWebAnimation(step);\r\n        }\r\n        else {\r\n            updateCSSAnimation(toggleAnimationName, step);\r\n        }\r\n        return ani;\r\n    };\r\n    var progressStart = function (forceLinearEasing, step) {\r\n        if (forceLinearEasing === void 0) { forceLinearEasing = false; }\r\n        childAnimations.forEach(function (animation) {\r\n            animation.progressStart(forceLinearEasing, step);\r\n        });\r\n        pauseAnimation();\r\n        shouldForceLinearEasing = forceLinearEasing;\r\n        if (!initialized) {\r\n            initializeAnimation();\r\n        }\r\n        else {\r\n            update(false, true, step);\r\n        }\r\n        return ani;\r\n    };\r\n    var progressStep = function (step) {\r\n        childAnimations.forEach(function (animation) {\r\n            animation.progressStep(step);\r\n        });\r\n        setAnimationStep(step);\r\n        return ani;\r\n    };\r\n    var progressEnd = function (playTo, step, dur) {\r\n        shouldForceLinearEasing = false;\r\n        childAnimations.forEach(function (animation) {\r\n            animation.progressEnd(playTo, step, dur);\r\n        });\r\n        if (dur !== undefined) {\r\n            forceDurationValue = dur;\r\n        }\r\n        finished = false;\r\n        // tslint:disable-next-line: strict-boolean-conditions\r\n        willComplete = true;\r\n        if (playTo === 0) {\r\n            forceDirectionValue = (getDirection() === 'reverse') ? 'normal' : 'reverse';\r\n            if (forceDirectionValue === 'reverse') {\r\n                willComplete = false;\r\n            }\r\n            if (supportsWebAnimations) {\r\n                update();\r\n                setAnimationStep(1 - step);\r\n            }\r\n            else {\r\n                forceDelayValue = ((1 - step) * getDuration()) * -1;\r\n                update(false, false);\r\n            }\r\n        }\r\n        else if (playTo === 1) {\r\n            if (supportsWebAnimations) {\r\n                update();\r\n                setAnimationStep(step);\r\n            }\r\n            else {\r\n                forceDelayValue = (step * getDuration()) * -1;\r\n                update(false, false);\r\n            }\r\n        }\r\n        if (playTo !== undefined) {\r\n            onFinish(function () {\r\n                forceDurationValue = undefined;\r\n                forceDirectionValue = undefined;\r\n                forceDelayValue = undefined;\r\n            }, {\r\n                oneTimeCallback: true\r\n            });\r\n            if (!parentAnimation) {\r\n                play();\r\n            }\r\n        }\r\n        return ani;\r\n    };\r\n    var pauseAnimation = function () {\r\n        if (initialized) {\r\n            if (supportsWebAnimations) {\r\n                webAnimations.forEach(function (animation) {\r\n                    animation.pause();\r\n                });\r\n            }\r\n            else {\r\n                elements.forEach(function (element) {\r\n                    setStyleProperty(element, 'animation-play-state', 'paused');\r\n                });\r\n            }\r\n        }\r\n    };\r\n    var pause = function () {\r\n        childAnimations.forEach(function (animation) {\r\n            animation.pause();\r\n        });\r\n        pauseAnimation();\r\n        return ani;\r\n    };\r\n    var onAnimationEndFallback = function () {\r\n        cssAnimationsTimerFallback = undefined;\r\n        animationFinish();\r\n    };\r\n    var clearCSSAnimationsTimeout = function () {\r\n        if (cssAnimationsTimerFallback) {\r\n            clearTimeout(cssAnimationsTimerFallback);\r\n        }\r\n    };\r\n    var playCSSAnimations = function () {\r\n        clearCSSAnimationsTimeout();\r\n        raf(function () {\r\n            elements.forEach(function (element) {\r\n                if (_keyframes.length > 0) {\r\n                    setStyleProperty(element, 'animation-play-state', 'running');\r\n                }\r\n            });\r\n        });\r\n        if (_keyframes.length === 0 || elements.length === 0) {\r\n            animationFinish();\r\n        }\r\n        else {\r\n            /**\r\n             * This is a catchall in the event that a CSS Animation did not finish.\r\n             * The Web Animations API has mechanisms in place for preventing this.\r\n             * CSS Animations will not fire an `animationend` event\r\n             * for elements with `display: none`. The Web Animations API\r\n             * accounts for this, but using raw CSS Animations requires\r\n             * this workaround.\r\n             */\r\n            var animationDelay = getDelay() || 0;\r\n            var animationDuration = getDuration() || 0;\r\n            var animationIterations = getIterations() || 1;\r\n            // No need to set a timeout when animation has infinite iterations\r\n            if (isFinite(animationIterations)) {\r\n                cssAnimationsTimerFallback = setTimeout(onAnimationEndFallback, animationDelay + (animationDuration * animationIterations) + ANIMATION_END_FALLBACK_PADDING_MS);\r\n            }\r\n            animationEnd(elements[0], function () {\r\n                clearCSSAnimationsTimeout();\r\n                /**\r\n                 * Ensure that clean up\r\n                 * is always done a frame\r\n                 * before the onFinish handlers\r\n                 * are fired. Otherwise, there\r\n                 * may be flickering if a new\r\n                 * animation is started on the same\r\n                 * element too quickly\r\n                 *\r\n                 * TODO: Is there a cleaner way to do this?\r\n                 */\r\n                raf(function () {\r\n                    clearCSSAnimationPlayState();\r\n                    raf(animationFinish);\r\n                });\r\n            });\r\n        }\r\n    };\r\n    var clearCSSAnimationPlayState = function () {\r\n        elements.forEach(function (element) {\r\n            removeStyleProperty(element, 'animation-duration');\r\n            removeStyleProperty(element, 'animation-delay');\r\n            removeStyleProperty(element, 'animation-play-state');\r\n        });\r\n    };\r\n    var playWebAnimations = function () {\r\n        webAnimations.forEach(function (animation) {\r\n            animation.play();\r\n        });\r\n        if (_keyframes.length === 0 || elements.length === 0) {\r\n            animationFinish();\r\n        }\r\n    };\r\n    var resetAnimation = function () {\r\n        if (supportsWebAnimations) {\r\n            setAnimationStep(0);\r\n            updateWebAnimation();\r\n        }\r\n        else {\r\n            updateCSSAnimation();\r\n        }\r\n    };\r\n    var play = function (opts) {\r\n        return new Promise(function (resolve) {\r\n            if (opts && opts.sync) {\r\n                shouldForceSyncPlayback = true;\r\n                onFinish(function () { return shouldForceSyncPlayback = false; }, { oneTimeCallback: true });\r\n            }\r\n            if (!initialized) {\r\n                initializeAnimation();\r\n            }\r\n            if (finished) {\r\n                resetAnimation();\r\n                finished = false;\r\n            }\r\n            if (shouldCalculateNumAnimations) {\r\n                numAnimationsRunning = childAnimations.length + 1;\r\n                shouldCalculateNumAnimations = false;\r\n            }\r\n            onFinish(function () { return resolve(); }, { oneTimeCallback: true });\r\n            childAnimations.forEach(function (animation) {\r\n                animation.play();\r\n            });\r\n            if (supportsWebAnimations) {\r\n                playWebAnimations();\r\n            }\r\n            else {\r\n                playCSSAnimations();\r\n            }\r\n        });\r\n    };\r\n    var stop = function () {\r\n        childAnimations.forEach(function (animation) {\r\n            animation.stop();\r\n        });\r\n        if (initialized) {\r\n            cleanUpElements();\r\n            initialized = false;\r\n        }\r\n        resetFlags();\r\n    };\r\n    var from = function (property, value) {\r\n        var _a;\r\n        var firstFrame = _keyframes[0];\r\n        if (firstFrame !== undefined && (firstFrame.offset === undefined || firstFrame.offset === 0)) {\r\n            firstFrame[property] = value;\r\n        }\r\n        else {\r\n            _keyframes = __spreadArrays([\r\n                (_a = { offset: 0 }, _a[property] = value, _a)\r\n            ], _keyframes);\r\n        }\r\n        return ani;\r\n    };\r\n    var to = function (property, value) {\r\n        var _a;\r\n        var lastFrame = _keyframes[_keyframes.length - 1];\r\n        if (lastFrame !== undefined && (lastFrame.offset === undefined || lastFrame.offset === 1)) {\r\n            lastFrame[property] = value;\r\n        }\r\n        else {\r\n            _keyframes = __spreadArrays(_keyframes, [\r\n                (_a = { offset: 1 }, _a[property] = value, _a)\r\n            ]);\r\n        }\r\n        return ani;\r\n    };\r\n    var fromTo = function (property, fromValue, toValue) {\r\n        return from(property, fromValue).to(property, toValue);\r\n    };\r\n    return ani = {\r\n        parentAnimation: parentAnimation,\r\n        elements: elements,\r\n        childAnimations: childAnimations,\r\n        id: id,\r\n        animationFinish: animationFinish,\r\n        from: from,\r\n        to: to,\r\n        fromTo: fromTo,\r\n        parent: parent,\r\n        play: play,\r\n        pause: pause,\r\n        stop: stop,\r\n        destroy: destroy,\r\n        keyframes: keyframes,\r\n        addAnimation: addAnimation,\r\n        addElement: addElement,\r\n        update: update,\r\n        fill: fill,\r\n        direction: direction,\r\n        iterations: iterations,\r\n        duration: duration,\r\n        easing: easing,\r\n        delay: delay,\r\n        getWebAnimations: getWebAnimations,\r\n        getKeyframes: getKeyframes,\r\n        getFill: getFill,\r\n        getDirection: getDirection,\r\n        getDelay: getDelay,\r\n        getIterations: getIterations,\r\n        getEasing: getEasing,\r\n        getDuration: getDuration,\r\n        afterAddRead: afterAddRead,\r\n        afterAddWrite: afterAddWrite,\r\n        afterClearStyles: afterClearStyles,\r\n        afterStyles: afterStyles,\r\n        afterRemoveClass: afterRemoveClass,\r\n        afterAddClass: afterAddClass,\r\n        beforeAddRead: beforeAddRead,\r\n        beforeAddWrite: beforeAddWrite,\r\n        beforeClearStyles: beforeClearStyles,\r\n        beforeStyles: beforeStyles,\r\n        beforeRemoveClass: beforeRemoveClass,\r\n        beforeAddClass: beforeAddClass,\r\n        onFinish: onFinish,\r\n        progressStart: progressStart,\r\n        progressStep: progressStep,\r\n        progressEnd: progressEnd\r\n    };\r\n};\r\nexport { createAnimation as c };\r\n"],"sourceRoot":""}