{"version":3,"sources":["webpack:///./node_modules/iiif-explorer/dist/esm-es5/ion-datetime-md.entry.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/theme-215399f6.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/helpers-b7c9db54.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/hardware-back-button-d00923be.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/overlays-c3bbdd4c.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","renderTextFormat","format","date","locale","FORMAT_DDDD","FORMAT_DDD","FORMAT_A","undefined","hour","toUpperCase","FORMAT_a","FORMAT_YY","FORMAT_MM","FORMAT_DD","FORMAT_HH","FORMAT_mm","FORMAT_ss","twoDigit","FORMAT_YYYY","fourDigit","FORMAT_MMMM","monthNames","MONTH_NAMES","FORMAT_MMM","monthShortNames","MONTH_SHORT_NAMES","FORMAT_hh","FORMAT_h","toString","Date","year","month","day","getDay","dayNames","DAY_NAMES","dayShortNames","DAY_SHORT_NAMES","dateSortValue","minute","parseInt","dateDataSortValue","data","isLeapYear","ISO_8601_REGEXP","TIME_REGEXP","parseDate","val","parse","exec","unshift","i","tzOffset","second","millisecond","getTimezoneOffset","localDate","timeZone","utcDateTime","toLocaleString","tzDateTime","getTime","updateDate","existingData","newData","displayTimezone","dateTime","dateString","localDateTime","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getDateTime","Number","isNaN","toISOString","Object","assign","ampm","_i","_a","keys","key","console","warn","k","hasOwnProperty","getValueFromFormat","convertFormatToKey","FORMAT_KEYS","convertDataToISO","rtn","threeDigit","Math","floor","abs","convertToArrayOfStrings","input","type","values","replace","split","Array","isArray","map","trim","convertToArrayOfNumbers","num","filter","isFinite","slice","FORMAT_M","FORMAT_D","FORMAT_H","FORMAT_m","FORMAT_s","VALID_AMPM_PREFIX","Datetime","class_1","hostRef","_this","inputId","datetimeIds","datetimeMin","datetimeMax","datetimeValue","isExpanded","name","disabled","readonly","displayFormat","cancelText","doneText","onClick","setFocus","open","onFocus","ionFocus","emit","onBlur","ionBlur","ionCancel","ionChange","ionStyle","prototype","disabledChanged","emitStyle","valueChanged","updateDatetimeValue","componentWillLoad","pickerOptions","picker","generatePickerOptions","create","onDidDismiss","addEventListener","event","colSelectedIndex","colOptions","changeData","detail","selectedIndex","options","columns","generateColumns","present","placeholder","hasValue","mode","buttons","text","role","handler","template","pickerFormat","DEFAULT_FORMAT","calcMinMax","indexOf","formats","forEach","charAt","words","w","word","parseTemplate","self","min","max","opts","Error","dateValueRange","optValue","getValue","defaultDate","getDateValue","findIndex","opt","find","column","validateColumns","divyColumns","today","minCompareVal","maxCompareVal","yearCol","c","selectedYear","col","yearOpt","selectedMonth","validateColumn","numDaysInMonth","selectedDay","selectedHour","todaysYear","yearValues","years","error","index","lowerBounds","upperBounds","lb","ub","indexMin","indexMax","defineProperty","get","tokens","hasText","token","renderDatetime","enumerable","configurable","buttonEl","focus","render","_b","el","labelId","addPlaceholderClass","datetimeText","id","class","ref","btnEl","width","columnsWidth","align","optionsWidth","columnWidth","hostContext","selector","closest","createColorClasses","color","getClassMap","classes","getClassList","SCHEME","openURL","url","ev","direction","router","test","document","querySelector","preventDefault","__spreadArrays","s","il","arguments","r","a","j","jl","raf","h","__zone_symbol__requestAnimationFrame","requestAnimationFrame","setTimeout","hasShadowDom","shadowRoot","attachShadow","findItemLabel","componentEl","itemEl","renderHiddenInput","always","container","ownerDocument","createElement","classList","add","appendChild","clamp","assert","actual","reason","message","now","timeStamp","pointerCoord","changedTouches","touch","x","clientX","clientY","pageX","pageY","isEndSide","side","isRTL","dir","debounceEvent","wait","original","_original","debounce","bind","func","timer","args","clearTimeout","startHardwareBackButton","doc","busy","handlers","CustomEvent","bubbles","register","priority","dispatchEvent","selectedHandler_1","selectedPriority_1","MIN_SAFE_INTEGER","executeAction","e_1","OVERLAY_BACK_BUTTON_PRIORITY","MENU_BACK_BUTTON_PRIORITY","lastId","activeAnimations","WeakMap","createController","tagName","createOverlay","dismiss","dismissOverlay","getTop","getOverlay","alertController","actionSheetController","pickerController","popoverController","prepareOverlay","connectListeners","overlayIndex","hasAttribute","customElements","whenDefined","element","getAppRoot","componentOnReady","lastOverlay","backdropDismiss","isDescendant","target","firstInput","BACKDROP","overlayTag","overlay","overlays","from","querySelectorAll","getOverlays","o","iosEnterAnimation","mdEnterAnimation","animationBuilder","presented","willPresent","enterAnimation","overlayAnimation","didPresent","iosLeaveAnimation","mdLeaveAnimation","err_1","willDismiss","leaveAnimation","didDismiss","delete","remove","baseEl","aniRoot","animation","activeAni","animated","getBoolean","duration","keyboardClose","beforeAddWrite","activeElement","matches","blur","set","play","eventMethod","eventName","promise","onceEvent","callback","removeEventListener","isCancel","parent","child","parentElement","defaultGate","safeCall","arg","jmp"],"mappings":"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","file":"16.53dd69c8a69f36d2a022.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { r as registerInstance, c as createEvent, e as getIonMode, h, H as Host, d as getElement } from './core-0428d3c8.js';\r\nimport { c as clamp, f as findItemLabel, a as renderHiddenInput } from './helpers-b7c9db54.js';\r\nimport { h as hostContext } from './theme-215399f6.js';\r\nimport './hardware-back-button-d00923be.js';\r\nimport { b as pickerController } from './overlays-c3bbdd4c.js';\r\n/**\r\n * Gets a date value given a format\r\n * Defaults to the current date if\r\n * no date given\r\n */\r\nvar getDateValue = function (date, format) {\r\n    var getValue = getValueFromFormat(date, format);\r\n    if (getValue !== undefined) {\r\n        return getValue;\r\n    }\r\n    var defaultDate = parseDate(new Date().toISOString());\r\n    return getValueFromFormat(defaultDate, format);\r\n};\r\nvar renderDatetime = function (template, value, locale) {\r\n    if (value === undefined) {\r\n        return undefined;\r\n    }\r\n    var tokens = [];\r\n    var hasText = false;\r\n    FORMAT_KEYS.forEach(function (format, index) {\r\n        if (template.indexOf(format.f) > -1) {\r\n            var token = '{' + index + '}';\r\n            var text = renderTextFormat(format.f, value[format.k], value, locale);\r\n            if (!hasText && text !== undefined && value[format.k] != null) {\r\n                hasText = true;\r\n            }\r\n            tokens.push(token, text || '');\r\n            template = template.replace(format.f, token);\r\n        }\r\n    });\r\n    if (!hasText) {\r\n        return undefined;\r\n    }\r\n    for (var i = 0; i < tokens.length; i += 2) {\r\n        template = template.replace(tokens[i], tokens[i + 1]);\r\n    }\r\n    return template;\r\n};\r\nvar renderTextFormat = function (format, value, date, locale) {\r\n    if ((format === FORMAT_DDDD || format === FORMAT_DDD)) {\r\n        try {\r\n            value = (new Date(date.year, date.month - 1, date.day)).getDay();\r\n            if (format === FORMAT_DDDD) {\r\n                return (locale.dayNames ? locale.dayNames : DAY_NAMES)[value];\r\n            }\r\n            return (locale.dayShortNames ? locale.dayShortNames : DAY_SHORT_NAMES)[value];\r\n        }\r\n        catch (e) {\r\n            // ignore\r\n        }\r\n        return undefined;\r\n    }\r\n    if (format === FORMAT_A) {\r\n        return date !== undefined && date.hour !== undefined\r\n            ? (date.hour < 12 ? 'AM' : 'PM')\r\n            : value ? value.toUpperCase() : '';\r\n    }\r\n    if (format === FORMAT_a) {\r\n        return date !== undefined && date.hour !== undefined\r\n            ? (date.hour < 12 ? 'am' : 'pm')\r\n            : value || '';\r\n    }\r\n    if (value == null) {\r\n        return '';\r\n    }\r\n    if (format === FORMAT_YY || format === FORMAT_MM ||\r\n        format === FORMAT_DD || format === FORMAT_HH ||\r\n        format === FORMAT_mm || format === FORMAT_ss) {\r\n        return twoDigit(value);\r\n    }\r\n    if (format === FORMAT_YYYY) {\r\n        return fourDigit(value);\r\n    }\r\n    if (format === FORMAT_MMMM) {\r\n        return (locale.monthNames ? locale.monthNames : MONTH_NAMES)[value - 1];\r\n    }\r\n    if (format === FORMAT_MMM) {\r\n        return (locale.monthShortNames ? locale.monthShortNames : MONTH_SHORT_NAMES)[value - 1];\r\n    }\r\n    if (format === FORMAT_hh || format === FORMAT_h) {\r\n        if (value === 0) {\r\n            return '12';\r\n        }\r\n        if (value > 12) {\r\n            value -= 12;\r\n        }\r\n        if (format === FORMAT_hh && value < 10) {\r\n            return ('0' + value);\r\n        }\r\n    }\r\n    return value.toString();\r\n};\r\nvar dateValueRange = function (format, min, max) {\r\n    var opts = [];\r\n    if (format === FORMAT_YYYY || format === FORMAT_YY) {\r\n        // year\r\n        if (max.year === undefined || min.year === undefined) {\r\n            throw new Error('min and max year is undefined');\r\n        }\r\n        for (var i = max.year; i >= min.year; i--) {\r\n            opts.push(i);\r\n        }\r\n    }\r\n    else if (format === FORMAT_MMMM || format === FORMAT_MMM ||\r\n        format === FORMAT_MM || format === FORMAT_M ||\r\n        format === FORMAT_hh || format === FORMAT_h) {\r\n        // month or 12-hour\r\n        for (var i = 1; i < 13; i++) {\r\n            opts.push(i);\r\n        }\r\n    }\r\n    else if (format === FORMAT_DDDD || format === FORMAT_DDD ||\r\n        format === FORMAT_DD || format === FORMAT_D) {\r\n        // day\r\n        for (var i = 1; i < 32; i++) {\r\n            opts.push(i);\r\n        }\r\n    }\r\n    else if (format === FORMAT_HH || format === FORMAT_H) {\r\n        // 24-hour\r\n        for (var i = 0; i < 24; i++) {\r\n            opts.push(i);\r\n        }\r\n    }\r\n    else if (format === FORMAT_mm || format === FORMAT_m) {\r\n        // minutes\r\n        for (var i = 0; i < 60; i++) {\r\n            opts.push(i);\r\n        }\r\n    }\r\n    else if (format === FORMAT_ss || format === FORMAT_s) {\r\n        // seconds\r\n        for (var i = 0; i < 60; i++) {\r\n            opts.push(i);\r\n        }\r\n    }\r\n    else if (format === FORMAT_A || format === FORMAT_a) {\r\n        // AM/PM\r\n        opts.push('am', 'pm');\r\n    }\r\n    return opts;\r\n};\r\nvar dateSortValue = function (year, month, day, hour, minute) {\r\n    if (hour === void 0) { hour = 0; }\r\n    if (minute === void 0) { minute = 0; }\r\n    return parseInt(\"1\" + fourDigit(year) + twoDigit(month) + twoDigit(day) + twoDigit(hour) + twoDigit(minute), 10);\r\n};\r\nvar dateDataSortValue = function (data) {\r\n    return dateSortValue(data.year, data.month, data.day, data.hour, data.minute);\r\n};\r\nvar daysInMonth = function (month, year) {\r\n    return (month === 4 || month === 6 || month === 9 || month === 11) ? 30 : (month === 2) ? isLeapYear(year) ? 29 : 28 : 31;\r\n};\r\nvar isLeapYear = function (year) {\r\n    return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);\r\n};\r\nvar ISO_8601_REGEXP = /^(\\d{4}|[+\\-]\\d{6})(?:-(\\d{2})(?:-(\\d{2}))?)?(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:(Z)|([+\\-])(\\d{2})(?::(\\d{2}))?)?)?$/;\r\nvar TIME_REGEXP = /^((\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:(Z)|([+\\-])(\\d{2})(?::(\\d{2}))?)?)?$/;\r\nvar parseDate = function (val) {\r\n    // manually parse IS0 cuz Date.parse cannot be trusted\r\n    // ISO 8601 format: 1994-12-15T13:47:20Z\r\n    var parse = null;\r\n    if (val != null && val !== '') {\r\n        // try parsing for just time first, HH:MM\r\n        parse = TIME_REGEXP.exec(val);\r\n        if (parse) {\r\n            // adjust the array so it fits nicely with the datetime parse\r\n            parse.unshift(undefined, undefined);\r\n            parse[2] = parse[3] = undefined;\r\n        }\r\n        else {\r\n            // try parsing for full ISO datetime\r\n            parse = ISO_8601_REGEXP.exec(val);\r\n        }\r\n    }\r\n    if (parse === null) {\r\n        // wasn't able to parse the ISO datetime\r\n        return undefined;\r\n    }\r\n    // ensure all the parse values exist with at least 0\r\n    for (var i = 1; i < 8; i++) {\r\n        parse[i] = parse[i] !== undefined ? parseInt(parse[i], 10) : undefined;\r\n    }\r\n    var tzOffset = 0;\r\n    if (parse[9] && parse[10]) {\r\n        // hours\r\n        tzOffset = parseInt(parse[10], 10) * 60;\r\n        if (parse[11]) {\r\n            // minutes\r\n            tzOffset += parseInt(parse[11], 10);\r\n        }\r\n        if (parse[9] === '-') {\r\n            // + or -\r\n            tzOffset *= -1;\r\n        }\r\n    }\r\n    return {\r\n        year: parse[1],\r\n        month: parse[2],\r\n        day: parse[3],\r\n        hour: parse[4],\r\n        minute: parse[5],\r\n        second: parse[6],\r\n        millisecond: parse[7],\r\n        tzOffset: tzOffset,\r\n    };\r\n};\r\n/**\r\n * Converts a valid UTC datetime string to JS Date time object.\r\n * By default uses the users local timezone, but an optional\r\n * timezone can be provided.\r\n * Note: This is not meant for time strings\r\n * such as \"01:47\"\r\n */\r\nvar getDateTime = function (dateString, timeZone) {\r\n    if (dateString === void 0) { dateString = ''; }\r\n    if (timeZone === void 0) { timeZone = ''; }\r\n    /**\r\n     * If user passed in undefined\r\n     * or null, convert it to the\r\n     * empty string since the rest\r\n     * of this functions expects\r\n     * a string\r\n     */\r\n    if (dateString === undefined || dateString === null) {\r\n        dateString = '';\r\n    }\r\n    /**\r\n     * Ensures that YYYY-MM-DD, YYYY-MM,\r\n     * YYYY-DD, etc does not get affected\r\n     * by timezones and stays on the day/month\r\n     * that the user provided\r\n     */\r\n    if (dateString.length === 10 ||\r\n        dateString.length === 7) {\r\n        dateString += ' ';\r\n    }\r\n    var date = (typeof dateString === 'string' && dateString.length > 0) ? new Date(dateString) : new Date();\r\n    var localDateTime = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\r\n    if (timeZone && timeZone.length > 0) {\r\n        return new Date(date.getTime() - getTimezoneOffset(localDateTime, timeZone));\r\n    }\r\n    return localDateTime;\r\n};\r\nvar getTimezoneOffset = function (localDate, timeZone) {\r\n    var utcDateTime = new Date(localDate.toLocaleString('en-US', { timeZone: 'utc' }));\r\n    var tzDateTime = new Date(localDate.toLocaleString('en-US', { timeZone: timeZone }));\r\n    return utcDateTime.getTime() - tzDateTime.getTime();\r\n};\r\nvar updateDate = function (existingData, newData, displayTimezone) {\r\n    if (!newData || typeof newData === 'string') {\r\n        var dateTime = getDateTime(newData, displayTimezone);\r\n        if (!Number.isNaN(dateTime.getTime())) {\r\n            newData = dateTime.toISOString();\r\n        }\r\n    }\r\n    if (newData && newData !== '') {\r\n        if (typeof newData === 'string') {\r\n            // new date is a string, and hopefully in the ISO format\r\n            // convert it to our DatetimeData if a valid ISO\r\n            newData = parseDate(newData);\r\n            if (newData) {\r\n                // successfully parsed the ISO string to our DatetimeData\r\n                Object.assign(existingData, newData);\r\n                return true;\r\n            }\r\n        }\r\n        else if ((newData.year || newData.hour || newData.month || newData.day || newData.minute || newData.second)) {\r\n            // newData is from of a datetime picker's selected values\r\n            // update the existing DatetimeData data with the new values\r\n            // do some magic for 12-hour values\r\n            if (newData.ampm && newData.hour) {\r\n                newData.hour.value = (newData.ampm.value === 'pm')\r\n                    ? (newData.hour.value === 12 ? 12 : newData.hour.value + 12)\r\n                    : (newData.hour.value === 12 ? 0 : newData.hour.value);\r\n            }\r\n            // merge new values from the picker's selection\r\n            // to the existing DatetimeData values\r\n            for (var _i = 0, _a = Object.keys(newData); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                existingData[key] = newData[key].value;\r\n            }\r\n            return true;\r\n        }\r\n        else if (newData.ampm) {\r\n            // Even though in the picker column hour values are between 1 and 12, the hour value is actually normalized\r\n            // to [0, 23] interval. Because of this when changing between AM and PM we have to update the hour so it points\r\n            // to the correct HH hour\r\n            newData.hour = {\r\n                value: newData.hour\r\n                    ? newData.hour.value\r\n                    : (newData.ampm.value === 'pm'\r\n                        ? (existingData.hour < 12 ? existingData.hour + 12 : existingData.hour)\r\n                        : (existingData.hour >= 12 ? existingData.hour - 12 : existingData.hour))\r\n            };\r\n            existingData['hour'] = newData['hour'].value;\r\n            return true;\r\n        }\r\n        // eww, invalid data\r\n        console.warn(\"Error parsing date: \\\"\" + newData + \"\\\". Please provide a valid ISO 8601 datetime format: https://www.w3.org/TR/NOTE-datetime\");\r\n    }\r\n    else {\r\n        // blank data, clear everything out\r\n        for (var k in existingData) {\r\n            if (existingData.hasOwnProperty(k)) {\r\n                delete existingData[k];\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\nvar parseTemplate = function (template) {\r\n    var formats = [];\r\n    template = template.replace(/[^\\w\\s]/gi, ' ');\r\n    FORMAT_KEYS.forEach(function (format) {\r\n        if (format.f.length > 1 && template.indexOf(format.f) > -1 && template.indexOf(format.f + format.f.charAt(0)) < 0) {\r\n            template = template.replace(format.f, ' ' + format.f + ' ');\r\n        }\r\n    });\r\n    var words = template.split(' ').filter(function (w) { return w.length > 0; });\r\n    words.forEach(function (word, i) {\r\n        FORMAT_KEYS.forEach(function (format) {\r\n            if (word === format.f) {\r\n                if (word === FORMAT_A || word === FORMAT_a) {\r\n                    // this format is an am/pm format, so it's an \"a\" or \"A\"\r\n                    if ((formats.indexOf(FORMAT_h) < 0 && formats.indexOf(FORMAT_hh) < 0) ||\r\n                        VALID_AMPM_PREFIX.indexOf(words[i - 1]) === -1) {\r\n                        // template does not already have a 12-hour format\r\n                        // or this am/pm format doesn't have a hour, minute, or second format immediately before it\r\n                        // so do not treat this word \"a\" or \"A\" as the am/pm format\r\n                        return;\r\n                    }\r\n                }\r\n                formats.push(word);\r\n            }\r\n        });\r\n    });\r\n    return formats;\r\n};\r\nvar getValueFromFormat = function (date, format) {\r\n    if (format === FORMAT_A || format === FORMAT_a) {\r\n        return (date.hour < 12 ? 'am' : 'pm');\r\n    }\r\n    if (format === FORMAT_hh || format === FORMAT_h) {\r\n        return (date.hour > 12 ? date.hour - 12 : (date.hour === 0 ? 12 : date.hour));\r\n    }\r\n    return date[convertFormatToKey(format)];\r\n};\r\nvar convertFormatToKey = function (format) {\r\n    for (var k in FORMAT_KEYS) {\r\n        if (FORMAT_KEYS[k].f === format) {\r\n            return FORMAT_KEYS[k].k;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\nvar convertDataToISO = function (data) {\r\n    // https://www.w3.org/TR/NOTE-datetime\r\n    var rtn = '';\r\n    if (data.year !== undefined) {\r\n        // YYYY\r\n        rtn = fourDigit(data.year);\r\n        if (data.month !== undefined) {\r\n            // YYYY-MM\r\n            rtn += '-' + twoDigit(data.month);\r\n            if (data.day !== undefined) {\r\n                // YYYY-MM-DD\r\n                rtn += '-' + twoDigit(data.day);\r\n                if (data.hour !== undefined) {\r\n                    // YYYY-MM-DDTHH:mm:SS\r\n                    rtn += \"T\" + twoDigit(data.hour) + \":\" + twoDigit(data.minute) + \":\" + twoDigit(data.second);\r\n                    if (data.millisecond > 0) {\r\n                        // YYYY-MM-DDTHH:mm:SS.SSS\r\n                        rtn += '.' + threeDigit(data.millisecond);\r\n                    }\r\n                    if (data.tzOffset === undefined) {\r\n                        // YYYY-MM-DDTHH:mm:SSZ\r\n                        rtn += 'Z';\r\n                    }\r\n                    else {\r\n                        // YYYY-MM-DDTHH:mm:SS+/-HH:mm\r\n                        rtn += (data.tzOffset > 0 ? '+' : '-') + twoDigit(Math.floor(Math.abs(data.tzOffset / 60))) + ':' + twoDigit(data.tzOffset % 60);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else if (data.hour !== undefined) {\r\n        // HH:mm\r\n        rtn = twoDigit(data.hour) + ':' + twoDigit(data.minute);\r\n        if (data.second !== undefined) {\r\n            // HH:mm:SS\r\n            rtn += ':' + twoDigit(data.second);\r\n            if (data.millisecond !== undefined) {\r\n                // HH:mm:SS.SSS\r\n                rtn += '.' + threeDigit(data.millisecond);\r\n            }\r\n        }\r\n    }\r\n    return rtn;\r\n};\r\n/**\r\n * Use to convert a string of comma separated strings or\r\n * an array of strings, and clean up any user input\r\n */\r\nvar convertToArrayOfStrings = function (input, type) {\r\n    if (input == null) {\r\n        return undefined;\r\n    }\r\n    if (typeof input === 'string') {\r\n        // convert the string to an array of strings\r\n        // auto remove any [] characters\r\n        input = input.replace(/\\[|\\]/g, '').split(',');\r\n    }\r\n    var values;\r\n    if (Array.isArray(input)) {\r\n        // trim up each string value\r\n        values = input.map(function (val) { return val.toString().trim(); });\r\n    }\r\n    if (values === undefined || values.length === 0) {\r\n        console.warn(\"Invalid \\\"\" + type + \"Names\\\". Must be an array of strings, or a comma separated string.\");\r\n    }\r\n    return values;\r\n};\r\n/**\r\n * Use to convert a string of comma separated numbers or\r\n * an array of numbers, and clean up any user input\r\n */\r\nvar convertToArrayOfNumbers = function (input, type) {\r\n    if (typeof input === 'string') {\r\n        // convert the string to an array of strings\r\n        // auto remove any whitespace and [] characters\r\n        input = input.replace(/\\[|\\]|\\s/g, '').split(',');\r\n    }\r\n    var values;\r\n    if (Array.isArray(input)) {\r\n        // ensure each value is an actual number in the returned array\r\n        values = input\r\n            .map(function (num) { return parseInt(num, 10); })\r\n            .filter(isFinite);\r\n    }\r\n    else {\r\n        values = [input];\r\n    }\r\n    if (values.length === 0) {\r\n        console.warn(\"Invalid \\\"\" + type + \"Values\\\". Must be an array of numbers, or a comma separated string of numbers.\");\r\n    }\r\n    return values;\r\n};\r\nvar twoDigit = function (val) {\r\n    return ('0' + (val !== undefined ? Math.abs(val) : '0')).slice(-2);\r\n};\r\nvar threeDigit = function (val) {\r\n    return ('00' + (val !== undefined ? Math.abs(val) : '0')).slice(-3);\r\n};\r\nvar fourDigit = function (val) {\r\n    return ('000' + (val !== undefined ? Math.abs(val) : '0')).slice(-4);\r\n};\r\nvar FORMAT_YYYY = 'YYYY';\r\nvar FORMAT_YY = 'YY';\r\nvar FORMAT_MMMM = 'MMMM';\r\nvar FORMAT_MMM = 'MMM';\r\nvar FORMAT_MM = 'MM';\r\nvar FORMAT_M = 'M';\r\nvar FORMAT_DDDD = 'DDDD';\r\nvar FORMAT_DDD = 'DDD';\r\nvar FORMAT_DD = 'DD';\r\nvar FORMAT_D = 'D';\r\nvar FORMAT_HH = 'HH';\r\nvar FORMAT_H = 'H';\r\nvar FORMAT_hh = 'hh';\r\nvar FORMAT_h = 'h';\r\nvar FORMAT_mm = 'mm';\r\nvar FORMAT_m = 'm';\r\nvar FORMAT_ss = 'ss';\r\nvar FORMAT_s = 's';\r\nvar FORMAT_A = 'A';\r\nvar FORMAT_a = 'a';\r\nvar FORMAT_KEYS = [\r\n    { f: FORMAT_YYYY, k: 'year' },\r\n    { f: FORMAT_MMMM, k: 'month' },\r\n    { f: FORMAT_DDDD, k: 'day' },\r\n    { f: FORMAT_MMM, k: 'month' },\r\n    { f: FORMAT_DDD, k: 'day' },\r\n    { f: FORMAT_YY, k: 'year' },\r\n    { f: FORMAT_MM, k: 'month' },\r\n    { f: FORMAT_DD, k: 'day' },\r\n    { f: FORMAT_HH, k: 'hour' },\r\n    { f: FORMAT_hh, k: 'hour' },\r\n    { f: FORMAT_mm, k: 'minute' },\r\n    { f: FORMAT_ss, k: 'second' },\r\n    { f: FORMAT_M, k: 'month' },\r\n    { f: FORMAT_D, k: 'day' },\r\n    { f: FORMAT_H, k: 'hour' },\r\n    { f: FORMAT_h, k: 'hour' },\r\n    { f: FORMAT_m, k: 'minute' },\r\n    { f: FORMAT_s, k: 'second' },\r\n    { f: FORMAT_A, k: 'ampm' },\r\n    { f: FORMAT_a, k: 'ampm' },\r\n];\r\nvar DAY_NAMES = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n];\r\nvar DAY_SHORT_NAMES = [\r\n    'Sun',\r\n    'Mon',\r\n    'Tue',\r\n    'Wed',\r\n    'Thu',\r\n    'Fri',\r\n    'Sat',\r\n];\r\nvar MONTH_NAMES = [\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December',\r\n];\r\nvar MONTH_SHORT_NAMES = [\r\n    'Jan',\r\n    'Feb',\r\n    'Mar',\r\n    'Apr',\r\n    'May',\r\n    'Jun',\r\n    'Jul',\r\n    'Aug',\r\n    'Sep',\r\n    'Oct',\r\n    'Nov',\r\n    'Dec',\r\n];\r\nvar VALID_AMPM_PREFIX = [\r\n    FORMAT_hh, FORMAT_h, FORMAT_mm, FORMAT_m, FORMAT_ss, FORMAT_s\r\n];\r\nvar Datetime = /** @class */ (function () {\r\n    function class_1(hostRef) {\r\n        var _this = this;\r\n        registerInstance(this, hostRef);\r\n        this.inputId = \"ion-dt-\" + datetimeIds++;\r\n        this.locale = {};\r\n        this.datetimeMin = {};\r\n        this.datetimeMax = {};\r\n        this.datetimeValue = {};\r\n        this.isExpanded = false;\r\n        /**\r\n         * The name of the control, which is submitted with the form data.\r\n         */\r\n        this.name = this.inputId;\r\n        /**\r\n         * If `true`, the user cannot interact with the datetime.\r\n         */\r\n        this.disabled = false;\r\n        /**\r\n         * If `true`, the datetime appears normal but is not interactive.\r\n         */\r\n        this.readonly = false;\r\n        /**\r\n         * The display format of the date and time as text that shows\r\n         * within the item. When the `pickerFormat` input is not used, then the\r\n         * `displayFormat` is used for both display the formatted text, and determining\r\n         * the datetime picker's columns. See the `pickerFormat` input description for\r\n         * more info. Defaults to `MMM D, YYYY`.\r\n         */\r\n        this.displayFormat = 'MMM D, YYYY';\r\n        /**\r\n         * The text to display on the picker's cancel button.\r\n         */\r\n        this.cancelText = 'Cancel';\r\n        /**\r\n         * The text to display on the picker's \"Done\" button.\r\n         */\r\n        this.doneText = 'Done';\r\n        this.onClick = function () {\r\n            _this.setFocus();\r\n            _this.open();\r\n        };\r\n        this.onFocus = function () {\r\n            _this.ionFocus.emit();\r\n        };\r\n        this.onBlur = function () {\r\n            _this.ionBlur.emit();\r\n        };\r\n        this.ionCancel = createEvent(this, \"ionCancel\", 7);\r\n        this.ionChange = createEvent(this, \"ionChange\", 7);\r\n        this.ionFocus = createEvent(this, \"ionFocus\", 7);\r\n        this.ionBlur = createEvent(this, \"ionBlur\", 7);\r\n        this.ionStyle = createEvent(this, \"ionStyle\", 7);\r\n    }\r\n    class_1.prototype.disabledChanged = function () {\r\n        this.emitStyle();\r\n    };\r\n    /**\r\n     * Update the datetime value when the value changes\r\n     */\r\n    class_1.prototype.valueChanged = function () {\r\n        this.updateDatetimeValue(this.value);\r\n        this.emitStyle();\r\n        this.ionChange.emit({\r\n            value: this.value\r\n        });\r\n    };\r\n    class_1.prototype.componentWillLoad = function () {\r\n        // first see if locale names were provided in the inputs\r\n        // then check to see if they're in the config\r\n        // if neither were provided then it will use default English names\r\n        this.locale = {\r\n            // this.locale[type] = convertToArrayOfStrings((this[type] ? this[type] : this.config.get(type), type);\r\n            monthNames: convertToArrayOfStrings(this.monthNames, 'monthNames'),\r\n            monthShortNames: convertToArrayOfStrings(this.monthShortNames, 'monthShortNames'),\r\n            dayNames: convertToArrayOfStrings(this.dayNames, 'dayNames'),\r\n            dayShortNames: convertToArrayOfStrings(this.dayShortNames, 'dayShortNames')\r\n        };\r\n        this.updateDatetimeValue(this.value);\r\n        this.emitStyle();\r\n    };\r\n    /**\r\n     * Opens the datetime overlay.\r\n     */\r\n    class_1.prototype.open = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pickerOptions, picker;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.disabled || this.isExpanded) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        pickerOptions = this.generatePickerOptions();\r\n                        return [4 /*yield*/, pickerController.create(pickerOptions)];\r\n                    case 1:\r\n                        picker = _a.sent();\r\n                        this.isExpanded = true;\r\n                        picker.onDidDismiss().then(function () {\r\n                            _this.isExpanded = false;\r\n                            _this.setFocus();\r\n                        });\r\n                        picker.addEventListener('ionPickerColChange', function (event) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var data, colSelectedIndex, colOptions, changeData;\r\n                            return __generator(this, function (_a) {\r\n                                data = event.detail;\r\n                                colSelectedIndex = data.selectedIndex;\r\n                                colOptions = data.options;\r\n                                changeData = {};\r\n                                changeData[data.name] = {\r\n                                    value: colOptions[colSelectedIndex].value\r\n                                };\r\n                                this.updateDatetimeValue(changeData);\r\n                                picker.columns = this.generateColumns();\r\n                                return [2 /*return*/];\r\n                            });\r\n                        }); });\r\n                        return [4 /*yield*/, picker.present()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    class_1.prototype.emitStyle = function () {\r\n        this.ionStyle.emit({\r\n            'interactive': true,\r\n            'datetime': true,\r\n            'has-placeholder': this.placeholder != null,\r\n            'has-value': this.hasValue(),\r\n            'interactive-disabled': this.disabled,\r\n        });\r\n    };\r\n    class_1.prototype.updateDatetimeValue = function (value) {\r\n        updateDate(this.datetimeValue, value, this.displayTimezone);\r\n    };\r\n    class_1.prototype.generatePickerOptions = function () {\r\n        var _this = this;\r\n        var mode = getIonMode(this);\r\n        var pickerOptions = Object.assign(Object.assign({ mode: mode }, this.pickerOptions), { columns: this.generateColumns() });\r\n        // If the user has not passed in picker buttons,\r\n        // add a cancel and ok button to the picker\r\n        var buttons = pickerOptions.buttons;\r\n        if (!buttons || buttons.length === 0) {\r\n            pickerOptions.buttons = [\r\n                {\r\n                    text: this.cancelText,\r\n                    role: 'cancel',\r\n                    handler: function () {\r\n                        _this.updateDatetimeValue(_this.value);\r\n                        _this.ionCancel.emit();\r\n                    }\r\n                },\r\n                {\r\n                    text: this.doneText,\r\n                    handler: function (data) {\r\n                        _this.updateDatetimeValue(data);\r\n                        /**\r\n                         * Prevent convertDataToISO from doing any\r\n                         * kind of transformation based on timezone\r\n                         * This cancels out any change it attempts to make\r\n                         *\r\n                         * Important: Take the timezone offset based on\r\n                         * the date that is currently selected, otherwise\r\n                         * there can be 1 hr difference when dealing w/ DST\r\n                         */\r\n                        var date = new Date(convertDataToISO(_this.datetimeValue));\r\n                        // If a custom display timezone is provided, use that tzOffset value instead\r\n                        _this.datetimeValue.tzOffset = (_this.displayTimezone !== undefined && _this.displayTimezone.length > 0)\r\n                            ? ((getTimezoneOffset(date, _this.displayTimezone)) / 1000 / 60) * -1\r\n                            : date.getTimezoneOffset() * -1;\r\n                        _this.value = convertDataToISO(_this.datetimeValue);\r\n                    }\r\n                }\r\n            ];\r\n        }\r\n        return pickerOptions;\r\n    };\r\n    class_1.prototype.generateColumns = function () {\r\n        var _this = this;\r\n        // if a picker format wasn't provided, then fallback\r\n        // to use the display format\r\n        var template = this.pickerFormat || this.displayFormat || DEFAULT_FORMAT;\r\n        if (template.length === 0) {\r\n            return [];\r\n        }\r\n        // make sure we've got up to date sizing information\r\n        this.calcMinMax();\r\n        // does not support selecting by day name\r\n        // automatically remove any day name formats\r\n        template = template.replace('DDDD', '{~}').replace('DDD', '{~}');\r\n        if (template.indexOf('D') === -1) {\r\n            // there is not a day in the template\r\n            // replace the day name with a numeric one if it exists\r\n            template = template.replace('{~}', 'D');\r\n        }\r\n        // make sure no day name replacer is left in the string\r\n        template = template.replace(/{~}/g, '');\r\n        // parse apart the given template into an array of \"formats\"\r\n        var columns = parseTemplate(template).map(function (format) {\r\n            // loop through each format in the template\r\n            // create a new picker column to build up with data\r\n            var key = convertFormatToKey(format);\r\n            var values;\r\n            // check if they have exact values to use for this date part\r\n            // otherwise use the default date part values\r\n            var self = _this;\r\n            values = self[key + 'Values']\r\n                ? convertToArrayOfNumbers(self[key + 'Values'], key)\r\n                : dateValueRange(format, _this.datetimeMin, _this.datetimeMax);\r\n            var colOptions = values.map(function (val) {\r\n                return {\r\n                    value: val,\r\n                    text: renderTextFormat(format, val, undefined, _this.locale),\r\n                };\r\n            });\r\n            // cool, we've loaded up the columns with options\r\n            // preselect the option for this column\r\n            var optValue = getDateValue(_this.datetimeValue, format);\r\n            var selectedIndex = colOptions.findIndex(function (opt) { return opt.value === optValue; });\r\n            return {\r\n                name: key,\r\n                selectedIndex: selectedIndex >= 0 ? selectedIndex : 0,\r\n                options: colOptions\r\n            };\r\n        });\r\n        // Normalize min/max\r\n        var min = this.datetimeMin;\r\n        var max = this.datetimeMax;\r\n        ['month', 'day', 'hour', 'minute']\r\n            .filter(function (name) { return !columns.find(function (column) { return column.name === name; }); })\r\n            .forEach(function (name) {\r\n            min[name] = 0;\r\n            max[name] = 0;\r\n        });\r\n        return this.validateColumns(divyColumns(columns));\r\n    };\r\n    class_1.prototype.validateColumns = function (columns) {\r\n        var today = new Date();\r\n        var minCompareVal = dateDataSortValue(this.datetimeMin);\r\n        var maxCompareVal = dateDataSortValue(this.datetimeMax);\r\n        var yearCol = columns.find(function (c) { return c.name === 'year'; });\r\n        var selectedYear = today.getFullYear();\r\n        if (yearCol) {\r\n            // default to the first value if the current year doesn't exist in the options\r\n            if (!yearCol.options.find(function (col) { return col.value === today.getFullYear(); })) {\r\n                selectedYear = yearCol.options[0].value;\r\n            }\r\n            var selectedIndex = yearCol.selectedIndex;\r\n            if (selectedIndex !== undefined) {\r\n                var yearOpt = yearCol.options[selectedIndex];\r\n                if (yearOpt) {\r\n                    // they have a selected year value\r\n                    selectedYear = yearOpt.value;\r\n                }\r\n            }\r\n        }\r\n        var selectedMonth = this.validateColumn(columns, 'month', 1, minCompareVal, maxCompareVal, [selectedYear, 0, 0, 0, 0], [selectedYear, 12, 31, 23, 59]);\r\n        var numDaysInMonth = daysInMonth(selectedMonth, selectedYear);\r\n        var selectedDay = this.validateColumn(columns, 'day', 2, minCompareVal, maxCompareVal, [selectedYear, selectedMonth, 0, 0, 0], [selectedYear, selectedMonth, numDaysInMonth, 23, 59]);\r\n        var selectedHour = this.validateColumn(columns, 'hour', 3, minCompareVal, maxCompareVal, [selectedYear, selectedMonth, selectedDay, 0, 0], [selectedYear, selectedMonth, selectedDay, 23, 59]);\r\n        this.validateColumn(columns, 'minute', 4, minCompareVal, maxCompareVal, [selectedYear, selectedMonth, selectedDay, selectedHour, 0], [selectedYear, selectedMonth, selectedDay, selectedHour, 59]);\r\n        return columns;\r\n    };\r\n    class_1.prototype.calcMinMax = function () {\r\n        var todaysYear = new Date().getFullYear();\r\n        if (this.yearValues !== undefined) {\r\n            var years = convertToArrayOfNumbers(this.yearValues, 'year');\r\n            if (this.min === undefined) {\r\n                this.min = Math.min.apply(Math, years).toString();\r\n            }\r\n            if (this.max === undefined) {\r\n                this.max = Math.max.apply(Math, years).toString();\r\n            }\r\n        }\r\n        else {\r\n            if (this.min === undefined) {\r\n                this.min = (todaysYear - 100).toString();\r\n            }\r\n            if (this.max === undefined) {\r\n                this.max = todaysYear.toString();\r\n            }\r\n        }\r\n        var min = this.datetimeMin = parseDate(this.min);\r\n        var max = this.datetimeMax = parseDate(this.max);\r\n        min.year = min.year || todaysYear;\r\n        max.year = max.year || todaysYear;\r\n        min.month = min.month || 1;\r\n        max.month = max.month || 12;\r\n        min.day = min.day || 1;\r\n        max.day = max.day || 31;\r\n        min.hour = min.hour || 0;\r\n        max.hour = max.hour === undefined ? 23 : max.hour;\r\n        min.minute = min.minute || 0;\r\n        max.minute = max.minute === undefined ? 59 : max.minute;\r\n        min.second = min.second || 0;\r\n        max.second = max.second === undefined ? 59 : max.second;\r\n        // Ensure min/max constraints\r\n        if (min.year > max.year) {\r\n            console.error('min.year > max.year');\r\n            min.year = max.year - 100;\r\n        }\r\n        if (min.year === max.year) {\r\n            if (min.month > max.month) {\r\n                console.error('min.month > max.month');\r\n                min.month = 1;\r\n            }\r\n            else if (min.month === max.month && min.day > max.day) {\r\n                console.error('min.day > max.day');\r\n                min.day = 1;\r\n            }\r\n        }\r\n    };\r\n    class_1.prototype.validateColumn = function (columns, name, index, min, max, lowerBounds, upperBounds) {\r\n        var column = columns.find(function (c) { return c.name === name; });\r\n        if (!column) {\r\n            return 0;\r\n        }\r\n        var lb = lowerBounds.slice();\r\n        var ub = upperBounds.slice();\r\n        var options = column.options;\r\n        var indexMin = options.length - 1;\r\n        var indexMax = 0;\r\n        for (var i = 0; i < options.length; i++) {\r\n            var opts = options[i];\r\n            var value = opts.value;\r\n            lb[index] = opts.value;\r\n            ub[index] = opts.value;\r\n            var disabled = opts.disabled = (value < lowerBounds[index] ||\r\n                value > upperBounds[index] ||\r\n                dateSortValue(ub[0], ub[1], ub[2], ub[3], ub[4]) < min ||\r\n                dateSortValue(lb[0], lb[1], lb[2], lb[3], lb[4]) > max);\r\n            if (!disabled) {\r\n                indexMin = Math.min(indexMin, i);\r\n                indexMax = Math.max(indexMax, i);\r\n            }\r\n        }\r\n        var selectedIndex = column.selectedIndex = clamp(indexMin, column.selectedIndex, indexMax);\r\n        var opt = column.options[selectedIndex];\r\n        if (opt) {\r\n            return opt.value;\r\n        }\r\n        return 0;\r\n    };\r\n    Object.defineProperty(class_1.prototype, \"text\", {\r\n        get: function () {\r\n            // create the text of the formatted data\r\n            var template = this.displayFormat || this.pickerFormat || DEFAULT_FORMAT;\r\n            if (this.value === undefined ||\r\n                this.value === null ||\r\n                this.value.length === 0) {\r\n                return;\r\n            }\r\n            return renderDatetime(template, this.datetimeValue, this.locale);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    class_1.prototype.hasValue = function () {\r\n        return this.text !== undefined;\r\n    };\r\n    class_1.prototype.setFocus = function () {\r\n        if (this.buttonEl) {\r\n            this.buttonEl.focus();\r\n        }\r\n    };\r\n    class_1.prototype.render = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var _b = this, inputId = _b.inputId, text = _b.text, disabled = _b.disabled, readonly = _b.readonly, isExpanded = _b.isExpanded, el = _b.el, placeholder = _b.placeholder;\r\n        var mode = getIonMode(this);\r\n        var labelId = inputId + '-lbl';\r\n        var label = findItemLabel(el);\r\n        var addPlaceholderClass = (text === undefined && placeholder != null) ? true : false;\r\n        // If selected text has been passed in, use that first\r\n        // otherwise use the placeholder\r\n        var datetimeText = text === undefined\r\n            ? (placeholder != null ? placeholder : '')\r\n            : text;\r\n        if (label) {\r\n            label.id = labelId;\r\n        }\r\n        renderHiddenInput(true, el, this.name, this.value, this.disabled);\r\n        return (h(Host, { onClick: this.onClick, role: \"combobox\", \"aria-disabled\": disabled ? 'true' : null, \"aria-expanded\": \"\" + isExpanded, \"aria-haspopup\": \"true\", \"aria-labelledby\": labelId, class: (_a = {},\r\n                _a[mode] = true,\r\n                _a['datetime-disabled'] = disabled,\r\n                _a['datetime-readonly'] = readonly,\r\n                _a['datetime-placeholder'] = addPlaceholderClass,\r\n                _a['in-item'] = hostContext('ion-item', el),\r\n                _a) }, h(\"div\", { class: \"datetime-text\" }, datetimeText), h(\"button\", { type: \"button\", onFocus: this.onFocus, onBlur: this.onBlur, disabled: this.disabled, ref: function (btnEl) { return _this.buttonEl = btnEl; } })));\r\n    };\r\n    Object.defineProperty(class_1.prototype, \"el\", {\r\n        get: function () { return getElement(this); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(class_1, \"watchers\", {\r\n        get: function () {\r\n            return {\r\n                \"disabled\": [\"disabledChanged\"],\r\n                \"value\": [\"valueChanged\"]\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(class_1, \"style\", {\r\n        get: function () { return \":host{padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;min-width:16px;min-height:1.2em;font-family:var(--ion-font-family,inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;z-index:2}\\@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static}:host(.datetime-placeholder){color:var(--placeholder-color)}:host(.datetime-disabled){opacity:.3;pointer-events:none}:host(.datetime-readonly){pointer-events:none}button{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none}:host-context([dir=rtl]) button,[dir=rtl] button{left:unset;right:unset;right:0}button::-moz-focus-inner{border:0}.datetime-text{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-ms-flex:1;flex:1;min-height:inherit;direction:ltr;overflow:inherit}:host-context([dir=rtl]) .datetime-text,[dir=rtl] .datetime-text{direction:rtl}:host{--placeholder-color:var(--ion-placeholder-color,var(--ion-color-step-400,#999));--padding-top:10px;--padding-end:0;--padding-bottom:11px;--padding-start:16px}\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return class_1;\r\n}());\r\nvar divyColumns = function (columns) {\r\n    var columnsWidth = [];\r\n    var col;\r\n    var width;\r\n    for (var i = 0; i < columns.length; i++) {\r\n        col = columns[i];\r\n        columnsWidth.push(0);\r\n        for (var _i = 0, _a = col.options; _i < _a.length; _i++) {\r\n            var option = _a[_i];\r\n            width = option.text.length;\r\n            if (width > columnsWidth[i]) {\r\n                columnsWidth[i] = width;\r\n            }\r\n        }\r\n    }\r\n    if (columnsWidth.length === 2) {\r\n        width = Math.max(columnsWidth[0], columnsWidth[1]);\r\n        columns[0].align = 'right';\r\n        columns[1].align = 'left';\r\n        columns[0].optionsWidth = columns[1].optionsWidth = width * 17 + \"px\";\r\n    }\r\n    else if (columnsWidth.length === 3) {\r\n        width = Math.max(columnsWidth[0], columnsWidth[2]);\r\n        columns[0].align = 'right';\r\n        columns[1].columnWidth = columnsWidth[1] * 17 + \"px\";\r\n        columns[0].optionsWidth = columns[2].optionsWidth = width * 17 + \"px\";\r\n        columns[2].align = 'left';\r\n    }\r\n    return columns;\r\n};\r\nvar DEFAULT_FORMAT = 'MMM D, YYYY';\r\nvar datetimeIds = 0;\r\nexport { Datetime as ion_datetime };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar hostContext = function (selector, el) {\r\n    return el.closest(selector) !== null;\r\n};\r\n/**\r\n * Create the mode and color classes for the component based on the classes passed in\r\n */\r\nvar createColorClasses = function (color) {\r\n    var _a;\r\n    return (typeof color === 'string' && color.length > 0) ? (_a = {\r\n            'ion-color': true\r\n        },\r\n        _a[\"ion-color-\" + color] = true,\r\n        _a) : undefined;\r\n};\r\nvar getClassList = function (classes) {\r\n    if (classes !== undefined) {\r\n        var array = Array.isArray(classes) ? classes : classes.split(' ');\r\n        return array\r\n            .filter(function (c) { return c != null; })\r\n            .map(function (c) { return c.trim(); })\r\n            .filter(function (c) { return c !== ''; });\r\n    }\r\n    return [];\r\n};\r\nvar getClassMap = function (classes) {\r\n    var map = {};\r\n    getClassList(classes).forEach(function (c) { return map[c] = true; });\r\n    return map;\r\n};\r\nvar SCHEME = /^[a-z][a-z0-9+\\-.]*:/;\r\nvar openURL = function (url, ev, direction) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var router;\r\n    return __generator(this, function (_a) {\r\n        if (url != null && url[0] !== '#' && !SCHEME.test(url)) {\r\n            router = document.querySelector('ion-router');\r\n            if (router) {\r\n                if (ev != null) {\r\n                    ev.preventDefault();\r\n                }\r\n                return [2 /*return*/, router.push(url, direction)];\r\n            }\r\n        }\r\n        return [2 /*return*/, false];\r\n    });\r\n}); };\r\nexport { createColorClasses as c, getClassMap as g, hostContext as h, openURL as o };\r\n","var __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n/**\r\n * Patched version of requestAnimationFrame that avoids ngzone\r\n * Use only when you know ngzone should not run\r\n */\r\nvar raf = function (h) {\r\n    if (typeof __zone_symbol__requestAnimationFrame === 'function') {\r\n        return __zone_symbol__requestAnimationFrame(h);\r\n    }\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        return requestAnimationFrame(h);\r\n    }\r\n    return setTimeout(h);\r\n};\r\nvar hasShadowDom = function (el) {\r\n    return !!el.shadowRoot && !!el.attachShadow;\r\n};\r\nvar findItemLabel = function (componentEl) {\r\n    var itemEl = componentEl.closest('ion-item');\r\n    if (itemEl) {\r\n        return itemEl.querySelector('ion-label');\r\n    }\r\n    return null;\r\n};\r\nvar renderHiddenInput = function (always, container, name, value, disabled) {\r\n    if (always || hasShadowDom(container)) {\r\n        var input = container.querySelector('input.aux-input');\r\n        if (!input) {\r\n            input = container.ownerDocument.createElement('input');\r\n            input.type = 'hidden';\r\n            input.classList.add('aux-input');\r\n            container.appendChild(input);\r\n        }\r\n        input.disabled = disabled;\r\n        input.name = name;\r\n        input.value = value || '';\r\n    }\r\n};\r\nvar clamp = function (min, n, max) {\r\n    return Math.max(min, Math.min(n, max));\r\n};\r\nvar assert = function (actual, reason) {\r\n    if (!actual) {\r\n        var message = 'ASSERT: ' + reason;\r\n        console.error(message);\r\n        debugger; // tslint:disable-line\r\n        throw new Error(message);\r\n    }\r\n};\r\nvar now = function (ev) {\r\n    return ev.timeStamp || Date.now();\r\n};\r\nvar pointerCoord = function (ev) {\r\n    // get X coordinates for either a mouse click\r\n    // or a touch depending on the given event\r\n    if (ev) {\r\n        var changedTouches = ev.changedTouches;\r\n        if (changedTouches && changedTouches.length > 0) {\r\n            var touch = changedTouches[0];\r\n            return { x: touch.clientX, y: touch.clientY };\r\n        }\r\n        if (ev.pageX !== undefined) {\r\n            return { x: ev.pageX, y: ev.pageY };\r\n        }\r\n    }\r\n    return { x: 0, y: 0 };\r\n};\r\n/**\r\n * @hidden\r\n * Given a side, return if it should be on the end\r\n * based on the value of dir\r\n * @param side the side\r\n * @param isRTL whether the application dir is rtl\r\n */\r\nvar isEndSide = function (side) {\r\n    var isRTL = document.dir === 'rtl';\r\n    switch (side) {\r\n        case 'start': return isRTL;\r\n        case 'end': return !isRTL;\r\n        default:\r\n            throw new Error(\"\\\"\" + side + \"\\\" is not a valid value for [side]. Use \\\"start\\\" or \\\"end\\\" instead.\");\r\n    }\r\n};\r\nvar debounceEvent = function (event, wait) {\r\n    var original = event._original || event;\r\n    return {\r\n        _original: event,\r\n        emit: debounce(original.emit.bind(original), wait)\r\n    };\r\n};\r\nvar debounce = function (func, wait) {\r\n    if (wait === void 0) { wait = 0; }\r\n    var timer;\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        clearTimeout(timer);\r\n        timer = setTimeout.apply(void 0, __spreadArrays([func, wait], args));\r\n    };\r\n};\r\nexport { renderHiddenInput as a, assert as b, clamp as c, debounceEvent as d, debounce as e, findItemLabel as f, hasShadowDom as h, isEndSide as i, now as n, pointerCoord as p, raf as r };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar startHardwareBackButton = function () {\r\n    var doc = document;\r\n    var busy = false;\r\n    doc.addEventListener('backbutton', function () {\r\n        if (busy) {\r\n            return;\r\n        }\r\n        var handlers = [];\r\n        var ev = new CustomEvent('ionBackButton', {\r\n            bubbles: false,\r\n            detail: {\r\n                register: function (priority, handler) {\r\n                    handlers.push({ priority: priority, handler: handler });\r\n                }\r\n            }\r\n        });\r\n        doc.dispatchEvent(ev);\r\n        if (handlers.length > 0) {\r\n            var selectedPriority_1 = Number.MIN_SAFE_INTEGER;\r\n            var selectedHandler_1;\r\n            handlers.forEach(function (_a) {\r\n                var priority = _a.priority, handler = _a.handler;\r\n                if (priority >= selectedPriority_1) {\r\n                    selectedPriority_1 = priority;\r\n                    selectedHandler_1 = handler;\r\n                }\r\n            });\r\n            busy = true;\r\n            executeAction(selectedHandler_1).then(function () { return busy = false; });\r\n        }\r\n    });\r\n};\r\nvar executeAction = function (handler) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, e_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 3, , 4]);\r\n                if (!handler) return [3 /*break*/, 2];\r\n                result = handler();\r\n                if (!(result != null)) return [3 /*break*/, 2];\r\n                return [4 /*yield*/, result];\r\n            case 1:\r\n                _a.sent();\r\n                _a.label = 2;\r\n            case 2: return [3 /*break*/, 4];\r\n            case 3:\r\n                e_1 = _a.sent();\r\n                console.error(e_1);\r\n                return [3 /*break*/, 4];\r\n            case 4: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar OVERLAY_BACK_BUTTON_PRIORITY = 100;\r\nvar MENU_BACK_BUTTON_PRIORITY = 99; // 1 less than overlay priority since menu is displayed behind overlays\r\nexport { MENU_BACK_BUTTON_PRIORITY, OVERLAY_BACK_BUTTON_PRIORITY, startHardwareBackButton };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { j as config } from './core-0428d3c8.js';\r\nimport { OVERLAY_BACK_BUTTON_PRIORITY } from './hardware-back-button-d00923be.js';\r\nvar lastId = 0;\r\nvar activeAnimations = new WeakMap();\r\nvar createController = function (tagName) {\r\n    return {\r\n        create: function (options) {\r\n            return createOverlay(tagName, options);\r\n        },\r\n        dismiss: function (data, role, id) {\r\n            return dismissOverlay(document, data, role, tagName, id);\r\n        },\r\n        getTop: function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2 /*return*/, getOverlay(document, tagName)];\r\n                });\r\n            });\r\n        }\r\n    };\r\n};\r\nvar alertController = /*@__PURE__*/ createController('ion-alert');\r\nvar actionSheetController = /*@__PURE__*/ createController('ion-action-sheet');\r\nvar pickerController = /*@__PURE__*/ createController('ion-picker');\r\nvar popoverController = /*@__PURE__*/ createController('ion-popover');\r\nvar prepareOverlay = function (el) {\r\n    var doc = document;\r\n    connectListeners(doc);\r\n    var overlayIndex = lastId++;\r\n    el.overlayIndex = overlayIndex;\r\n    if (!el.hasAttribute('id')) {\r\n        el.id = \"ion-overlay-\" + overlayIndex;\r\n    }\r\n};\r\nvar createOverlay = function (tagName, opts) {\r\n    return customElements.whenDefined(tagName).then(function () {\r\n        var doc = document;\r\n        var element = doc.createElement(tagName);\r\n        element.classList.add('overlay-hidden');\r\n        // convert the passed in overlay options into props\r\n        // that get passed down into the new overlay\r\n        Object.assign(element, opts);\r\n        // append the overlay element to the document body\r\n        getAppRoot(doc).appendChild(element);\r\n        return element.componentOnReady();\r\n    });\r\n};\r\nvar connectListeners = function (doc) {\r\n    if (lastId === 0) {\r\n        lastId = 1;\r\n        // trap focus inside overlays\r\n        doc.addEventListener('focusin', function (ev) {\r\n            var lastOverlay = getOverlay(doc);\r\n            if (lastOverlay && lastOverlay.backdropDismiss && !isDescendant(lastOverlay, ev.target)) {\r\n                var firstInput = lastOverlay.querySelector('input,button');\r\n                if (firstInput) {\r\n                    firstInput.focus();\r\n                }\r\n            }\r\n        });\r\n        // handle back-button click\r\n        doc.addEventListener('ionBackButton', function (ev) {\r\n            var lastOverlay = getOverlay(doc);\r\n            if (lastOverlay && lastOverlay.backdropDismiss) {\r\n                ev.detail.register(OVERLAY_BACK_BUTTON_PRIORITY, function () {\r\n                    return lastOverlay.dismiss(undefined, BACKDROP);\r\n                });\r\n            }\r\n        });\r\n        // handle ESC to close overlay\r\n        doc.addEventListener('keyup', function (ev) {\r\n            if (ev.key === 'Escape') {\r\n                var lastOverlay = getOverlay(doc);\r\n                if (lastOverlay && lastOverlay.backdropDismiss) {\r\n                    lastOverlay.dismiss(undefined, BACKDROP);\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nvar dismissOverlay = function (doc, data, role, overlayTag, id) {\r\n    var overlay = getOverlay(doc, overlayTag, id);\r\n    if (!overlay) {\r\n        return Promise.reject('overlay does not exist');\r\n    }\r\n    return overlay.dismiss(data, role);\r\n};\r\nvar getOverlays = function (doc, selector) {\r\n    if (selector === undefined) {\r\n        selector = 'ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast';\r\n    }\r\n    return Array.from(doc.querySelectorAll(selector))\r\n        .filter(function (c) { return c.overlayIndex > 0; });\r\n};\r\nvar getOverlay = function (doc, overlayTag, id) {\r\n    var overlays = getOverlays(doc, overlayTag);\r\n    return (id === undefined)\r\n        ? overlays[overlays.length - 1]\r\n        : overlays.find(function (o) { return o.id === id; });\r\n};\r\nvar present = function (overlay, name, iosEnterAnimation, mdEnterAnimation, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var animationBuilder, completed;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (overlay.presented) {\r\n                    return [2 /*return*/];\r\n                }\r\n                overlay.presented = true;\r\n                overlay.willPresent.emit();\r\n                animationBuilder = (overlay.enterAnimation)\r\n                    ? overlay.enterAnimation\r\n                    : config.get(name, overlay.mode === 'ios' ? iosEnterAnimation : mdEnterAnimation);\r\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\r\n            case 1:\r\n                completed = _a.sent();\r\n                if (completed) {\r\n                    overlay.didPresent.emit();\r\n                }\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar dismiss = function (overlay, data, role, name, iosLeaveAnimation, mdLeaveAnimation, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var animationBuilder, err_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (!overlay.presented) {\r\n                    return [2 /*return*/, false];\r\n                }\r\n                overlay.presented = false;\r\n                _a.label = 1;\r\n            case 1:\r\n                _a.trys.push([1, 4, , 5]);\r\n                overlay.willDismiss.emit({ data: data, role: role });\r\n                animationBuilder = (overlay.leaveAnimation)\r\n                    ? overlay.leaveAnimation\r\n                    : config.get(name, overlay.mode === 'ios' ? iosLeaveAnimation : mdLeaveAnimation);\r\n                if (!(role !== 'gesture')) return [3 /*break*/, 3];\r\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\r\n            case 2:\r\n                _a.sent();\r\n                _a.label = 3;\r\n            case 3:\r\n                overlay.didDismiss.emit({ data: data, role: role });\r\n                activeAnimations.delete(overlay);\r\n                return [3 /*break*/, 5];\r\n            case 4:\r\n                err_1 = _a.sent();\r\n                console.error(err_1);\r\n                return [3 /*break*/, 5];\r\n            case 5:\r\n                overlay.el.remove();\r\n                return [2 /*return*/, true];\r\n        }\r\n    });\r\n}); };\r\nvar getAppRoot = function (doc) {\r\n    return doc.querySelector('ion-app') || doc.body;\r\n};\r\nvar overlayAnimation = function (overlay, animationBuilder, baseEl, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var aniRoot, animation, activeAni;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                // Make overlay visible in case it's hidden\r\n                baseEl.classList.remove('overlay-hidden');\r\n                aniRoot = baseEl.shadowRoot || overlay.el;\r\n                animation = animationBuilder(aniRoot, opts);\r\n                if (!overlay.animated || !config.getBoolean('animated', true)) {\r\n                    animation.duration(0);\r\n                }\r\n                if (overlay.keyboardClose) {\r\n                    animation.beforeAddWrite(function () {\r\n                        var activeElement = baseEl.ownerDocument.activeElement;\r\n                        if (activeElement && activeElement.matches('input, ion-input, ion-textarea')) {\r\n                            activeElement.blur();\r\n                        }\r\n                    });\r\n                }\r\n                activeAni = activeAnimations.get(overlay) || [];\r\n                activeAnimations.set(overlay, __spreadArrays(activeAni, [animation]));\r\n                return [4 /*yield*/, animation.play()];\r\n            case 1:\r\n                _a.sent();\r\n                return [2 /*return*/, true];\r\n        }\r\n    });\r\n}); };\r\nvar eventMethod = function (element, eventName) {\r\n    var resolve;\r\n    var promise = new Promise(function (r) { return resolve = r; });\r\n    onceEvent(element, eventName, function (event) {\r\n        resolve(event.detail);\r\n    });\r\n    return promise;\r\n};\r\nvar onceEvent = function (element, eventName, callback) {\r\n    var handler = function (ev) {\r\n        element.removeEventListener(eventName, handler);\r\n        callback(ev);\r\n    };\r\n    element.addEventListener(eventName, handler);\r\n};\r\nvar isCancel = function (role) {\r\n    return role === 'cancel' || role === BACKDROP;\r\n};\r\nvar isDescendant = function (parent, child) {\r\n    while (child) {\r\n        if (child === parent) {\r\n            return true;\r\n        }\r\n        child = child.parentElement;\r\n    }\r\n    return false;\r\n};\r\nvar defaultGate = function (h) { return h(); };\r\nvar safeCall = function (handler, arg) {\r\n    if (typeof handler === 'function') {\r\n        var jmp = config.get('_zoneGate', defaultGate);\r\n        return jmp(function () {\r\n            try {\r\n                return handler(arg);\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n    }\r\n    return undefined;\r\n};\r\nvar BACKDROP = 'backdrop';\r\nexport { BACKDROP as B, present as a, pickerController as b, activeAnimations as c, dismiss as d, eventMethod as e, popoverController as f, actionSheetController as g, alertController as h, isCancel as i, prepareOverlay as p, safeCall as s };\r\n"],"sourceRoot":""}