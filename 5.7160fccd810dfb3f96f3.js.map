{"version":3,"sources":["webpack:///./node_modules/iiif-explorer/dist/esm-es5/ion-modal-ios.entry.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/theme-215399f6.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/hardware-back-button-d00923be.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/overlays-c3bbdd4c.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/index-d4adefd0.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/constants-7647fb9e.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/cubic-bezier-3e15f91c.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/framework-delegate-edc3d751.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/index-4b20f1e1.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","SwipeToCloseDefaults","computeDuration","remaining","velocity","Math","abs","iosEnterAnimation","baseEl","presentingEl","backdropAnimation","addElement","querySelector","fromTo","beforeStyles","afterClearStyles","wrapperAnimation","baseAnimation","easing","duration","beforeAddClass","addAnimation","transformOffset","CSS","supports","modalTransform","tagName","undefined","presentingElement","bodyEl_1","document","finalTransform","presentingAnimation","afterStyles","beforeAddWrite","style","setProperty","keyframes","offset","filter","transform","borderRadius","iosLeaveAnimation","bodyEl_2","currentPresentingScale","beforeClearStyles","onFinish","currentStep","Array","from","querySelectorAll","m","mdEnterAnimation","opacity","mdLeaveAnimation","wrapperEl","Modal","class_1","hostRef","_this","gestureAnimationDismissing","presented","mode","keyboardClose","backdropDismiss","showBackdrop","animated","swipeToClose","onBackdropTap","dismiss","onDismiss","ev","stopPropagation","preventDefault","onLifecycle","modalEvent","el","usersElement","name","LIFECYCLE_MAP","type","CustomEvent","bubbles","cancelable","detail","dispatchEvent","didPresent","willPresent","willDismiss","didDismiss","prototype","present","container","componentProps","_a","animationBuilder","ani","_b","Error","Object","assign","modal","delegate","component","leaveAnimation","get","animation","gesture","height","offsetHeight","isOpen","gestureName","gesturePriority","direction","threshold","canStart","target","event","closest","onStart","progressStart","onMove","deltaY","progressStep","onEnd","velocityY","shouldComplete","newStepValue","enable","progressEnd","data","role","enteringAnimation","dismissed","destroy","forEach","onDidDismiss","onWillDismiss","render","class","cssClass","zIndex","overlayIndex","onIonBackdropTap","onIonDismiss","onIonModalDidPresent","onIonModalWillPresent","onIonModalWillDismiss","onIonModalDidDismiss","visible","tappable","defineProperty","enumerable","configurable","hostContext","selector","createColorClasses","color","getClassMap","classes","map","isArray","split","c","trim","getClassList","SCHEME","openURL","url","router","test","startHardwareBackButton","doc","busy","addEventListener","handlers","register","priority","handler","selectedHandler_1","selectedPriority_1","Number","MIN_SAFE_INTEGER","executeAction","e_1","console","error","OVERLAY_BACK_BUTTON_PRIORITY","MENU_BACK_BUTTON_PRIORITY","__spreadArrays","s","i","il","arguments","r","k","a","j","jl","lastId","activeAnimations","WeakMap","createController","create","options","createOverlay","id","dismissOverlay","getTop","getOverlay","alertController","actionSheetController","pickerController","popoverController","prepareOverlay","connectListeners","hasAttribute","opts","customElements","whenDefined","element","createElement","classList","add","getAppRoot","appendChild","componentOnReady","lastOverlay","isDescendant","firstInput","focus","BACKDROP","key","overlayTag","overlay","overlays","getOverlays","find","o","emit","enterAnimation","overlayAnimation","err_1","delete","remove","aniRoot","activeAni","shadowRoot","getBoolean","activeElement","ownerDocument","matches","blur","set","play","eventMethod","eventName","promise","onceEvent","callback","removeEventListener","isCancel","parent","child","parentElement","defaultGate","h","safeCall","arg","jmp","_sPassive","GestureController","gestureId","requestedStart","Map","disabledGestures","disabledScroll","Set","createGesture","config","GestureDelegate","newID","disableScroll","createBlocker","BlockerDelegate","disable","start","capture","maxPriority","max","capturedId","clear","release","disableGesture","enableGesture","size","BACKDROP_NO_SCROLL","enableScroll","isDisabled","isCaptured","isScrollDisabled","disabled","ctrl","captured","block","_i","unblock","GESTURE_CONTROLLER","listenerOpts","supportsPassive","passive","node","getDocument","Document","hasCapturedPan","hasStartedPan","hasFiredStart","isMoveQueued","finalConfig","maxAngle","onWillStart","notCaptured","startX","startY","startTime","currentX","currentY","velocityX","deltaX","currentTime","pan","thresh","radians","PI","isDirX","maxCosine","cos","dirty","isPan","x","detect","distance","hypotenuse","sqrt","cosine","isGesture","getDirection","createPanRecognizer","fireOnMove","tryToCapturePan","fireOnStart","reset","pointerUp","tmpHasCaptured","tmpHasFiredStart","calcGestureData","pointerEvents","pointerDown","pointerMove","rmTouchStart","rmTouchMove","rmTouchEnd","rmTouchCancel","rmMouseStart","rmMouseMove","rmMouseUp","lastTouchEvent","handleTouchStart","Date","now","handleTouchEnd","handleMouseDown","handleMouseUp","stopTouch","stopMouse","stop","isEnabled","createPointerEvents","timeStamp","updateDetail","requestAnimationFrame","abortGesture","prevX","prevY","prevT","timeDelta","changedTouches","touch","clientX","clientY","pageX","pageY","LIFECYCLE_WILL_ENTER","LIFECYCLE_DID_ENTER","LIFECYCLE_WILL_LEAVE","LIFECYCLE_DID_LEAVE","LIFECYCLE_WILL_UNLOAD","getTimeGivenProgression","p0","p1","p2","p3","progression","solveCubicBezier","tValue","solveCubicParametricEquation","pow","refPoint","solveCubicEquation","root","b","d","discriminant","solveQuadraticEquation","p","q","phi","acos","attachComponent","cssClasses","attachViewToDom","HTMLElement","detachComponent","removeViewFromDom","transition","beforeTransition","runTransition","afterTransition","enteringEl","leavingEl","setZIndex","showGoBack","setPageHidden","getAnimationBuilder","noAnimation","iosTransitionAnimation","mdTransitionAnimation","trans","didComplete","waitForReady","fireWillEvents","playTransition","progressCallback","fireDidEvents","hasCompleted","defaultDeep","deep","promises","deepWait","deepReady","shallowReady","all","notifyViewReady","viewIsReady","lifecycle","children","hidden","setAttribute","removeAttribute","getIonPageElement","contains","ionPage"],"mappings":"gGAAA,uJAAIA,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGlEO,EAA4C,SAAUjB,EAASkB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIf,EAAG,MAAM,IAAIgB,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARa,EAAG,GAASd,EAAU,OAAIc,EAAG,GAAKd,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEe,KAAKhB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEe,KAAKhB,EAAGc,EAAG,KAAKpB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGa,EAAK,CAAS,EAARA,EAAG,GAAQb,EAAEb,QACzB0B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGb,EAAIa,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEhB,MAAO0B,EAAG,GAAIpB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIc,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAMhB,EAAIE,EAAEG,MAAML,EAAIA,EAAEiB,OAAS,GAAKjB,EAAEA,EAAEiB,OAAS,KAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcb,GAAMa,EAAG,GAAKb,EAAE,IAAMa,EAAG,GAAKb,EAAE,IAAM,CAAEE,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIa,EAAI,MAC7D,GAAIb,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIY,KAAKL,GAAK,MACvDb,EAAE,IAAIE,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKhB,EAAKkB,KAAKpC,EAASuB,GAC1B,MAAOZ,GAAKuB,EAAK,CAAC,EAAGvB,GAAIS,EAAI,EAAK,QAAUD,EAAIE,EAAI,EACtD,GAAY,EAARa,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1B,MAAO0B,EAAG,GAAKA,EAAG,QAAK,EAAQpB,MAAM,GArB9BL,CAAK,CAACuB,EAAGC,OAoCzDO,EACsB,IA0EtBC,EAAkB,SAAUC,EAAWC,GACvC,OAAO,YAAM,IAAKD,EAAYE,KAAKC,IAAe,IAAXF,GAAiB,MAKxDG,EAAoB,SAAUC,EAAQC,GAEtC,IAAIC,EAAoB,cACnBC,WAAWH,EAAOI,cAAc,iBAChCC,OAAO,UAAW,IAAM,2BACxBC,aAAa,CACd,iBAAkB,SAEjBC,iBAAiB,CAAC,mBACnBC,EAAmB,cAClBL,WAAWH,EAAOI,cAAc,mBAChCE,aAAa,CAAE,QAAW,IAC1BD,OAAO,YAAa,oBAAqB,mBAC1CI,EAAgB,cACfN,WAAWH,GACXU,OAAO,+BACPC,SAAS,KACTC,eAAe,cACfC,aAAa,CAACX,EAAmBM,IACtC,GAAIP,EAAc,CAMd,IAAIa,EAAoBC,IAAIC,SAAS,QAAS,iBAA6B,sCAAT,OAC9DC,EAA2C,cAAzBhB,EAAaiB,cAA8DC,IAAnClB,EAAamB,kBAAmC,QAAUN,EACpHO,EAAWC,SAASnD,KAEpBoD,EAAiB,cAAgBN,EAAiB,WAD9BxB,EAC+D,IACnF+B,EAAsB,cACrBlB,aAAa,CACd,UAAa,gBACb,mBAAoB,aACpB,SAAY,WAEXmB,YAAY,CACb,UAAaF,IAEZG,gBAAe,WAAc,OAAOL,EAASM,MAAMC,YAAY,mBAAoB,YACnFzB,WAAWF,GACX4B,UAAU,CACX,CAAEC,OAAQ,EAAGC,OAAQ,cAAeC,UAAW,2BAA4BC,aAAc,OACzF,CAAEH,OAAQ,EAAGC,OAAQ,iBAAkBC,UAAWT,EAAgBU,aAAc,mBAEpFxB,EAAcI,aAAaW,GAE/B,OAAOf,GAKPyB,EAAoB,SAAUlC,EAAQC,EAAcU,QACnC,IAAbA,IAAuBA,EAAW,KACtC,IAAIT,EAAoB,cACnBC,WAAWH,EAAOI,cAAc,iBAChCC,OAAO,UAAW,0BAA2B,GAC9CG,EAAmB,cAClBL,WAAWH,EAAOI,cAAc,mBAChCE,aAAa,CAAE,QAAW,IAC1BD,OAAO,YAAa,kBAAmB,qBACxCI,EAAgB,cACfN,WAAWH,GACXU,OAAO,+BACPC,SAASA,GACTE,aAAa,CAACX,EAAmBM,IACtC,GAAIP,EAAc,CACd,IAAIa,EAAoBC,IAAIC,SAAS,QAAS,iBAA6B,sCAAT,OAC9DC,EAA2C,cAAzBhB,EAAaiB,cAA8DC,IAAnClB,EAAamB,kBAAmC,QAAUN,EACpHqB,EAAWb,SAASnD,KACpBiE,EAAyB3C,EACzB+B,EAAsB,cACrBrB,WAAWF,GACXoC,kBAAkB,CAAC,cACnB9B,iBAAiB,CAAC,cAClB+B,UAAS,SAAUC,GAEA,IAAhBA,IAGJtC,EAAa0B,MAAMC,YAAY,WAAY,IAC3BY,MAAMC,KAAKN,EAASO,iBAAiB,cAAcX,QAAO,SAAUY,GAAK,YAA+BxB,IAAxBwB,EAAEvB,qBAAoC7B,QACrH,GACb4C,EAASR,MAAMC,YAAY,mBAAoB,QAGlDC,UAAU,CACX,CAAEC,OAAQ,EAAGC,OAAQ,iBAAkBC,UAAW,cAAgBf,EAAiB,WAAamB,EAAyB,IAAKH,aAAc,iBAC5I,CAAEH,OAAQ,EAAGC,OAAQ,cAAeC,UAAW,2BAA4BC,aAAc,SAE7FxB,EAAcI,aAAaW,GAE/B,OAAOf,GAKPmC,EAAmB,SAAU5C,GAC7B,IAAIS,EAAgB,cAChBP,EAAoB,cACpBM,EAAmB,cAcvB,OAbAN,EACKC,WAAWH,EAAOI,cAAc,iBAChCC,OAAO,UAAW,IAAM,2BACxBC,aAAa,CACd,iBAAkB,SAEjBC,iBAAiB,CAAC,mBACvBC,EACKL,WAAWH,EAAOI,cAAc,mBAChCyB,UAAU,CACX,CAAEC,OAAQ,EAAGe,QAAS,IAAMb,UAAW,oBACvC,CAAEF,OAAQ,EAAGe,QAAS,EAAGb,UAAW,qBAEjCvB,EACFN,WAAWH,GACXU,OAAO,kCACPC,SAAS,KACTC,eAAe,cACfC,aAAa,CAACX,EAAmBM,KAKtCsC,EAAmB,SAAU9C,GAC7B,IAAIS,EAAgB,cAChBP,EAAoB,cACpBM,EAAmB,cACnBuC,EAAY/C,EAAOI,cAAc,kBAUrC,OATAF,EACKC,WAAWH,EAAOI,cAAc,iBAChCC,OAAO,UAAW,0BAA2B,GAClDG,EACKL,WAAW4C,GACXlB,UAAU,CACX,CAAEC,OAAQ,EAAGe,QAAS,IAAMb,UAAW,mBACvC,CAAEF,OAAQ,EAAGe,QAAS,EAAGb,UAAW,sBAEjCvB,EACFN,WAAWH,GACXU,OAAO,oCACPC,SAAS,KACTE,aAAa,CAACX,EAAmBM,KAEtCwC,EAAuB,WACvB,SAASC,EAAQC,GACb,IAAIC,EAAQnE,KACZ,YAAiBA,KAAMkE,GAEvBlE,KAAKoE,4BAA6B,EAClCpE,KAAKqE,WAAY,EACjBrE,KAAKsE,KAAO,YAAWtE,MAIvBA,KAAKuE,eAAgB,EAIrBvE,KAAKwE,iBAAkB,EAIvBxE,KAAKyE,cAAe,EAIpBzE,KAAK0E,UAAW,EAIhB1E,KAAK2E,cAAe,EACpB3E,KAAK4E,cAAgB,WACjBT,EAAMU,aAAQ1C,EAAW,MAE7BnC,KAAK8E,UAAY,SAAUC,GACvBA,EAAGC,kBACHD,EAAGE,iBACHd,EAAMU,WAEV7E,KAAKkF,YAAc,SAAUC,GACzB,IAAIC,EAAKjB,EAAMkB,aACXC,EAAOC,EAAcJ,EAAWK,MACpC,GAAIJ,GAAME,EAAM,CACZ,IAAIP,EAAK,IAAIU,YAAYH,EAAM,CAC3BI,SAAS,EACTC,YAAY,EACZC,OAAQT,EAAWS,SAEvBR,EAAGS,cAAcd,KAGzB,YAAe/E,KAAKoF,IACpBpF,KAAK8F,WAAa,YAAY9F,KAAM,qBAAsB,GAC1DA,KAAK+F,YAAc,YAAY/F,KAAM,sBAAuB,GAC5DA,KAAKgG,YAAc,YAAYhG,KAAM,sBAAuB,GAC5DA,KAAKiG,WAAa,YAAYjG,KAAM,qBAAsB,GAiI9D,OA5HAiE,EAAQiC,UAAUC,QAAU,WACxB,OAAOnI,EAAUgC,UAAM,OAAQ,GAAQ,WACnC,IAAIoG,EAAWC,EAAgBC,EAAIhC,EAAMiC,EAAkBC,EACvDrC,EAAQnE,KACZ,OAAOd,EAAYc,MAAM,SAAUyG,GAC/B,OAAQA,EAAGhH,OACP,KAAK,EACD,GAAIO,KAAKqE,UACL,MAAO,CAAC,GAGZ,KADA+B,EAAYpG,KAAKoF,GAAGhE,cAAc,mBAE9B,MAAM,IAAIsF,MAAM,0BAIpB,OAFAL,EAAiBM,OAAOC,OAAOD,OAAOC,OAAO,GAAI5G,KAAKqG,gBAAiB,CAAEQ,MAAO7G,KAAKoF,KACrFkB,EAAKtG,KACE,CAAC,EAAa,YAAgBA,KAAK8G,SAAUV,EAAWpG,KAAK+G,UAAW,CAAC,YAAaV,IACjG,KAAK,EAED,OADAC,EAAGjB,aAAeoB,EAAG/G,OACd,CAAC,EAAa,YAAUM,KAAKqF,eACxC,KAAK,EAED,OADAoB,EAAG/G,OACI,CAAC,EAAa,YAAQM,KAAM,aAAce,EAAmB6C,EAAkB5D,KAAKoC,oBAC/F,KAAK,EAgCD,OA/BAqE,EAAG/G,OACH4E,EAAO,YAAWtE,MACdA,KAAK2E,cAAyB,QAATL,IACrBiC,EAAmBvG,KAAKgH,gBAAkB,IAAOC,IAAI,aAAc/D,GACnEsD,EAAMxG,KAAKkH,UAAYX,EAAiBvG,KAAKoF,GAAIpF,KAAKoC,mBACtDpC,KAAKmH,SApTS/B,EAoT2BpF,KAAKoF,GApT5B8B,EAoTgCV,EApTrB1B,EAoT0B,WAWnDX,EAAMC,4BAA6B,EACnCD,EAAM+C,UAAU5D,UAAS,WAAc,OAAOtF,EAAUmG,OAAO,OAAQ,GAAQ,WAC3E,OAAOjF,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAAG,MAAO,CAAC,EAAaO,KAAK6E,aAAQ1C,EAAW,YACrD,KAAK,EAGD,OAFAmE,EAAG5G,OACHM,KAAKoE,4BAA6B,EAC3B,CAAC,cAtUhDgD,EAAShC,EAAGiC,aACZC,GAAS,EAyDTH,EAAU,wBAAc,CACxB/B,GAAIA,EACJmC,YAAa,oBACbC,gBAAiB,GACjBC,UAAW,IACXC,UAAW,GACXC,SA9DW,SAAU/B,GACrB,IAAIgC,EAAShC,EAAOiC,MAAMD,OAC1B,OAAe,OAAXA,IACCA,EAAOE,SAII,OADFF,EAAOE,QAAQ,gBAyD7BC,QAhDU,WACVb,EAAUc,eAAc,EAAM,EAAW,EAAI,IAgD7CC,OA9CS,SAAUrC,GACnB,IAAIlH,EAAOkH,EAAOsC,OAASd,EACvB1I,EAAO,GAGXwI,EAAUiB,aAAazJ,IA0CvB0J,MAxCQ,SAAUxC,GAClB,IAAIhF,EAAWgF,EAAOyC,UAClB3J,EAAOkH,EAAOsC,OAASd,EAC3B,KAAI1I,EAAO,GAAX,CAGA,IACI4J,GADa1C,EAAOsC,OAAoB,IAAXtH,GAAmBwG,GAClB,GAC9BmB,EAAe,GAAoB,KAAQ,KAC1CD,GAKDpB,EAAUxF,OAAO,kCACjB6G,GAAgB,YAAwB,CAAC,EAAG,GAAI,CAAC,IAAM,KAAO,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI7J,GAAM,KALpFwI,EAAUxF,OAAO,kCACjB6G,GAAgB,YAAwB,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,IAAM,KAAO,CAAC,EAAG,GAAI7J,GAAM,IAMxF,IAAIiD,EAA8BjB,EAAnB,EAAmChC,EAAO0I,GAAqC,EAAI1I,GAAQ0I,EAAzCxG,GACjE0G,EAASgB,EACTnB,EAAQqB,QAAO,GACftB,EACK5D,UAAS,WACLgF,GACDnB,EAAQqB,QAAO,MAGlBC,YAAY,EAAmB,EAAI,EAAGF,EAAc5G,GACrD2G,GACAxD,SAoRgB9E,KAAKmH,QAAQqB,QAAO,IAEjB,CAAC,GA9UA,IAAUpD,EAAI8B,EAAWpC,EACjDsC,EACAE,EAyDAH,SA8RJlD,EAAQiC,UAAUrB,QAAU,SAAU6D,EAAMC,GACxC,OAAO3K,EAAUgC,UAAM,OAAQ,GAAQ,WACnC,IAAI4I,EAAmBC,EACvB,OAAO3J,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EACD,OAAIO,KAAKoE,4BAAuC,YAATuE,EAC5B,CAAC,GAAc,IAE1BC,EAAoB,IAAiB3B,IAAIjH,OAAS,GAC3C,CAAC,EAAa,YAAQA,KAAM0I,EAAMC,EAAM,aAAczF,EAAmBY,EAAkB9D,KAAKoC,qBAC3G,KAAK,EAED,OADAyG,EAAYvC,EAAG5G,QAER,CAAC,EAAa,YAAgBM,KAAK8G,SAAU9G,KAAKqF,eADlC,CAAC,EAAa,GAEzC,KAAK,EACDiB,EAAG5G,OACCM,KAAKkH,WACLlH,KAAKkH,UAAU4B,UAEnBF,EAAkBG,SAAQ,SAAUvC,GAAO,OAAOA,EAAIsC,aACtDxC,EAAG7G,MAAQ,EACf,KAAK,EAED,OADAO,KAAKkH,eAAY/E,EACV,CAAC,EAAc0G,WAQ1C5E,EAAQiC,UAAU8C,aAAe,WAC7B,OAAO,YAAYhJ,KAAKoF,GAAI,uBAKhCnB,EAAQiC,UAAU+C,cAAgB,WAC9B,OAAO,YAAYjJ,KAAKoF,GAAI,wBAEhCnB,EAAQiC,UAAUgD,OAAS,WACvB,IAAI5C,EACAhC,EAAO,YAAWtE,MACtB,OAAQ,WAAD,CAAG,IAAM,CAAE,aAAa,EAAM,aAAc,OAAQmJ,MAAOxC,OAAOC,QAAQN,EAAK,GAAIA,EAAGhC,IAAQ,EAAMgC,EAAG,mBAA2CnE,IAA3BnC,KAAKoC,mBAA4C,QAATkC,EAAgBgC,GAAK,YAAYtG,KAAKoJ,WAAYzG,MAAO,CACvN0G,OAAQ,IAAM,IAAQrJ,KAAKsJ,eAC5BC,iBAAkBvJ,KAAK4E,cAAe4E,aAAcxJ,KAAK8E,UAAW2E,qBAAsBzJ,KAAKkF,YAAawE,sBAAuB1J,KAAKkF,YAAayE,sBAAuB3J,KAAKkF,YAAa0E,qBAAsB5J,KAAKkF,aAAe,YAAE,eAAgB,CAAE2E,QAAS7J,KAAKyE,aAAcqF,SAAU9J,KAAKwE,kBAAoB,YAAE,MAAO,CAAEmE,KAAM,SAAUQ,MAAO,oBAExWxC,OAAOoD,eAAe9F,EAAQiC,UAAW,KAAM,CAC3Ce,IAAK,WAAc,OAAO,YAAWjH,OACrCgK,YAAY,EACZC,cAAc,IAElBtD,OAAOoD,eAAe9F,EAAS,QAAS,CACpCgD,IAAK,WAAc,MAAO,g6EAC1B+C,YAAY,EACZC,cAAc,IAEXhG,EArLe,GAuLtBsB,EAAgB,CAChB,mBAAsB,kBACtB,oBAAuB,mBACvB,oBAAuB,mBACvB,mBAAsB,oB,iCC5c1B,4IAAIvH,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGlEO,EAA4C,SAAUjB,EAASkB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIf,EAAG,MAAM,IAAIgB,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARa,EAAG,GAASd,EAAU,OAAIc,EAAG,GAAKd,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEe,KAAKhB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEe,KAAKhB,EAAGc,EAAG,KAAKpB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGa,EAAK,CAAS,EAARA,EAAG,GAAQb,EAAEb,QACzB0B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGb,EAAIa,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEhB,MAAO0B,EAAG,GAAIpB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIc,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAMhB,EAAIE,EAAEG,MAAML,EAAIA,EAAEiB,OAAS,GAAKjB,EAAEA,EAAEiB,OAAS,KAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcb,GAAMa,EAAG,GAAKb,EAAE,IAAMa,EAAG,GAAKb,EAAE,IAAM,CAAEE,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIa,EAAI,MAC7D,GAAIb,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIY,KAAKL,GAAK,MACvDb,EAAE,IAAIE,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKhB,EAAKkB,KAAKpC,EAASuB,GAC1B,MAAOZ,GAAKuB,EAAK,CAAC,EAAGvB,GAAIS,EAAI,EAAK,QAAUD,EAAIE,EAAI,EACtD,GAAY,EAARa,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1B,MAAO0B,EAAG,GAAKA,EAAG,QAAK,EAAQpB,MAAM,GArB9BL,CAAK,CAACuB,EAAGC,OAwBzDgK,EAAc,SAAUC,EAAU/E,GAClC,OAAgC,OAAzBA,EAAG0C,QAAQqC,IAKlBC,EAAqB,SAAUC,GAC/B,IAAI/D,EACJ,MAAyB,iBAAV+D,GAAsBA,EAAM9J,OAAS,IAAM+F,EAAK,CACvD,aAAa,IAEd,aAAe+D,IAAS,EAC3B/D,QAAMnE,GAYVmI,EAAc,SAAUC,GACxB,IAAIC,EAAM,GAEV,OAbe,SAAUD,GACzB,YAAgBpI,IAAZoI,GACY/G,MAAMiH,QAAQF,GAAWA,EAAUA,EAAQG,MAAM,MAExD3H,QAAO,SAAU4H,GAAK,OAAY,MAALA,KAC7BH,KAAI,SAAUG,GAAK,OAAOA,EAAEC,UAC5B7H,QAAO,SAAU4H,GAAK,MAAa,KAANA,KAE/B,GAIPE,CAAaN,GAASxB,SAAQ,SAAU4B,GAAK,OAAOH,EAAIG,IAAK,KACtDH,GAEPM,EAAS,uBACTC,EAAU,SAAUC,EAAKjG,EAAI0C,GAAa,OAAOzJ,OAAU,OAAQ,OAAQ,GAAQ,WACnF,IAAIiN,EACJ,OAAO/L,EAAYc,MAAM,SAAUsG,GAC/B,OAAW,MAAP0E,GAA0B,MAAXA,EAAI,KAAeF,EAAOI,KAAKF,KAC9CC,EAAS3I,SAASlB,cAAc,gBAElB,MAAN2D,GACAA,EAAGE,iBAEA,CAAC,EAAcgG,EAAOzK,KAAKwK,EAAKvD,KAGxC,CAAC,GAAc,W,iCC9E9B,0LAAIzJ,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGlEO,EAA4C,SAAUjB,EAASkB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIf,EAAG,MAAM,IAAIgB,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARa,EAAG,GAASd,EAAU,OAAIc,EAAG,GAAKd,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEe,KAAKhB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEe,KAAKhB,EAAGc,EAAG,KAAKpB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGa,EAAK,CAAS,EAARA,EAAG,GAAQb,EAAEb,QACzB0B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGb,EAAIa,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEhB,MAAO0B,EAAG,GAAIpB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIc,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAMhB,EAAIE,EAAEG,MAAML,EAAIA,EAAEiB,OAAS,GAAKjB,EAAEA,EAAEiB,OAAS,KAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcb,GAAMa,EAAG,GAAKb,EAAE,IAAMa,EAAG,GAAKb,EAAE,IAAM,CAAEE,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIa,EAAI,MAC7D,GAAIb,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIY,KAAKL,GAAK,MACvDb,EAAE,IAAIE,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKhB,EAAKkB,KAAKpC,EAASuB,GAC1B,MAAOZ,GAAKuB,EAAK,CAAC,EAAGvB,GAAIS,EAAI,EAAK,QAAUD,EAAIE,EAAI,EACtD,GAAY,EAARa,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1B,MAAO0B,EAAG,GAAKA,EAAG,QAAK,EAAQpB,MAAM,GArB9BL,CAAK,CAACuB,EAAGC,OAwBzDiL,EAA0B,WAC1B,IAAIC,EAAM9I,SACN+I,GAAO,EACXD,EAAIE,iBAAiB,cAAc,WAC/B,IAAID,EAAJ,CAGA,IAAIE,EAAW,GACXxG,EAAK,IAAIU,YAAY,gBAAiB,CACtCC,SAAS,EACTE,OAAQ,CACJ4F,SAAU,SAAUC,EAAUC,GAC1BH,EAAS/K,KAAK,CAAEiL,SAAUA,EAAUC,QAASA,QAKzD,GADAN,EAAIvF,cAAcd,GACdwG,EAAShL,OAAS,EAAG,CACrB,IACIoL,EADAC,EAAqBC,OAAOC,iBAEhCP,EAASxC,SAAQ,SAAUzC,GACvB,IAAImF,EAAWnF,EAAGmF,SAAUC,EAAUpF,EAAGoF,QACrCD,GAAYG,IACZA,EAAqBH,EACrBE,EAAoBD,MAG5BL,GAAO,EACPU,EAAcJ,GAAmB3M,MAAK,WAAc,OAAOqM,GAAO,WAI1EU,EAAgB,SAAUL,GAAW,OAAO1N,OAAU,OAAQ,OAAQ,GAAQ,WAC9E,IAAIc,EAAQkN,EACZ,OAAO9M,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAED,OADA6G,EAAG3G,KAAKa,KAAK,CAAC,EAAG,EAAG,CAAE,IACjBkL,EAEW,OADhB5M,EAAS4M,KACqB,CAAC,EAAa,GACrC,CAAC,EAAa5M,GAHA,CAAC,EAAa,GAIvC,KAAK,EACDwH,EAAG5G,OACH4G,EAAG7G,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAuM,EAAM1F,EAAG5G,OACTuM,QAAQC,MAAMF,GACP,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,WAIxBG,EAA+B,IAC/BC,EAA4B,I,iCC3FhC,6aAAIpO,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGlEO,EAA4C,SAAUjB,EAASkB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIf,EAAG,MAAM,IAAIgB,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARa,EAAG,GAASd,EAAU,OAAIc,EAAG,GAAKd,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEe,KAAKhB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEe,KAAKhB,EAAGc,EAAG,KAAKpB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGa,EAAK,CAAS,EAARA,EAAG,GAAQb,EAAEb,QACzB0B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGb,EAAIa,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEhB,MAAO0B,EAAG,GAAIpB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIc,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAMhB,EAAIE,EAAEG,MAAML,EAAIA,EAAEiB,OAAS,GAAKjB,EAAEA,EAAEiB,OAAS,KAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcb,GAAMa,EAAG,GAAKb,EAAE,IAAMa,EAAG,GAAKb,EAAE,IAAM,CAAEE,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIa,EAAI,MAC7D,GAAIb,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIY,KAAKL,GAAK,MACvDb,EAAE,IAAIE,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKhB,EAAKkB,KAAKpC,EAASuB,GAC1B,MAAOZ,GAAKuB,EAAK,CAAC,EAAGvB,GAAIS,EAAI,EAAK,QAAUD,EAAIE,EAAI,EACtD,GAAY,EAARa,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1B,MAAO0B,EAAG,GAAKA,EAAG,QAAK,EAAQpB,MAAM,GArB9BL,CAAK,CAACuB,EAAGC,OAwBzDmM,EAAkD,WAClD,IAAK,IAAIC,EAAI,EAAGC,EAAI,EAAGC,EAAKC,UAAUlM,OAAQgM,EAAIC,EAAID,IAAKD,GAAKG,UAAUF,GAAGhM,OACxE,IAAImM,EAAIlJ,MAAM8I,GAAIK,EAAI,EAA3B,IAA8BJ,EAAI,EAAGA,EAAIC,EAAID,IACzC,IAAK,IAAIK,EAAIH,UAAUF,GAAIM,EAAI,EAAGC,EAAKF,EAAErM,OAAQsM,EAAIC,EAAID,IAAKF,IAC1DD,EAAEC,GAAKC,EAAEC,GACjB,OAAOH,GAIPK,EAAS,EACTC,EAAmB,IAAIC,QACvBC,EAAmB,SAAUhL,GAC7B,MAAO,CACHiL,OAAQ,SAAUC,GACd,OAAOC,EAAcnL,EAASkL,IAElCvI,QAAS,SAAU6D,EAAMC,EAAM2E,GAC3B,OAAOC,EAAejL,SAAUoG,EAAMC,EAAMzG,EAASoL,IAEzDE,OAAQ,WACJ,OAAOxP,EAAUgC,UAAM,OAAQ,GAAQ,WACnC,OAAOd,EAAYc,MAAM,SAAUsG,GAC/B,MAAO,CAAC,EAAcmH,EAAWnL,SAAUJ,aAM3DwL,EAAgCR,EAAiB,aACjDS,EAAsCT,EAAiB,oBACvDU,EAAiCV,EAAiB,cAClDW,EAAkCX,EAAiB,eACnDY,EAAiB,SAAU1I,GAC3B,IAAIgG,EAAM9I,SACVyL,EAAiB3C,GACjB,IAAI9B,EAAeyD,IACnB3H,EAAGkE,aAAeA,EACblE,EAAG4I,aAAa,QACjB5I,EAAGkI,GAAK,eAAiBhE,IAG7B+D,EAAgB,SAAUnL,EAAS+L,GACnC,OAAOC,eAAeC,YAAYjM,GAASlD,MAAK,WAC5C,IAAIoM,EAAM9I,SACN8L,EAAUhD,EAAIiD,cAAcnM,GAOhC,OANAkM,EAAQE,UAAUC,IAAI,kBAGtB5H,OAAOC,OAAOwH,EAASH,GAEvBO,EAAWpD,GAAKqD,YAAYL,GACrBA,EAAQM,uBAGnBX,EAAmB,SAAU3C,GACd,IAAX2B,IACAA,EAAS,EAET3B,EAAIE,iBAAiB,WAAW,SAAUvG,GACtC,IAAI4J,EAAclB,EAAWrC,GAC7B,GAAIuD,GAAeA,EAAYnK,kBAAoBoK,EAAaD,EAAa5J,EAAG6C,QAAS,CACrF,IAAIiH,EAAaF,EAAYvN,cAAc,gBACvCyN,GACAA,EAAWC,YAKvB1D,EAAIE,iBAAiB,iBAAiB,SAAUvG,GAC5C,IAAI4J,EAAclB,EAAWrC,GACzBuD,GAAeA,EAAYnK,iBAC3BO,EAAGa,OAAO4F,SAAS,gCAA8B,WAC7C,OAAOmD,EAAY9J,aAAQ1C,EAAW4M,SAKlD3D,EAAIE,iBAAiB,SAAS,SAAUvG,GACpC,GAAe,WAAXA,EAAGiK,IAAkB,CACrB,IAAIL,EAAclB,EAAWrC,GACzBuD,GAAeA,EAAYnK,iBAC3BmK,EAAY9J,aAAQ1C,EAAW4M,SAM/CxB,EAAiB,SAAUnC,EAAK1C,EAAMC,EAAMsG,EAAY3B,GACxD,IAAI4B,EAAUzB,EAAWrC,EAAK6D,EAAY3B,GAC1C,OAAK4B,EAGEA,EAAQrK,QAAQ6D,EAAMC,GAFlBtK,QAAQE,OAAO,2BAW1BkP,EAAa,SAAUrC,EAAK6D,EAAY3B,GACxC,IAAI6B,EARU,SAAU/D,EAAKjB,GAI7B,YAHiBhI,IAAbgI,IACAA,EAAW,qFAER3G,MAAMC,KAAK2H,EAAI1H,iBAAiByG,IAClCpH,QAAO,SAAU4H,GAAK,OAAOA,EAAErB,aAAe,KAGpC8F,CAAYhE,EAAK6D,GAChC,YAAe9M,IAAPmL,EACF6B,EAASA,EAAS5O,OAAS,GAC3B4O,EAASE,MAAK,SAAUC,GAAK,OAAOA,EAAEhC,KAAOA,MAEnDnH,EAAU,SAAU+I,EAAS5J,EAAMvE,EAAmB6C,EAAkBqK,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WACzH,IAAIuI,EACJ,OAAOrH,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EACD,OAAIyP,EAAQ7K,UACD,CAAC,IAEZ6K,EAAQ7K,WAAY,EACpB6K,EAAQnJ,YAAYwJ,OACpBhJ,EAAoB2I,EAAsB,eACpCA,EAAQM,eACR,IAAOvI,IAAI3B,EAAuB,QAAjB4J,EAAQ5K,KAAiBvD,EAAoB6C,GAC7D,CAAC,EAAa6L,EAAiBP,EAAS3I,EAAkB2I,EAAQ9J,GAAI6I,KACjF,KAAK,EAKD,OAJY3H,EAAG5G,QAEXwP,EAAQpJ,WAAWyJ,OAEhB,CAAC,WAIpB1K,EAAU,SAAUqK,EAASxG,EAAMC,EAAMrD,EAAMpC,EAAmBY,EAAkBmK,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WACrI,IAAIuI,EAAkBmJ,EACtB,OAAOxQ,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EACD,IAAKyP,EAAQ7K,UACT,MAAO,CAAC,GAAc,GAE1B6K,EAAQ7K,WAAY,EACpBiC,EAAG7G,MAAQ,EACf,KAAK,EAMD,OALA6G,EAAG3G,KAAKa,KAAK,CAAC,EAAG,EAAG,CAAE,IACtB0O,EAAQlJ,YAAYuJ,KAAK,CAAE7G,KAAMA,EAAMC,KAAMA,IAC7CpC,EAAoB2I,EAAsB,eACpCA,EAAQlI,eACR,IAAOC,IAAI3B,EAAuB,QAAjB4J,EAAQ5K,KAAiBpB,EAAoBY,GACrD,YAAT6E,EAA4B,CAAC,EAAa,GACzC,CAAC,EAAa8G,EAAiBP,EAAS3I,EAAkB2I,EAAQ9J,GAAI6I,IACjF,KAAK,EACD3H,EAAG5G,OACH4G,EAAG7G,MAAQ,EACf,KAAK,EAGD,OAFAyP,EAAQjJ,WAAWsJ,KAAK,CAAE7G,KAAMA,EAAMC,KAAMA,IAC5CqE,EAAiB2C,OAAOT,GACjB,CAAC,EAAa,GACzB,KAAK,EAGD,OAFAQ,EAAQpJ,EAAG5G,OACXuM,QAAQC,MAAMwD,GACP,CAAC,EAAa,GACzB,KAAK,EAED,OADAR,EAAQ9J,GAAGwK,SACJ,CAAC,GAAc,WAIlCpB,EAAa,SAAUpD,GACvB,OAAOA,EAAIhK,cAAc,YAAcgK,EAAIjM,MAE3CsQ,EAAmB,SAAUP,EAAS3I,EAAkBvF,EAAQiN,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WACjH,IAAI6R,EAAS3I,EAAW4I,EACxB,OAAO5Q,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAkBD,OAhBAuB,EAAOsN,UAAUsB,OAAO,kBACxBC,EAAU7O,EAAO+O,YAAcb,EAAQ9J,GACvC8B,EAAYX,EAAiBsJ,EAAS5B,GACjCiB,EAAQxK,UAAa,IAAOsL,WAAW,YAAY,IACpD9I,EAAUvF,SAAS,GAEnBuN,EAAQ3K,eACR2C,EAAUxE,gBAAe,WACrB,IAAIuN,EAAgBjP,EAAOkP,cAAcD,cACrCA,GAAiBA,EAAcE,QAAQ,mCACvCF,EAAcG,UAI1BN,EAAY9C,EAAiB/F,IAAIiI,IAAY,GAC7ClC,EAAiBqD,IAAInB,EAAS7C,EAAeyD,EAAW,CAAC5I,KAClD,CAAC,EAAaA,EAAUoJ,QACnC,KAAK,EAED,OADAhK,EAAG5G,OACI,CAAC,GAAc,WAIlC6Q,EAAc,SAAUnC,EAASoC,GACjC,IAAIlS,EACAmS,EAAU,IAAIpS,SAAQ,SAAUqO,GAAK,OAAOpO,EAAUoO,KAI1D,OAHAgE,EAAUtC,EAASoC,GAAW,SAAU3I,GACpCvJ,EAAQuJ,EAAMjC,WAEX6K,GAEPC,EAAY,SAAUtC,EAASoC,EAAWG,GAC1C,IAAIjF,EAAU,SAAU3G,GACpBqJ,EAAQwC,oBAAoBJ,EAAW9E,GACvCiF,EAAS5L,IAEbqJ,EAAQ9C,iBAAiBkF,EAAW9E,IAEpCmF,EAAW,SAAUlI,GACrB,MAAgB,WAATA,GAAqBA,IAASoG,GAErCH,EAAe,SAAUkC,EAAQC,GACjC,KAAOA,GAAO,CACV,GAAIA,IAAUD,EACV,OAAO,EAEXC,EAAQA,EAAMC,cAElB,OAAO,GAEPC,EAAc,SAAUC,GAAK,OAAOA,KACpCC,EAAW,SAAUzF,EAAS0F,GAC9B,GAAuB,mBAAZ1F,EAEP,OADU,IAAOzE,IAAI,YAAagK,EAC3BI,EAAI,WACP,IACI,OAAO3F,EAAQ0F,GAEnB,MAAOxS,GACHqN,QAAQC,MAAMtN,QAM1BmQ,EAAW,Y,iCCnRf,4GAyOIuC,EAzOAC,EAAmC,WACnC,SAASA,IACLvR,KAAKwR,UAAY,EACjBxR,KAAKyR,eAAiB,IAAIC,IAC1B1R,KAAK2R,iBAAmB,IAAID,IAC5B1R,KAAK4R,eAAiB,IAAIC,IAqG9B,OAhGAN,EAAkBrL,UAAU4L,cAAgB,SAAUC,GAClD,OAAO,IAAIC,EAAgBhS,KAAMA,KAAKiS,QAASF,EAAOzM,KAAMyM,EAAOtG,UAAY,IAAKsG,EAAOG,gBAK/FX,EAAkBrL,UAAUiM,cAAgB,SAAUlE,GAElD,YADa,IAATA,IAAmBA,EAAO,IACvB,IAAImE,EAAgBpS,KAAMA,KAAKiS,QAAShE,EAAKoE,UAAWpE,EAAKiE,gBAExEX,EAAkBrL,UAAUoM,MAAQ,SAAU/K,EAAa+F,EAAI7B,GAC3D,OAAKzL,KAAK2H,SAASJ,IAInBvH,KAAKyR,eAAepB,IAAI/C,EAAI7B,IACrB,IAJHzL,KAAKyR,eAAe9B,OAAOrC,IACpB,IAKfiE,EAAkBrL,UAAUqM,QAAU,SAAUhL,EAAa+F,EAAI7B,GAC7D,IAAKzL,KAAKsS,MAAM/K,EAAa+F,EAAI7B,GAC7B,OAAO,EAEX,IAAIgG,EAAiBzR,KAAKyR,eACtBe,GAAe,IAInB,GAHAf,EAAe1I,SAAQ,SAAUtK,GAC7B+T,EAAc3R,KAAK4R,IAAID,EAAa/T,MAEpC+T,IAAgB/G,EAAU,CAC1BzL,KAAK0S,WAAapF,EAClBmE,EAAekB,QACf,IAAI9K,EAAQ,IAAIpC,YAAY,qBAAsB,CAAEG,OAAQ,CAAE2B,YAAaA,KAE3E,OADAjF,SAASuD,cAAcgC,IAChB,EAGX,OADA4J,EAAe9B,OAAOrC,IACf,GAEXiE,EAAkBrL,UAAU0M,QAAU,SAAUtF,GAC5CtN,KAAKyR,eAAe9B,OAAOrC,GACvBtN,KAAK0S,aAAepF,IACpBtN,KAAK0S,gBAAavQ,IAG1BoP,EAAkBrL,UAAU2M,eAAiB,SAAUtL,EAAa+F,GAChE,IAAI+C,EAAMrQ,KAAK2R,iBAAiB1K,IAAIM,QACxBpF,IAARkO,IACAA,EAAM,IAAIwB,IACV7R,KAAK2R,iBAAiBtB,IAAI9I,EAAa8I,IAE3CA,EAAI9B,IAAIjB,IAEZiE,EAAkBrL,UAAU4M,cAAgB,SAAUvL,EAAa+F,GAC/D,IAAI+C,EAAMrQ,KAAK2R,iBAAiB1K,IAAIM,QACxBpF,IAARkO,GACAA,EAAIV,OAAOrC,IAGnBiE,EAAkBrL,UAAUgM,cAAgB,SAAU5E,GAClDtN,KAAK4R,eAAerD,IAAIjB,GACS,IAA7BtN,KAAK4R,eAAemB,MACpBzQ,SAASnD,KAAKmP,UAAUC,IAAIyE,IAGpCzB,EAAkBrL,UAAU+M,aAAe,SAAU3F,GACjDtN,KAAK4R,eAAejC,OAAOrC,GACM,IAA7BtN,KAAK4R,eAAemB,MACpBzQ,SAASnD,KAAKmP,UAAUsB,OAAOoD,IAGvCzB,EAAkBrL,UAAUyB,SAAW,SAAUJ,GAC7C,YAAwBpF,IAApBnC,KAAK0S,aAIL1S,KAAKkT,WAAW3L,IAKxBgK,EAAkBrL,UAAUiN,WAAa,WACrC,YAA2BhR,IAApBnC,KAAK0S,YAEhBnB,EAAkBrL,UAAUkN,iBAAmB,WAC3C,OAAOpT,KAAK4R,eAAemB,KAAO,GAEtCxB,EAAkBrL,UAAUgN,WAAa,SAAU3L,GAC/C,IAAI8L,EAAWrT,KAAK2R,iBAAiB1K,IAAIM,GACzC,SAAI8L,GAAYA,EAASN,KAAO,IAKpCxB,EAAkBrL,UAAU+L,MAAQ,WAEhC,OADAjS,KAAKwR,YACExR,KAAKwR,WAETD,EA1G2B,GA4GlCS,EAAiC,WACjC,SAASA,EAAgBsB,EAAMhG,EAAIhI,EAAMmG,EAAUyG,GAC/ClS,KAAKsN,GAAKA,EACVtN,KAAKsF,KAAOA,EACZtF,KAAKkS,cAAgBA,EACrBlS,KAAKyL,SAAsB,IAAXA,EAAqB6B,EACrCtN,KAAKsT,KAAOA,EAoChB,OAlCAtB,EAAgB9L,UAAUyB,SAAW,WACjC,QAAK3H,KAAKsT,MAGHtT,KAAKsT,KAAK3L,SAAS3H,KAAKsF,OAEnC0M,EAAgB9L,UAAUoM,MAAQ,WAC9B,QAAKtS,KAAKsT,MAGHtT,KAAKsT,KAAKhB,MAAMtS,KAAKsF,KAAMtF,KAAKsN,GAAItN,KAAKyL,WAEpDuG,EAAgB9L,UAAUqM,QAAU,WAChC,IAAKvS,KAAKsT,KACN,OAAO,EAEX,IAAIC,EAAWvT,KAAKsT,KAAKf,QAAQvS,KAAKsF,KAAMtF,KAAKsN,GAAItN,KAAKyL,UAI1D,OAHI8H,GAAYvT,KAAKkS,eACjBlS,KAAKsT,KAAKpB,cAAclS,KAAKsN,IAE1BiG,GAEXvB,EAAgB9L,UAAU0M,QAAU,WAC5B5S,KAAKsT,OACLtT,KAAKsT,KAAKV,QAAQ5S,KAAKsN,IACnBtN,KAAKkS,eACLlS,KAAKsT,KAAKL,aAAajT,KAAKsN,MAIxC0E,EAAgB9L,UAAU4C,QAAU,WAChC9I,KAAK4S,UACL5S,KAAKsT,UAAOnR,GAET6P,EA1CyB,GA4ChCI,EAAiC,WACjC,SAASA,EAAgBkB,EAAMhG,EAAI+E,EAASH,GACxClS,KAAKsN,GAAKA,EACVtN,KAAKqS,QAAUA,EACfrS,KAAKkS,cAAgBA,EACrBlS,KAAKsT,KAAOA,EAkChB,OAhCAlB,EAAgBlM,UAAUsN,MAAQ,WAC9B,GAAKxT,KAAKsT,KAAV,CAGA,GAAItT,KAAKqS,QACL,IAAK,IAAIoB,EAAK,EAAGnN,EAAKtG,KAAKqS,QAASoB,EAAKnN,EAAG/F,OAAQkT,IAAM,CACtD,IAAItM,EAAUb,EAAGmN,GACjBzT,KAAKsT,KAAKT,eAAe1L,EAASnH,KAAKsN,IAG3CtN,KAAKkS,eACLlS,KAAKsT,KAAKpB,cAAclS,KAAKsN,MAGrC8E,EAAgBlM,UAAUwN,QAAU,WAChC,GAAK1T,KAAKsT,KAAV,CAGA,GAAItT,KAAKqS,QACL,IAAK,IAAIoB,EAAK,EAAGnN,EAAKtG,KAAKqS,QAASoB,EAAKnN,EAAG/F,OAAQkT,IAAM,CACtD,IAAItM,EAAUb,EAAGmN,GACjBzT,KAAKsT,KAAKR,cAAc3L,EAASnH,KAAKsN,IAG1CtN,KAAKkS,eACLlS,KAAKsT,KAAKL,aAAajT,KAAKsN,MAGpC8E,EAAgBlM,UAAU4C,QAAU,WAChC9I,KAAK0T,UACL1T,KAAKsT,UAAOnR,GAETiQ,EAvCyB,GAyChCY,EAAqB,qBACrBW,EAAqB,IAAIpC,EACzBjG,EAAmB,SAAUlG,EAAIoL,EAAWG,EAAU1C,GAGtD,IAIIM,EACAqB,EALAgE,EAAeC,EAAgBzO,GAAM,CACrC,UAAa6I,EAAKsE,QAClB,UAAatE,EAAK6F,WAChB7F,EAAKsE,QAYX,OATInN,EAAoC,iCACpCmJ,EAAM,kCACNqB,EAAS,uCAGTrB,EAAM,mBACNqB,EAAS,uBAEbxK,EAAGmJ,GAAKiC,EAAWG,EAAUiD,GACtB,WACHxO,EAAGwK,GAAQY,EAAWG,EAAUiD,KAGpCC,EAAkB,SAAUE,GAC5B,QAAkB5R,IAAdmP,EACA,IACI,IAAIrD,EAAOtH,OAAOoD,eAAe,GAAI,UAAW,CAC5C9C,IAAK,WACDqK,GAAY,KAGpByC,EAAKzI,iBAAiB,YAAY,cAAyB2C,GAE/D,MAAOrP,GACH0S,GAAY,EAGpB,QAASA,GA8GT0C,EAAc,SAAUD,GACxB,OAAOA,aAAgBE,SAAWF,EAAOA,EAAK7D,eAkD9C4B,EAAgB,SAAUC,GAC1B,IAAImC,GAAiB,EACjBC,GAAgB,EAChBC,GAAgB,EAChBC,GAAe,EACfC,EAAc3N,OAAOC,OAAO,CAAEsL,eAAe,EAAOzK,UAAW,IAAKD,gBAAiB,EAAGsM,SAAS,EAAMS,SAAU,GAAI7M,UAAW,IAAMqK,GACtIpK,EAAW2M,EAAY3M,SACvB6M,EAAcF,EAAYE,YAC1BzM,EAAUuM,EAAYvM,QACtBK,EAAQkM,EAAYlM,MACpBqM,EAAcH,EAAYG,YAC1BxM,EAASqM,EAAYrM,OACrBP,EAAY4M,EAAY5M,UACxB9B,EAAS,CACTJ,KAAM,MACNkP,OAAQ,EACRC,OAAQ,EACRC,UAAW,EACXC,SAAU,EACVC,SAAU,EACVC,UAAW,EACX1M,UAAW,EACX2M,OAAQ,EACR9M,OAAQ,EACR+M,YAAa,EACbpN,WAAO1F,EACPuG,UAAMvG,GAEN+S,EA5EkB,SAAUzN,EAAW0N,EAAQZ,GACnD,IAAIa,EAAUb,GAAY1T,KAAKwU,GAAK,KAChCC,EAAuB,MAAd7N,EACT8N,EAAY1U,KAAK2U,IAAIJ,GACrB1N,EAAYyN,EAASA,EACrBT,EAAS,EACTC,EAAS,EACTc,GAAQ,EACRC,EAAQ,EACZ,MAAO,CACHpD,MAAO,SAAUqD,EAAGtW,GAChBqV,EAASiB,EACThB,EAAStV,EACTqW,EAAQ,EACRD,GAAQ,GAEZG,OAAQ,SAAUD,EAAGtW,GACjB,IAAKoW,EACD,OAAO,EAEX,IAAIT,EAAUW,EAAIjB,EACdxM,EAAU7I,EAAIsV,EACdkB,EAAWb,EAASA,EAAS9M,EAASA,EAC1C,GAAI2N,EAAWnO,EACX,OAAO,EAEX,IAAIoO,EAAajV,KAAKkV,KAAKF,GACvBG,GAAUV,EAASN,EAAS9M,GAAU4N,EAW1C,OATIJ,EADAM,EAAST,EACD,EAEHS,GAAUT,GACN,EAGD,EAEZE,GAAQ,GACD,GAEXQ,UAAW,WACP,OAAiB,IAAVP,GAEXQ,aAAc,WACV,OAAOR,IAgCLS,CAAoB7B,EAAY7M,UAAW6M,EAAY5M,UAAW4M,EAAYC,UACpFpN,EAAUwM,EAAmB7B,cAAc,CAC3CxM,KAAMyM,EAAOxK,YACbkE,SAAUsG,EAAOvK,gBACjB0K,cAAeH,EAAOG,gBAiDtBkE,EAAa,WAGRlC,IAGLG,GAAe,EACXpM,GACAA,EAAOrC,KAGXyQ,EAAkB,WAClB,QAAIlP,IAAYA,EAAQoL,aAGxB2B,GAAiB,EACjBE,GAAgB,EAOhBxO,EAAO8O,OAAS9O,EAAOiP,SACvBjP,EAAO+O,OAAS/O,EAAOkP,SACvBlP,EAAOgP,UAAYhP,EAAOqP,YACtBT,EACAA,EAAY5O,GAAQ5G,KAAKsX,GAGzBA,KAEG,IAEPA,EAAc,WACVvO,GACAA,EAAQnC,GAEZwO,GAAgB,GAEhBmC,EAAQ,WACRrC,GAAiB,EACjBC,GAAgB,EAChBE,GAAe,EACfD,GAAgB,EAChBjN,EAAQyL,WAGR4D,EAAY,SAAUzR,GACtB,IAAI0R,EAAiBvC,EACjBwC,EAAmBtC,EACvBmC,IACKG,IAGLC,EAAgB/Q,EAAQb,GAEpB0R,EACIrO,GACAA,EAAMxC,GAKV6O,GACAA,EAAY7O,KAGhBgR,EAlTkB,SAAUxR,EAAIyR,EAAaC,EAAaN,EAAWpJ,GACzE,IAAI2J,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAiB,EACjBC,EAAmB,SAAUxS,GAC7BuS,EAAiBE,KAAKC,MAXb,IAYJZ,EAAY9R,MAGZiS,GAAeF,IAChBE,EAAc1L,EAAiBlG,EAAI,YAAa0R,EAAa1J,IAE5D6J,IACDA,EAAa3L,EAAiBlG,EAAI,WAAYsS,EAAgBtK,IAE7D8J,IACDA,EAAgB5L,EAAiBlG,EAAI,cAAesS,EAAgBtK,MAGxEuK,EAAkB,SAAU5S,GACxBuS,EAAiBE,KAAKC,OAGrBZ,EAAY9R,MAGZqS,GAAeN,IAChBM,EAAc9L,EAAiB0I,EAAY5O,GAAK,YAAa0R,EAAa1J,IAEzEiK,IACDA,EAAY/L,EAAiB0I,EAAY5O,GAAK,UAAWwS,EAAexK,MAG5EsK,EAAiB,SAAU3S,GAC3B8S,IACIrB,GACAA,EAAUzR,IAGd6S,EAAgB,SAAU7S,GAC1B+S,IACItB,GACAA,EAAUzR,IAGd8S,EAAY,WACRb,GACAA,IAEAC,GACAA,IAEAC,GACAA,IAEJF,EAAcC,EAAaC,OAAgB/U,GAE3C2V,EAAY,WACRV,GACAA,IAEAC,GACAA,IAEJD,EAAcC,OAAYlV,GAE1B4V,EAAO,WACPF,IACAC,KAEAtP,EAAS,SAAUwP,QACD,IAAdA,IAAwBA,GAAY,GACnCA,GAWIjB,IACDA,EAAezL,EAAiBlG,EAAI,aAAcmS,EAAkBnK,IAEnE+J,IACDA,EAAe7L,EAAiBlG,EAAI,YAAauS,EAAiBvK,MAdlE2J,GACAA,IAEAI,GACAA,IAEJJ,EAAeI,OAAehV,EAC9B4V,MAeR,MAAO,CACHvP,OAAQA,EACRuP,KAAMA,EACNjP,QAPU,WACVN,GAAO,GACPgO,EAAYM,EAAcD,OAAc1U,IAgNxB8V,CAAoB3D,EAAYlP,IAnHlC,SAAUL,GACxB,IAAImT,EAAYT,EAAI1S,GACpB,QAAIoP,IAAkBC,KAGtB+D,EAAapT,EAAIa,GACjBA,EAAO8O,OAAS9O,EAAOiP,SACvBjP,EAAO+O,OAAS/O,EAAOkP,SACvBlP,EAAOgP,UAAYhP,EAAOqP,YAAciD,EACxCtS,EAAOmP,UAAYnP,EAAOyC,UAAYzC,EAAOoP,OAASpP,EAAOsC,OAAS,EACtEtC,EAAOiC,MAAQ9C,IAEX4C,IAAiC,IAArBA,EAAS/B,MAIzBuB,EAAQyL,YAEHzL,EAAQmL,UAGb6B,GAAgB,EACE,IAAdzM,EACO2O,KAEXnB,EAAI5C,MAAM1M,EAAO8O,OAAQ9O,EAAO+O,SACzB,SAEO,SAAU5P,GAGpBmP,GACKG,GAAgBD,IACjBC,GAAe,EACfsC,EAAgB/Q,EAAQb,GACxBqT,sBAAsBhC,KAK9BO,EAAgB/Q,EAAQb,GACpBmQ,EAAIU,OAAOhQ,EAAOiP,SAAUjP,EAAOkP,YAC9BI,EAAIe,aAAgBI,KACrBgC,QAwEsE7B,EAAW,CACzFjE,SAAS,IAET8F,EAAe,WACf9B,IACAK,EAAcmB,OACVtD,GACAA,EAAY7O,IAGpB,MAAO,CACH4C,OAAQ,SAAUA,QACC,IAAXA,IAAqBA,GAAS,GAC7BA,IACG0L,GACAsC,OAAUrU,GAEdoU,KAEJK,EAAcpO,OAAOA,IAEzBM,QAAS,WACL3B,EAAQ2B,UACR8N,EAAc9N,aAItB6N,EAAkB,SAAU/Q,EAAQb,GACpC,GAAKA,EAAL,CAGA,IAAIuT,EAAQ1S,EAAOiP,SACf0D,EAAQ3S,EAAOkP,SACf0D,EAAQ5S,EAAOqP,YACnBkD,EAAapT,EAAIa,GACjB,IAAIiP,EAAWjP,EAAOiP,SAClBC,EAAWlP,EAAOkP,SAElB2D,GADY7S,EAAOqP,YAAcwC,EAAI1S,IACbyT,EAC5B,GAAIC,EAAY,GAAKA,EAAY,IAAK,CAClC,IAAI1D,GAAaF,EAAWyD,GAASG,EACjCpQ,GAAayM,EAAWyD,GAASE,EACrC7S,EAAOmP,UAAwB,GAAZA,EAAqC,GAAnBnP,EAAOmP,UAC5CnP,EAAOyC,UAAwB,GAAZA,EAAqC,GAAnBzC,EAAOyC,UAEhDzC,EAAOoP,OAASH,EAAWjP,EAAO8O,OAClC9O,EAAOsC,OAAS4M,EAAWlP,EAAO+O,OAClC/O,EAAOiC,MAAQ9C,IAEfoT,EAAe,SAAUpT,EAAIa,GAG7B,IAAI+P,EAAI,EACJtW,EAAI,EACR,GAAI0F,EAAI,CACJ,IAAI2T,EAAiB3T,EAAG2T,eACxB,GAAIA,GAAkBA,EAAenY,OAAS,EAAG,CAC7C,IAAIoY,EAAQD,EAAe,GAC3B/C,EAAIgD,EAAMC,QACVvZ,EAAIsZ,EAAME,kBAEQ1W,IAAb4C,EAAG+T,QACRnD,EAAI5Q,EAAG+T,MACPzZ,EAAI0F,EAAGgU,OAGfnT,EAAOiP,SAAWc,EAClB/P,EAAOkP,SAAWzV,GAElBoY,EAAM,SAAU1S,GAChB,OAAOA,EAAGmT,WAAaV,KAAKC,Q,iCCnmBhC,8KAAIuB,EAAuB,mBACvBC,EAAsB,kBACtBC,EAAuB,mBACvBC,EAAsB,kBACtBC,EAAwB,qB,iCCJ5B,kCAmBA,IAAIC,EAA0B,SAAUC,EAAIC,EAAIC,EAAIC,EAAIC,GACpD,OAAOC,EAAiBL,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,GAAalP,KAAI,SAAUoP,GAC3E,OAAOC,EAA6BP,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIG,OAMpEC,EAA+B,SAAUP,EAAIC,EAAIC,EAAIC,EAAIna,GAIzD,OAAOA,GAHM,EAAIia,EAAM1Y,KAAKiZ,IAAIxa,EAAI,EAAG,GAGlBA,IAFP,EAAIka,EAAKla,EAAM,EAAIka,EAAOC,EAAKna,IACjCga,EAAKzY,KAAKiZ,IAAIxa,EAAI,EAAG,IAMjCqa,EAAmB,SAAUL,EAAIC,EAAIC,EAAIC,EAAIM,GAM7C,OADYC,GADZP,GAAMM,GAC8B,GAFpCP,GAAMO,GAEuC,GAH7CR,GAAMQ,IADNT,GAAMS,GAIoD,EAAIP,EAAK,EAAID,EAAK,EAAID,EAAI,EAAIC,EAAK,EAAID,EAAIA,GACxFvW,QAAO,SAAUkX,GAAQ,OAAOA,GAAQ,GAAKA,GAAQ,MAclED,EAAqB,SAAUpN,EAAGsN,EAAGvP,EAAGwP,GACxC,GAAU,IAANvN,EACA,OAdqB,SAAUA,EAAGsN,EAAGvP,GACzC,IAAIyP,EAAeF,EAAIA,EAAI,EAAItN,EAAIjC,EACnC,OAAIyP,EAAe,EACR,GAGA,GACDF,EAAIrZ,KAAKkV,KAAKqE,KAAkB,EAAIxN,KACpCsN,EAAIrZ,KAAKkV,KAAKqE,KAAkB,EAAIxN,IAMnCyN,CAAuBH,EAAGvP,EAAGwP,GAKxC,IAAIG,GAAK,GAFT3P,GAAKiC,IADLsN,GAAKtN,GAGgBsN,GAAK,EACtBK,GAAK,EAAIL,EAAIA,EAAIA,EAAI,EAAIA,EAAIvP,EAAI,IAFrCwP,GAAKvN,IAE0C,GAC/C,GAAU,IAAN0N,EACA,MAAO,CAACzZ,KAAKiZ,KAAKS,EAAG,EAAI,IAExB,GAAU,IAANA,EACL,MAAO,CAAC1Z,KAAKkV,MAAMuE,IAAKzZ,KAAKkV,MAAMuE,IAEvC,IAAIF,EAAevZ,KAAKiZ,IAAIS,EAAI,EAAG,GAAK1Z,KAAKiZ,IAAIQ,EAAI,EAAG,GACxD,GAAqB,IAAjBF,EACA,MAAO,CAACvZ,KAAKiZ,IAAIS,EAAI,EAAG,IAASL,EAAI,GAEpC,GAAIE,EAAe,EACpB,MAAO,CAACvZ,KAAKiZ,KAAMS,EAAI,EAAK1Z,KAAKkV,KAAKqE,GAAe,EAAI,GAAKvZ,KAAKiZ,IAAKS,EAAI,EAAK1Z,KAAKkV,KAAKqE,GAAe,EAAI,GAAKF,EAAI,GAE3H,IAAIxN,EAAI7L,KAAKkV,KAAKlV,KAAKiZ,KAAMQ,EAAI,EAAI,IACjCE,EAAM3Z,KAAK4Z,MAAOF,GAAK,EAAI1Z,KAAKkV,KAAKlV,KAAKiZ,KAAMQ,EAAI,EAAI,MACxDhO,EAAI,EAAIzL,KAAKiZ,IAAIpN,EAAG,EAAI,GAC5B,MAAO,CACHJ,EAAIzL,KAAK2U,IAAIgF,EAAM,GAAKN,EAAI,EAC5B5N,EAAIzL,KAAK2U,KAAKgF,EAAM,EAAI3Z,KAAKwU,IAAM,GAAK6E,EAAI,EAC5C5N,EAAIzL,KAAK2U,KAAKgF,EAAM,EAAI3Z,KAAKwU,IAAM,GAAK6E,EAAI,K,iCCpFpD,wEAAIlc,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGlEO,EAA4C,SAAUjB,EAASkB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIf,EAAG,MAAM,IAAIgB,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARa,EAAG,GAASd,EAAU,OAAIc,EAAG,GAAKd,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEe,KAAKhB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEe,KAAKhB,EAAGc,EAAG,KAAKpB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGa,EAAK,CAAS,EAARA,EAAG,GAAQb,EAAEb,QACzB0B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGb,EAAIa,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEhB,MAAO0B,EAAG,GAAIpB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIc,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAMhB,EAAIE,EAAEG,MAAML,EAAIA,EAAEiB,OAAS,GAAKjB,EAAEA,EAAEiB,OAAS,KAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcb,GAAMa,EAAG,GAAKb,EAAE,IAAMa,EAAG,GAAKb,EAAE,IAAM,CAAEE,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIa,EAAI,MAC7D,GAAIb,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIY,KAAKL,GAAK,MACvDb,EAAE,IAAIE,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKhB,EAAKkB,KAAKpC,EAASuB,GAC1B,MAAOZ,GAAKuB,EAAK,CAAC,EAAGvB,GAAIS,EAAI,EAAK,QAAUD,EAAIE,EAAI,EACtD,GAAY,EAARa,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1B,MAAO0B,EAAG,GAAKA,EAAG,QAAK,EAAQpB,MAAM,GArB9BL,CAAK,CAACuB,EAAGC,OAwBzDwa,EAAkB,SAAU5T,EAAUV,EAAWW,EAAW4T,EAAYtU,GAAkB,OAAOrI,OAAU,OAAQ,OAAQ,GAAQ,WACnI,IAAIoH,EACJ,OAAOlG,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EACD,GAAIqH,EACA,MAAO,CAAC,EAAcA,EAAS8T,gBAAgBxU,EAAWW,EAAWV,EAAgBsU,IAEzF,GAAyB,iBAAd5T,KAA4BA,aAAqB8T,aACxD,MAAM,IAAInU,MAAM,iCAYpB,OAVAtB,EAA2B,iBAAd2B,EACPX,EAAU8J,eAAiB9J,EAAU8J,cAAc7B,cAActH,GACjEA,EACF4T,GACAA,EAAW5R,SAAQ,SAAU4B,GAAK,OAAOvF,EAAGkJ,UAAUC,IAAI5D,MAE1DtE,GACAM,OAAOC,OAAOxB,EAAIiB,GAEtBD,EAAUqI,YAAYrJ,GACjBA,EAAGsJ,iBACD,CAAC,EAAatJ,EAAGsJ,oBADS,CAAC,EAAa,GAEnD,KAAK,EACDpI,EAAG5G,OACH4G,EAAG7G,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc2F,WAItC0V,EAAkB,SAAUhU,EAAUsH,GACtC,GAAIA,EAAS,CACT,GAAItH,EAAU,CACV,IAAIV,EAAYgI,EAAQ4C,cACxB,OAAOlK,EAASiU,kBAAkB3U,EAAWgI,GAEjDA,EAAQwB,SAEZ,OAAOvR,QAAQC,Y,iCC1EnB,+LAAIN,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGlEO,EAA4C,SAAUjB,EAASkB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIf,EAAG,MAAM,IAAIgB,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARa,EAAG,GAASd,EAAU,OAAIc,EAAG,GAAKd,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEe,KAAKhB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEe,KAAKhB,EAAGc,EAAG,KAAKpB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGa,EAAK,CAAS,EAARA,EAAG,GAAQb,EAAEb,QACzB0B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGb,EAAIa,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEhB,MAAO0B,EAAG,GAAIpB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIc,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAMhB,EAAIE,EAAEG,MAAML,EAAIA,EAAEiB,OAAS,GAAKjB,EAAEA,EAAEiB,OAAS,KAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcb,GAAMa,EAAG,GAAKb,EAAE,IAAMa,EAAG,GAAKb,EAAE,IAAM,CAAEE,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIa,EAAI,MAC7D,GAAIb,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIY,KAAKL,GAAK,MACvDb,EAAE,IAAIE,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKhB,EAAKkB,KAAKpC,EAASuB,GAC1B,MAAOZ,GAAKuB,EAAK,CAAC,EAAGvB,GAAIS,EAAI,EAAK,QAAUD,EAAIE,EAAI,EACtD,GAAY,EAARa,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE1B,MAAO0B,EAAG,GAAKA,EAAG,QAAK,EAAQpB,MAAM,GArB9BL,CAAK,CAACuB,EAAGC,OA4BzD8a,EAAa,SAAU/M,GACvB,OAAO,IAAI5P,SAAQ,SAAUC,EAASC,GAClC,aAAU,WACN0c,EAAiBhN,GACjBiN,EAAcjN,GAAMjP,MAAK,SAAUF,GAC3BA,EAAOoI,WACPpI,EAAOoI,UAAU4B,UAErBqS,EAAgBlN,GAChB3P,EAAQQ,MACT,SAAUoN,GACTiP,EAAgBlN,GAChB1P,EAAO2N,aAKnB+O,EAAmB,SAAUhN,GAC7B,IAAImN,EAAanN,EAAKmN,WAClBC,EAAYpN,EAAKoN,UACrBC,EAAUF,EAAYC,EAAWpN,EAAKxG,WAClCwG,EAAKsN,WACLH,EAAW9M,UAAUC,IAAI,eAGzB6M,EAAW9M,UAAUsB,OAAO,eAEhC4L,EAAcJ,GAAY,GACtBC,GACAG,EAAcH,GAAW,IAG7BH,EAAgB,SAAUjN,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WAC3E,IAAIuI,EACJ,OAAOrH,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAAG,MAAO,CAAC,EAAagc,EAAoBxN,IACjD,KAAK,EAKD,OAJA1H,EAAmBD,EAAG5G,OAIf,CAAC,EAHF,EACAwH,EAAUX,EAAkB0H,GAC5ByN,EAAYzN,YAK9BkN,EAAkB,SAAUlN,GAC5B,IAAImN,EAAanN,EAAKmN,WAClBC,EAAYpN,EAAKoN,UACrBD,EAAW9M,UAAUsB,OAAO,2BACVzN,IAAdkZ,GACAA,EAAU/M,UAAUsB,OAAO,uBAG/B6L,EAAsB,SAAUxN,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WACjF,IAAkBsI,EAClB,OAAOpH,EAAYc,MAAM,SAAUyG,GAC/B,OAAQA,EAAGhH,OACP,KAAK,EACD,OAAKwO,EAAKoN,WAAcpN,EAAKvJ,UAA8B,IAAlBuJ,EAAKtM,SAG1CsM,EAAK1H,iBACE,CAAC,EAAc0H,EAAK1H,kBAEX,QAAd0H,EAAK3J,KAAwB,CAAC,EAAa,GAC1C,CAAC,EApE0B,uDA8DvB,CAAC,OAAcnC,GAO9B,KAAK,EAED,OADAmE,EAAMG,EAAG/G,OAAQic,uBACV,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAvEqB,uDAwErC,KAAK,EACDrV,EAAMG,EAAG/G,OAAQkc,sBACjBnV,EAAGhH,MAAQ,EACf,KAAK,EAED,MAAO,CAAC,EADO6G,WAK3BY,EAAY,SAAUX,EAAkB0H,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WACzF,IAAI6d,EAAOC,EACX,OAAO5c,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAAG,MAAO,CAAC,EAAasc,EAAa9N,GAAM,IAChD,KAAK,EAID,OAHA3H,EAAG5G,OACHmc,EAAQtV,EAAiB0H,EAAKjN,OAAQiN,GACtC+N,EAAe/N,EAAKmN,WAAYnN,EAAKoN,WAC9B,CAAC,EAAaY,EAAeJ,EAAO5N,IAC/C,KAAK,EAQD,OAPA6N,EAAcxV,EAAG5G,OACbuO,EAAKiO,kBACLjO,EAAKiO,sBAAiB/Z,GAEtB2Z,GACAK,EAAclO,EAAKmN,WAAYnN,EAAKoN,WAEjC,CAAC,EAAc,CACde,aAAcN,EACd5U,UAAW2U,YAK/BH,EAAc,SAAUzN,GAAQ,OAAOjQ,OAAU,OAAQ,OAAQ,GAAQ,WACzE,IAAIod,EAAYC,EAChB,OAAOnc,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAGD,OAFA2b,EAAanN,EAAKmN,WAClBC,EAAYpN,EAAKoN,UACV,CAAC,EAAaU,EAAa9N,GAAM,IAC5C,KAAK,EAID,OAHA3H,EAAG5G,OACHsc,EAAeZ,EAAYC,GAC3Bc,EAAcf,EAAYC,GACnB,CAAC,EAAc,CACde,cAAc,YAKlCL,EAAe,SAAU9N,EAAMoO,GAAe,OAAOre,OAAU,OAAQ,OAAQ,GAAQ,WACvF,IAAIse,EAAMC,EACV,OAAOrd,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EASD,OARA6c,OAAyBna,IAAlB8L,EAAKuO,SAAyBvO,EAAKuO,SAAWH,EACrDE,EAAWD,EAAO,CACdG,EAAUxO,EAAKmN,YACfqB,EAAUxO,EAAKoN,YACf,CACAqB,EAAazO,EAAKmN,YAClBsB,EAAazO,EAAKoN,YAEf,CAAC,EAAahd,QAAQse,IAAIJ,IACrC,KAAK,EAED,OADAjW,EAAG5G,OACI,CAAC,EAAakd,EAAgB3O,EAAK4O,YAAa5O,EAAKmN,aAChE,KAAK,EAED,OADA9U,EAAG5G,OACI,CAAC,WAIpBkd,EAAkB,SAAUC,EAAazB,GAAc,OAAOpd,OAAU,OAAQ,OAAQ,GAAQ,WAChG,OAAOkB,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EACD,OAAKod,EACE,CAAC,EAAaA,EAAYzB,IADR,CAAC,EAAa,GAE3C,KAAK,EACD9U,EAAG5G,OACH4G,EAAG7G,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,WAIxBwc,EAAiB,SAAUJ,EAAO5N,GAClC,IAAIiO,EAAmBjO,EAAKiO,iBACxBzL,EAAU,IAAIpS,SAAQ,SAAUC,GAChCud,EAAMvY,UAAS,SAAUC,GAAe,OAAOjF,EAAwB,IAAhBiF,SAgB3D,OAbI2Y,GAGAL,EAAM7T,eAAc,GACpBkU,EAAiBL,IAMjBA,EAAMvL,OAGHG,GAEPuL,EAAiB,SAAUZ,EAAYC,GACvCyB,EAAUzB,EAAW,KACrByB,EAAU1B,EAAY,MAEtBe,EAAgB,SAAUf,EAAYC,GACtCyB,EAAU1B,EAAY,KACtB0B,EAAUzB,EAAW,MAErByB,EAAY,SAAU1X,EAAIoL,GAC1B,GAAIpL,EAAI,CACJ,IAAIL,EAAK,IAAIU,YAAY+K,EAAW,CAChC9K,SAAS,EACTC,YAAY,IAEhBP,EAAGS,cAAcd,KAGrB2X,EAAe,SAAUtX,GACzB,OAAIA,GAAMA,EAAGsJ,iBACFtJ,EAAGsJ,mBAEPrQ,QAAQC,WAEfme,EAAY,SAAUrX,GAAM,OAAOpH,OAAU,OAAQ,OAAQ,GAAQ,WACrE,IAAIoQ,EACJ,OAAOlP,EAAYc,MAAM,SAAUsG,GAC/B,OAAQA,EAAG7G,OACP,KAAK,EAED,OADA2O,EAAUhJ,GAEwB,MAA5BgJ,EAAQM,iBAAkC,CAAC,EAAa,GACvD,CAAC,EAAaN,EAAQM,oBAFR,CAAC,EAAa,GAGvC,KAAK,EAED,GAAiB,MADLpI,EAAG5G,OAEX,MAAO,CAAC,GAEZ4G,EAAG7G,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAapB,QAAQse,IAAInZ,MAAMC,KAAK2K,EAAQ2O,UAAUvS,IAAIiS,KAC1E,KAAK,EACDnW,EAAG5G,OACH4G,EAAG7G,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,WAIxB+b,EAAgB,SAAUpW,EAAI4X,GAC1BA,GACA5X,EAAG6X,aAAa,cAAe,QAC/B7X,EAAGkJ,UAAUC,IAAI,qBAGjBnJ,EAAG4X,QAAS,EACZ5X,EAAG8X,gBAAgB,eACnB9X,EAAGkJ,UAAUsB,OAAO,qBAGxB0L,EAAY,SAAUF,EAAYC,EAAW5T,QAC1BtF,IAAfiZ,IACAA,EAAWzY,MAAM0G,OAAwB,SAAd5B,EACrB,KACA,YAEQtF,IAAdkZ,IACAA,EAAU1Y,MAAM0G,OAAS,QAG7B8T,EAAoB,SAAU/O,GAC9B,GAAIA,EAAQE,UAAU8O,SAAS,YAC3B,OAAOhP,EAEX,IAAIiP,EAAUjP,EAAQhN,cAAc,2DACpC,OAAIic,GAIGjP","file":"5.7160fccd810dfb3f96f3.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { r as registerInstance, e as getIonMode, c as createEvent, j as config, h, H as Host, d as getElement } from './core-0428d3c8.js';\r\nimport { c as clamp } from './helpers-b7c9db54.js';\r\nimport { g as getClassMap } from './theme-215399f6.js';\r\nimport './hardware-back-button-d00923be.js';\r\nimport { B as BACKDROP, p as prepareOverlay, a as present, c as activeAnimations, d as dismiss, e as eventMethod } from './overlays-c3bbdd4c.js';\r\nimport { c as createAnimation } from './animation-2b8428ef.js';\r\nimport { g as getTimeGivenProgression } from './cubic-bezier-3e15f91c.js';\r\nimport { createGesture } from './index-d4adefd0.js';\r\nimport { a as attachComponent, d as detachComponent } from './framework-delegate-edc3d751.js';\r\nimport './constants-7647fb9e.js';\r\nimport { d as deepReady } from './index-4b20f1e1.js';\r\n// Defaults for the card swipe animation\r\nvar SwipeToCloseDefaults = {\r\n    MIN_PRESENTING_SCALE: 0.93,\r\n};\r\nvar createSwipeToCloseGesture = function (el, animation, onDismiss) {\r\n    var height = el.offsetHeight;\r\n    var isOpen = false;\r\n    var canStart = function (detail) {\r\n        var target = detail.event.target;\r\n        if (target === null ||\r\n            !target.closest) {\r\n            return true;\r\n        }\r\n        var content = target.closest('ion-content');\r\n        if (content === null) {\r\n            return true;\r\n        }\r\n        // Target is in the content so we don't start the gesture.\r\n        // We could be more nuanced here and allow it for content that\r\n        // does not need to scroll.\r\n        return false;\r\n    };\r\n    var onStart = function () {\r\n        animation.progressStart(true, (isOpen) ? 1 : 0);\r\n    };\r\n    var onMove = function (detail) {\r\n        var step = detail.deltaY / height;\r\n        if (step < 0) {\r\n            return;\r\n        }\r\n        animation.progressStep(step);\r\n    };\r\n    var onEnd = function (detail) {\r\n        var velocity = detail.velocityY;\r\n        var step = detail.deltaY / height;\r\n        if (step < 0) {\r\n            return;\r\n        }\r\n        var threshold = (detail.deltaY + velocity * 1000) / height;\r\n        var shouldComplete = threshold >= 0.5;\r\n        var newStepValue = (shouldComplete) ? -0.001 : 0.001;\r\n        if (!shouldComplete) {\r\n            animation.easing('cubic-bezier(1, 0, 0.68, 0.28)');\r\n            newStepValue += getTimeGivenProgression([0, 0], [1, 0], [0.68, 0.28], [1, 1], step)[0];\r\n        }\r\n        else {\r\n            animation.easing('cubic-bezier(0.32, 0.72, 0, 1)');\r\n            newStepValue += getTimeGivenProgression([0, 0], [0.32, 0.72], [0, 1], [1, 1], step)[0];\r\n        }\r\n        var duration = (shouldComplete) ? computeDuration(step * height, velocity) : computeDuration((1 - step) * height, velocity);\r\n        isOpen = shouldComplete;\r\n        gesture.enable(false);\r\n        animation\r\n            .onFinish(function () {\r\n            if (!shouldComplete) {\r\n                gesture.enable(true);\r\n            }\r\n        })\r\n            .progressEnd((shouldComplete) ? 1 : 0, newStepValue, duration);\r\n        if (shouldComplete) {\r\n            onDismiss();\r\n        }\r\n    };\r\n    var gesture = createGesture({\r\n        el: el,\r\n        gestureName: 'modalSwipeToClose',\r\n        gesturePriority: 40,\r\n        direction: 'y',\r\n        threshold: 10,\r\n        canStart: canStart,\r\n        onStart: onStart,\r\n        onMove: onMove,\r\n        onEnd: onEnd\r\n    });\r\n    return gesture;\r\n};\r\nvar computeDuration = function (remaining, velocity) {\r\n    return clamp(400, remaining / Math.abs(velocity * 1.1), 500);\r\n};\r\n/**\r\n * iOS Modal Enter Animation for the Card presentation style\r\n */\r\nvar iosEnterAnimation = function (baseEl, presentingEl) {\r\n    // The top translate Y for the presenting element\r\n    var backdropAnimation = createAnimation()\r\n        .addElement(baseEl.querySelector('ion-backdrop'))\r\n        .fromTo('opacity', 0.01, 'var(--backdrop-opacity)')\r\n        .beforeStyles({\r\n        'pointer-events': 'none'\r\n    })\r\n        .afterClearStyles(['pointer-events']);\r\n    var wrapperAnimation = createAnimation()\r\n        .addElement(baseEl.querySelector('.modal-wrapper'))\r\n        .beforeStyles({ 'opacity': 1 })\r\n        .fromTo('transform', 'translateY(100vh)', 'translateY(0vh)');\r\n    var baseAnimation = createAnimation()\r\n        .addElement(baseEl)\r\n        .easing('cubic-bezier(0.32,0.72,0,1)')\r\n        .duration(500)\r\n        .beforeAddClass('show-modal')\r\n        .addAnimation([backdropAnimation, wrapperAnimation]);\r\n    if (presentingEl) {\r\n        /**\r\n         * Fallback for browsers that does not support `max()` (ex: Firefox)\r\n         * No need to wrry about statusbar padding since engines like Gecko\r\n         * are not used as the engine for standlone Cordova/Capacitor apps\r\n         */\r\n        var transformOffset = (!CSS.supports('width', 'max(0px, 1px)')) ? '30px' : 'max(30px, var(--ion-safe-area-top))';\r\n        var modalTransform = (presentingEl.tagName === 'ION-MODAL' && presentingEl.presentingElement !== undefined) ? '-10px' : transformOffset;\r\n        var bodyEl_1 = document.body;\r\n        var toPresentingScale = SwipeToCloseDefaults.MIN_PRESENTING_SCALE;\r\n        var finalTransform = \"translateY(\" + modalTransform + \") scale(\" + toPresentingScale + \")\";\r\n        var presentingAnimation = createAnimation()\r\n            .beforeStyles({\r\n            'transform': 'translateY(0)',\r\n            'transform-origin': 'top center',\r\n            'overflow': 'hidden'\r\n        })\r\n            .afterStyles({\r\n            'transform': finalTransform\r\n        })\r\n            .beforeAddWrite(function () { return bodyEl_1.style.setProperty('background-color', 'black'); })\r\n            .addElement(presentingEl)\r\n            .keyframes([\r\n            { offset: 0, filter: 'contrast(1)', transform: 'translateY(0px) scale(1)', borderRadius: '0px' },\r\n            { offset: 1, filter: 'contrast(0.85)', transform: finalTransform, borderRadius: '10px 10px 0 0' }\r\n        ]);\r\n        baseAnimation.addAnimation(presentingAnimation);\r\n    }\r\n    return baseAnimation;\r\n};\r\n/**\r\n * iOS Modal Leave Animation\r\n */\r\nvar iosLeaveAnimation = function (baseEl, presentingEl, duration) {\r\n    if (duration === void 0) { duration = 500; }\r\n    var backdropAnimation = createAnimation()\r\n        .addElement(baseEl.querySelector('ion-backdrop'))\r\n        .fromTo('opacity', 'var(--backdrop-opacity)', 0.0);\r\n    var wrapperAnimation = createAnimation()\r\n        .addElement(baseEl.querySelector('.modal-wrapper'))\r\n        .beforeStyles({ 'opacity': 1 })\r\n        .fromTo('transform', 'translateY(0vh)', 'translateY(100vh)');\r\n    var baseAnimation = createAnimation()\r\n        .addElement(baseEl)\r\n        .easing('cubic-bezier(0.32,0.72,0,1)')\r\n        .duration(duration)\r\n        .addAnimation([backdropAnimation, wrapperAnimation]);\r\n    if (presentingEl) {\r\n        var transformOffset = (!CSS.supports('width', 'max(0px, 1px)')) ? '30px' : 'max(30px, var(--ion-safe-area-top))';\r\n        var modalTransform = (presentingEl.tagName === 'ION-MODAL' && presentingEl.presentingElement !== undefined) ? '-10px' : transformOffset;\r\n        var bodyEl_2 = document.body;\r\n        var currentPresentingScale = SwipeToCloseDefaults.MIN_PRESENTING_SCALE;\r\n        var presentingAnimation = createAnimation()\r\n            .addElement(presentingEl)\r\n            .beforeClearStyles(['transform'])\r\n            .afterClearStyles(['transform'])\r\n            .onFinish(function (currentStep) {\r\n            // only reset background color if this is the last card-style modal\r\n            if (currentStep !== 1) {\r\n                return;\r\n            }\r\n            presentingEl.style.setProperty('overflow', '');\r\n            var numModals = Array.from(bodyEl_2.querySelectorAll('ion-modal')).filter(function (m) { return m.presentingElement !== undefined; }).length;\r\n            if (numModals <= 1) {\r\n                bodyEl_2.style.setProperty('background-color', '');\r\n            }\r\n        })\r\n            .keyframes([\r\n            { offset: 0, filter: 'contrast(0.85)', transform: \"translateY(\" + modalTransform + \") scale(\" + currentPresentingScale + \")\", borderRadius: '10px 10px 0 0' },\r\n            { offset: 1, filter: 'contrast(1)', transform: 'translateY(0px) scale(1)', borderRadius: '0px' }\r\n        ]);\r\n        baseAnimation.addAnimation(presentingAnimation);\r\n    }\r\n    return baseAnimation;\r\n};\r\n/**\r\n * Md Modal Enter Animation\r\n */\r\nvar mdEnterAnimation = function (baseEl) {\r\n    var baseAnimation = createAnimation();\r\n    var backdropAnimation = createAnimation();\r\n    var wrapperAnimation = createAnimation();\r\n    backdropAnimation\r\n        .addElement(baseEl.querySelector('ion-backdrop'))\r\n        .fromTo('opacity', 0.01, 'var(--backdrop-opacity)')\r\n        .beforeStyles({\r\n        'pointer-events': 'none'\r\n    })\r\n        .afterClearStyles(['pointer-events']);\r\n    wrapperAnimation\r\n        .addElement(baseEl.querySelector('.modal-wrapper'))\r\n        .keyframes([\r\n        { offset: 0, opacity: 0.01, transform: 'translateY(40px)' },\r\n        { offset: 1, opacity: 1, transform: 'translateY(0px)' }\r\n    ]);\r\n    return baseAnimation\r\n        .addElement(baseEl)\r\n        .easing('cubic-bezier(0.36,0.66,0.04,1)')\r\n        .duration(280)\r\n        .beforeAddClass('show-modal')\r\n        .addAnimation([backdropAnimation, wrapperAnimation]);\r\n};\r\n/**\r\n * Md Modal Leave Animation\r\n */\r\nvar mdLeaveAnimation = function (baseEl) {\r\n    var baseAnimation = createAnimation();\r\n    var backdropAnimation = createAnimation();\r\n    var wrapperAnimation = createAnimation();\r\n    var wrapperEl = baseEl.querySelector('.modal-wrapper');\r\n    backdropAnimation\r\n        .addElement(baseEl.querySelector('ion-backdrop'))\r\n        .fromTo('opacity', 'var(--backdrop-opacity)', 0.0);\r\n    wrapperAnimation\r\n        .addElement(wrapperEl)\r\n        .keyframes([\r\n        { offset: 0, opacity: 0.99, transform: 'translateY(0px)' },\r\n        { offset: 1, opacity: 0, transform: 'translateY(40px)' }\r\n    ]);\r\n    return baseAnimation\r\n        .addElement(baseEl)\r\n        .easing('cubic-bezier(0.47,0,0.745,0.715)')\r\n        .duration(200)\r\n        .addAnimation([backdropAnimation, wrapperAnimation]);\r\n};\r\nvar Modal = /** @class */ (function () {\r\n    function class_1(hostRef) {\r\n        var _this = this;\r\n        registerInstance(this, hostRef);\r\n        // Whether or not modal is being dismissed via gesture\r\n        this.gestureAnimationDismissing = false;\r\n        this.presented = false;\r\n        this.mode = getIonMode(this);\r\n        /**\r\n         * If `true`, the keyboard will be automatically dismissed when the overlay is presented.\r\n         */\r\n        this.keyboardClose = true;\r\n        /**\r\n         * If `true`, the modal will be dismissed when the backdrop is clicked.\r\n         */\r\n        this.backdropDismiss = true;\r\n        /**\r\n         * If `true`, a backdrop will be displayed behind the modal.\r\n         */\r\n        this.showBackdrop = true;\r\n        /**\r\n         * If `true`, the modal will animate.\r\n         */\r\n        this.animated = true;\r\n        /**\r\n         * If `true`, the modal can be swiped to dismiss. Only applies in iOS mode.\r\n         */\r\n        this.swipeToClose = false;\r\n        this.onBackdropTap = function () {\r\n            _this.dismiss(undefined, BACKDROP);\r\n        };\r\n        this.onDismiss = function (ev) {\r\n            ev.stopPropagation();\r\n            ev.preventDefault();\r\n            _this.dismiss();\r\n        };\r\n        this.onLifecycle = function (modalEvent) {\r\n            var el = _this.usersElement;\r\n            var name = LIFECYCLE_MAP[modalEvent.type];\r\n            if (el && name) {\r\n                var ev = new CustomEvent(name, {\r\n                    bubbles: false,\r\n                    cancelable: false,\r\n                    detail: modalEvent.detail\r\n                });\r\n                el.dispatchEvent(ev);\r\n            }\r\n        };\r\n        prepareOverlay(this.el);\r\n        this.didPresent = createEvent(this, \"ionModalDidPresent\", 7);\r\n        this.willPresent = createEvent(this, \"ionModalWillPresent\", 7);\r\n        this.willDismiss = createEvent(this, \"ionModalWillDismiss\", 7);\r\n        this.didDismiss = createEvent(this, \"ionModalDidDismiss\", 7);\r\n    }\r\n    /**\r\n     * Present the modal overlay after it has been created.\r\n     */\r\n    class_1.prototype.present = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var container, componentProps, _a, mode, animationBuilder, ani;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (this.presented) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        container = this.el.querySelector(\".modal-wrapper\");\r\n                        if (!container) {\r\n                            throw new Error('container is undefined');\r\n                        }\r\n                        componentProps = Object.assign(Object.assign({}, this.componentProps), { modal: this.el });\r\n                        _a = this;\r\n                        return [4 /*yield*/, attachComponent(this.delegate, container, this.component, ['ion-page'], componentProps)];\r\n                    case 1:\r\n                        _a.usersElement = _b.sent();\r\n                        return [4 /*yield*/, deepReady(this.usersElement)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, present(this, 'modalEnter', iosEnterAnimation, mdEnterAnimation, this.presentingElement)];\r\n                    case 3:\r\n                        _b.sent();\r\n                        mode = getIonMode(this);\r\n                        if (this.swipeToClose && mode === 'ios') {\r\n                            animationBuilder = this.leaveAnimation || config.get('modalLeave', iosLeaveAnimation);\r\n                            ani = this.animation = animationBuilder(this.el, this.presentingElement);\r\n                            this.gesture = createSwipeToCloseGesture(this.el, ani, function () {\r\n                                /**\r\n                                 * While the gesture animation is finishing\r\n                                 * it is possible for a user to tap the backdrop.\r\n                                 * This would result in the dismiss animation\r\n                                 * being played again. Typically this is avoided\r\n                                 * by setting `presented = false` on the overlay\r\n                                 * component; however, we cannot do that here as\r\n                                 * that would prevent the element from being\r\n                                 * removed from the DOM.\r\n                                 */\r\n                                _this.gestureAnimationDismissing = true;\r\n                                _this.animation.onFinish(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                    return __generator(this, function (_a) {\r\n                                        switch (_a.label) {\r\n                                            case 0: return [4 /*yield*/, this.dismiss(undefined, 'gesture')];\r\n                                            case 1:\r\n                                                _a.sent();\r\n                                                this.gestureAnimationDismissing = false;\r\n                                                return [2 /*return*/];\r\n                                        }\r\n                                    });\r\n                                }); });\r\n                            });\r\n                            this.gesture.enable(true);\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Dismiss the modal overlay after it has been presented.\r\n     *\r\n     * @param data Any data to emit in the dismiss events.\r\n     * @param role The role of the element that is dismissing the modal. For example, 'cancel' or 'backdrop'.\r\n     */\r\n    class_1.prototype.dismiss = function (data, role) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var enteringAnimation, dismissed;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.gestureAnimationDismissing && role !== 'gesture') {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        enteringAnimation = activeAnimations.get(this) || [];\r\n                        return [4 /*yield*/, dismiss(this, data, role, 'modalLeave', iosLeaveAnimation, mdLeaveAnimation, this.presentingElement)];\r\n                    case 1:\r\n                        dismissed = _a.sent();\r\n                        if (!dismissed) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, detachComponent(this.delegate, this.usersElement)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        if (this.animation) {\r\n                            this.animation.destroy();\r\n                        }\r\n                        enteringAnimation.forEach(function (ani) { return ani.destroy(); });\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        this.animation = undefined;\r\n                        return [2 /*return*/, dismissed];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Returns a promise that resolves when the modal did dismiss.\r\n     */\r\n    class_1.prototype.onDidDismiss = function () {\r\n        return eventMethod(this.el, 'ionModalDidDismiss');\r\n    };\r\n    /**\r\n     * Returns a promise that resolves when the modal will dismiss.\r\n     */\r\n    class_1.prototype.onWillDismiss = function () {\r\n        return eventMethod(this.el, 'ionModalWillDismiss');\r\n    };\r\n    class_1.prototype.render = function () {\r\n        var _a;\r\n        var mode = getIonMode(this);\r\n        return (h(Host, { \"no-router\": true, \"aria-modal\": \"true\", class: Object.assign((_a = {}, _a[mode] = true, _a[\"modal-card\"] = this.presentingElement !== undefined && mode === 'ios', _a), getClassMap(this.cssClass)), style: {\r\n                zIndex: \"\" + (20000 + this.overlayIndex),\r\n            }, onIonBackdropTap: this.onBackdropTap, onIonDismiss: this.onDismiss, onIonModalDidPresent: this.onLifecycle, onIonModalWillPresent: this.onLifecycle, onIonModalWillDismiss: this.onLifecycle, onIonModalDidDismiss: this.onLifecycle }, h(\"ion-backdrop\", { visible: this.showBackdrop, tappable: this.backdropDismiss }), h(\"div\", { role: \"dialog\", class: \"modal-wrapper\" })));\r\n    };\r\n    Object.defineProperty(class_1.prototype, \"el\", {\r\n        get: function () { return getElement(this); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(class_1, \"style\", {\r\n        get: function () { return \".sc-ion-modal-ios-h{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color,#fff);--box-shadow:none;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;contain:strict}.overlay-hidden.sc-ion-modal-ios-h{display:none}.modal-wrapper.sc-ion-modal-ios{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}\\@media only screen and (min-width:768px) and (min-height:600px){.sc-ion-modal-ios-h{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}\\@media only screen and (min-width:768px) and (min-height:768px){.sc-ion-modal-ios-h{--width:600px;--height:600px}}.sc-ion-modal-ios-h{--backdrop-opacity:var(--ion-backdrop-opacity,0.4)}\\@media only screen and (min-width:768px) and (min-height:600px){.sc-ion-modal-ios-h{--border-radius:10px}}.modal-wrapper.sc-ion-modal-ios{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.modal-card.sc-ion-modal-ios-h{--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}.modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios{height:calc(100% - 40px)}.modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios, [dir=rtl].modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios, [dir=rtl] .modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios, [dir=rtl].sc-ion-modal-ios-h -no-combinator.modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios, [dir=rtl] .sc-ion-modal-ios-h -no-combinator.modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:0;border-bottom-left-radius:0}\\@supports (width:max(0px,1px)){.modal-card.sc-ion-modal-ios-h .modal-wrapper.sc-ion-modal-ios{height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return class_1;\r\n}());\r\nvar LIFECYCLE_MAP = {\r\n    'ionModalDidPresent': 'ionViewDidEnter',\r\n    'ionModalWillPresent': 'ionViewWillEnter',\r\n    'ionModalWillDismiss': 'ionViewWillLeave',\r\n    'ionModalDidDismiss': 'ionViewDidLeave',\r\n};\r\nexport { Modal as ion_modal };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar hostContext = function (selector, el) {\r\n    return el.closest(selector) !== null;\r\n};\r\n/**\r\n * Create the mode and color classes for the component based on the classes passed in\r\n */\r\nvar createColorClasses = function (color) {\r\n    var _a;\r\n    return (typeof color === 'string' && color.length > 0) ? (_a = {\r\n            'ion-color': true\r\n        },\r\n        _a[\"ion-color-\" + color] = true,\r\n        _a) : undefined;\r\n};\r\nvar getClassList = function (classes) {\r\n    if (classes !== undefined) {\r\n        var array = Array.isArray(classes) ? classes : classes.split(' ');\r\n        return array\r\n            .filter(function (c) { return c != null; })\r\n            .map(function (c) { return c.trim(); })\r\n            .filter(function (c) { return c !== ''; });\r\n    }\r\n    return [];\r\n};\r\nvar getClassMap = function (classes) {\r\n    var map = {};\r\n    getClassList(classes).forEach(function (c) { return map[c] = true; });\r\n    return map;\r\n};\r\nvar SCHEME = /^[a-z][a-z0-9+\\-.]*:/;\r\nvar openURL = function (url, ev, direction) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var router;\r\n    return __generator(this, function (_a) {\r\n        if (url != null && url[0] !== '#' && !SCHEME.test(url)) {\r\n            router = document.querySelector('ion-router');\r\n            if (router) {\r\n                if (ev != null) {\r\n                    ev.preventDefault();\r\n                }\r\n                return [2 /*return*/, router.push(url, direction)];\r\n            }\r\n        }\r\n        return [2 /*return*/, false];\r\n    });\r\n}); };\r\nexport { createColorClasses as c, getClassMap as g, hostContext as h, openURL as o };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar startHardwareBackButton = function () {\r\n    var doc = document;\r\n    var busy = false;\r\n    doc.addEventListener('backbutton', function () {\r\n        if (busy) {\r\n            return;\r\n        }\r\n        var handlers = [];\r\n        var ev = new CustomEvent('ionBackButton', {\r\n            bubbles: false,\r\n            detail: {\r\n                register: function (priority, handler) {\r\n                    handlers.push({ priority: priority, handler: handler });\r\n                }\r\n            }\r\n        });\r\n        doc.dispatchEvent(ev);\r\n        if (handlers.length > 0) {\r\n            var selectedPriority_1 = Number.MIN_SAFE_INTEGER;\r\n            var selectedHandler_1;\r\n            handlers.forEach(function (_a) {\r\n                var priority = _a.priority, handler = _a.handler;\r\n                if (priority >= selectedPriority_1) {\r\n                    selectedPriority_1 = priority;\r\n                    selectedHandler_1 = handler;\r\n                }\r\n            });\r\n            busy = true;\r\n            executeAction(selectedHandler_1).then(function () { return busy = false; });\r\n        }\r\n    });\r\n};\r\nvar executeAction = function (handler) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, e_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 3, , 4]);\r\n                if (!handler) return [3 /*break*/, 2];\r\n                result = handler();\r\n                if (!(result != null)) return [3 /*break*/, 2];\r\n                return [4 /*yield*/, result];\r\n            case 1:\r\n                _a.sent();\r\n                _a.label = 2;\r\n            case 2: return [3 /*break*/, 4];\r\n            case 3:\r\n                e_1 = _a.sent();\r\n                console.error(e_1);\r\n                return [3 /*break*/, 4];\r\n            case 4: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar OVERLAY_BACK_BUTTON_PRIORITY = 100;\r\nvar MENU_BACK_BUTTON_PRIORITY = 99; // 1 less than overlay priority since menu is displayed behind overlays\r\nexport { MENU_BACK_BUTTON_PRIORITY, OVERLAY_BACK_BUTTON_PRIORITY, startHardwareBackButton };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { j as config } from './core-0428d3c8.js';\r\nimport { OVERLAY_BACK_BUTTON_PRIORITY } from './hardware-back-button-d00923be.js';\r\nvar lastId = 0;\r\nvar activeAnimations = new WeakMap();\r\nvar createController = function (tagName) {\r\n    return {\r\n        create: function (options) {\r\n            return createOverlay(tagName, options);\r\n        },\r\n        dismiss: function (data, role, id) {\r\n            return dismissOverlay(document, data, role, tagName, id);\r\n        },\r\n        getTop: function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2 /*return*/, getOverlay(document, tagName)];\r\n                });\r\n            });\r\n        }\r\n    };\r\n};\r\nvar alertController = /*@__PURE__*/ createController('ion-alert');\r\nvar actionSheetController = /*@__PURE__*/ createController('ion-action-sheet');\r\nvar pickerController = /*@__PURE__*/ createController('ion-picker');\r\nvar popoverController = /*@__PURE__*/ createController('ion-popover');\r\nvar prepareOverlay = function (el) {\r\n    var doc = document;\r\n    connectListeners(doc);\r\n    var overlayIndex = lastId++;\r\n    el.overlayIndex = overlayIndex;\r\n    if (!el.hasAttribute('id')) {\r\n        el.id = \"ion-overlay-\" + overlayIndex;\r\n    }\r\n};\r\nvar createOverlay = function (tagName, opts) {\r\n    return customElements.whenDefined(tagName).then(function () {\r\n        var doc = document;\r\n        var element = doc.createElement(tagName);\r\n        element.classList.add('overlay-hidden');\r\n        // convert the passed in overlay options into props\r\n        // that get passed down into the new overlay\r\n        Object.assign(element, opts);\r\n        // append the overlay element to the document body\r\n        getAppRoot(doc).appendChild(element);\r\n        return element.componentOnReady();\r\n    });\r\n};\r\nvar connectListeners = function (doc) {\r\n    if (lastId === 0) {\r\n        lastId = 1;\r\n        // trap focus inside overlays\r\n        doc.addEventListener('focusin', function (ev) {\r\n            var lastOverlay = getOverlay(doc);\r\n            if (lastOverlay && lastOverlay.backdropDismiss && !isDescendant(lastOverlay, ev.target)) {\r\n                var firstInput = lastOverlay.querySelector('input,button');\r\n                if (firstInput) {\r\n                    firstInput.focus();\r\n                }\r\n            }\r\n        });\r\n        // handle back-button click\r\n        doc.addEventListener('ionBackButton', function (ev) {\r\n            var lastOverlay = getOverlay(doc);\r\n            if (lastOverlay && lastOverlay.backdropDismiss) {\r\n                ev.detail.register(OVERLAY_BACK_BUTTON_PRIORITY, function () {\r\n                    return lastOverlay.dismiss(undefined, BACKDROP);\r\n                });\r\n            }\r\n        });\r\n        // handle ESC to close overlay\r\n        doc.addEventListener('keyup', function (ev) {\r\n            if (ev.key === 'Escape') {\r\n                var lastOverlay = getOverlay(doc);\r\n                if (lastOverlay && lastOverlay.backdropDismiss) {\r\n                    lastOverlay.dismiss(undefined, BACKDROP);\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nvar dismissOverlay = function (doc, data, role, overlayTag, id) {\r\n    var overlay = getOverlay(doc, overlayTag, id);\r\n    if (!overlay) {\r\n        return Promise.reject('overlay does not exist');\r\n    }\r\n    return overlay.dismiss(data, role);\r\n};\r\nvar getOverlays = function (doc, selector) {\r\n    if (selector === undefined) {\r\n        selector = 'ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast';\r\n    }\r\n    return Array.from(doc.querySelectorAll(selector))\r\n        .filter(function (c) { return c.overlayIndex > 0; });\r\n};\r\nvar getOverlay = function (doc, overlayTag, id) {\r\n    var overlays = getOverlays(doc, overlayTag);\r\n    return (id === undefined)\r\n        ? overlays[overlays.length - 1]\r\n        : overlays.find(function (o) { return o.id === id; });\r\n};\r\nvar present = function (overlay, name, iosEnterAnimation, mdEnterAnimation, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var animationBuilder, completed;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (overlay.presented) {\r\n                    return [2 /*return*/];\r\n                }\r\n                overlay.presented = true;\r\n                overlay.willPresent.emit();\r\n                animationBuilder = (overlay.enterAnimation)\r\n                    ? overlay.enterAnimation\r\n                    : config.get(name, overlay.mode === 'ios' ? iosEnterAnimation : mdEnterAnimation);\r\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\r\n            case 1:\r\n                completed = _a.sent();\r\n                if (completed) {\r\n                    overlay.didPresent.emit();\r\n                }\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar dismiss = function (overlay, data, role, name, iosLeaveAnimation, mdLeaveAnimation, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var animationBuilder, err_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (!overlay.presented) {\r\n                    return [2 /*return*/, false];\r\n                }\r\n                overlay.presented = false;\r\n                _a.label = 1;\r\n            case 1:\r\n                _a.trys.push([1, 4, , 5]);\r\n                overlay.willDismiss.emit({ data: data, role: role });\r\n                animationBuilder = (overlay.leaveAnimation)\r\n                    ? overlay.leaveAnimation\r\n                    : config.get(name, overlay.mode === 'ios' ? iosLeaveAnimation : mdLeaveAnimation);\r\n                if (!(role !== 'gesture')) return [3 /*break*/, 3];\r\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\r\n            case 2:\r\n                _a.sent();\r\n                _a.label = 3;\r\n            case 3:\r\n                overlay.didDismiss.emit({ data: data, role: role });\r\n                activeAnimations.delete(overlay);\r\n                return [3 /*break*/, 5];\r\n            case 4:\r\n                err_1 = _a.sent();\r\n                console.error(err_1);\r\n                return [3 /*break*/, 5];\r\n            case 5:\r\n                overlay.el.remove();\r\n                return [2 /*return*/, true];\r\n        }\r\n    });\r\n}); };\r\nvar getAppRoot = function (doc) {\r\n    return doc.querySelector('ion-app') || doc.body;\r\n};\r\nvar overlayAnimation = function (overlay, animationBuilder, baseEl, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var aniRoot, animation, activeAni;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                // Make overlay visible in case it's hidden\r\n                baseEl.classList.remove('overlay-hidden');\r\n                aniRoot = baseEl.shadowRoot || overlay.el;\r\n                animation = animationBuilder(aniRoot, opts);\r\n                if (!overlay.animated || !config.getBoolean('animated', true)) {\r\n                    animation.duration(0);\r\n                }\r\n                if (overlay.keyboardClose) {\r\n                    animation.beforeAddWrite(function () {\r\n                        var activeElement = baseEl.ownerDocument.activeElement;\r\n                        if (activeElement && activeElement.matches('input, ion-input, ion-textarea')) {\r\n                            activeElement.blur();\r\n                        }\r\n                    });\r\n                }\r\n                activeAni = activeAnimations.get(overlay) || [];\r\n                activeAnimations.set(overlay, __spreadArrays(activeAni, [animation]));\r\n                return [4 /*yield*/, animation.play()];\r\n            case 1:\r\n                _a.sent();\r\n                return [2 /*return*/, true];\r\n        }\r\n    });\r\n}); };\r\nvar eventMethod = function (element, eventName) {\r\n    var resolve;\r\n    var promise = new Promise(function (r) { return resolve = r; });\r\n    onceEvent(element, eventName, function (event) {\r\n        resolve(event.detail);\r\n    });\r\n    return promise;\r\n};\r\nvar onceEvent = function (element, eventName, callback) {\r\n    var handler = function (ev) {\r\n        element.removeEventListener(eventName, handler);\r\n        callback(ev);\r\n    };\r\n    element.addEventListener(eventName, handler);\r\n};\r\nvar isCancel = function (role) {\r\n    return role === 'cancel' || role === BACKDROP;\r\n};\r\nvar isDescendant = function (parent, child) {\r\n    while (child) {\r\n        if (child === parent) {\r\n            return true;\r\n        }\r\n        child = child.parentElement;\r\n    }\r\n    return false;\r\n};\r\nvar defaultGate = function (h) { return h(); };\r\nvar safeCall = function (handler, arg) {\r\n    if (typeof handler === 'function') {\r\n        var jmp = config.get('_zoneGate', defaultGate);\r\n        return jmp(function () {\r\n            try {\r\n                return handler(arg);\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n    }\r\n    return undefined;\r\n};\r\nvar BACKDROP = 'backdrop';\r\nexport { BACKDROP as B, present as a, pickerController as b, activeAnimations as c, dismiss as d, eventMethod as e, popoverController as f, actionSheetController as g, alertController as h, isCancel as i, prepareOverlay as p, safeCall as s };\r\n","var GestureController = /** @class */ (function () {\r\n    function GestureController() {\r\n        this.gestureId = 0;\r\n        this.requestedStart = new Map();\r\n        this.disabledGestures = new Map();\r\n        this.disabledScroll = new Set();\r\n    }\r\n    /**\r\n     * Creates a gesture delegate based on the GestureConfig passed\r\n     */\r\n    GestureController.prototype.createGesture = function (config) {\r\n        return new GestureDelegate(this, this.newID(), config.name, config.priority || 0, !!config.disableScroll);\r\n    };\r\n    /**\r\n     * Creates a blocker that will block any other gesture events from firing. Set in the ion-gesture component.\r\n     */\r\n    GestureController.prototype.createBlocker = function (opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        return new BlockerDelegate(this, this.newID(), opts.disable, !!opts.disableScroll);\r\n    };\r\n    GestureController.prototype.start = function (gestureName, id, priority) {\r\n        if (!this.canStart(gestureName)) {\r\n            this.requestedStart.delete(id);\r\n            return false;\r\n        }\r\n        this.requestedStart.set(id, priority);\r\n        return true;\r\n    };\r\n    GestureController.prototype.capture = function (gestureName, id, priority) {\r\n        if (!this.start(gestureName, id, priority)) {\r\n            return false;\r\n        }\r\n        var requestedStart = this.requestedStart;\r\n        var maxPriority = -10000;\r\n        requestedStart.forEach(function (value) {\r\n            maxPriority = Math.max(maxPriority, value);\r\n        });\r\n        if (maxPriority === priority) {\r\n            this.capturedId = id;\r\n            requestedStart.clear();\r\n            var event = new CustomEvent('ionGestureCaptured', { detail: { gestureName: gestureName } });\r\n            document.dispatchEvent(event);\r\n            return true;\r\n        }\r\n        requestedStart.delete(id);\r\n        return false;\r\n    };\r\n    GestureController.prototype.release = function (id) {\r\n        this.requestedStart.delete(id);\r\n        if (this.capturedId === id) {\r\n            this.capturedId = undefined;\r\n        }\r\n    };\r\n    GestureController.prototype.disableGesture = function (gestureName, id) {\r\n        var set = this.disabledGestures.get(gestureName);\r\n        if (set === undefined) {\r\n            set = new Set();\r\n            this.disabledGestures.set(gestureName, set);\r\n        }\r\n        set.add(id);\r\n    };\r\n    GestureController.prototype.enableGesture = function (gestureName, id) {\r\n        var set = this.disabledGestures.get(gestureName);\r\n        if (set !== undefined) {\r\n            set.delete(id);\r\n        }\r\n    };\r\n    GestureController.prototype.disableScroll = function (id) {\r\n        this.disabledScroll.add(id);\r\n        if (this.disabledScroll.size === 1) {\r\n            document.body.classList.add(BACKDROP_NO_SCROLL);\r\n        }\r\n    };\r\n    GestureController.prototype.enableScroll = function (id) {\r\n        this.disabledScroll.delete(id);\r\n        if (this.disabledScroll.size === 0) {\r\n            document.body.classList.remove(BACKDROP_NO_SCROLL);\r\n        }\r\n    };\r\n    GestureController.prototype.canStart = function (gestureName) {\r\n        if (this.capturedId !== undefined) {\r\n            // a gesture already captured\r\n            return false;\r\n        }\r\n        if (this.isDisabled(gestureName)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    GestureController.prototype.isCaptured = function () {\r\n        return this.capturedId !== undefined;\r\n    };\r\n    GestureController.prototype.isScrollDisabled = function () {\r\n        return this.disabledScroll.size > 0;\r\n    };\r\n    GestureController.prototype.isDisabled = function (gestureName) {\r\n        var disabled = this.disabledGestures.get(gestureName);\r\n        if (disabled && disabled.size > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    GestureController.prototype.newID = function () {\r\n        this.gestureId++;\r\n        return this.gestureId;\r\n    };\r\n    return GestureController;\r\n}());\r\nvar GestureDelegate = /** @class */ (function () {\r\n    function GestureDelegate(ctrl, id, name, priority, disableScroll) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.disableScroll = disableScroll;\r\n        this.priority = priority * 1000000 + id;\r\n        this.ctrl = ctrl;\r\n    }\r\n    GestureDelegate.prototype.canStart = function () {\r\n        if (!this.ctrl) {\r\n            return false;\r\n        }\r\n        return this.ctrl.canStart(this.name);\r\n    };\r\n    GestureDelegate.prototype.start = function () {\r\n        if (!this.ctrl) {\r\n            return false;\r\n        }\r\n        return this.ctrl.start(this.name, this.id, this.priority);\r\n    };\r\n    GestureDelegate.prototype.capture = function () {\r\n        if (!this.ctrl) {\r\n            return false;\r\n        }\r\n        var captured = this.ctrl.capture(this.name, this.id, this.priority);\r\n        if (captured && this.disableScroll) {\r\n            this.ctrl.disableScroll(this.id);\r\n        }\r\n        return captured;\r\n    };\r\n    GestureDelegate.prototype.release = function () {\r\n        if (this.ctrl) {\r\n            this.ctrl.release(this.id);\r\n            if (this.disableScroll) {\r\n                this.ctrl.enableScroll(this.id);\r\n            }\r\n        }\r\n    };\r\n    GestureDelegate.prototype.destroy = function () {\r\n        this.release();\r\n        this.ctrl = undefined;\r\n    };\r\n    return GestureDelegate;\r\n}());\r\nvar BlockerDelegate = /** @class */ (function () {\r\n    function BlockerDelegate(ctrl, id, disable, disableScroll) {\r\n        this.id = id;\r\n        this.disable = disable;\r\n        this.disableScroll = disableScroll;\r\n        this.ctrl = ctrl;\r\n    }\r\n    BlockerDelegate.prototype.block = function () {\r\n        if (!this.ctrl) {\r\n            return;\r\n        }\r\n        if (this.disable) {\r\n            for (var _i = 0, _a = this.disable; _i < _a.length; _i++) {\r\n                var gesture = _a[_i];\r\n                this.ctrl.disableGesture(gesture, this.id);\r\n            }\r\n        }\r\n        if (this.disableScroll) {\r\n            this.ctrl.disableScroll(this.id);\r\n        }\r\n    };\r\n    BlockerDelegate.prototype.unblock = function () {\r\n        if (!this.ctrl) {\r\n            return;\r\n        }\r\n        if (this.disable) {\r\n            for (var _i = 0, _a = this.disable; _i < _a.length; _i++) {\r\n                var gesture = _a[_i];\r\n                this.ctrl.enableGesture(gesture, this.id);\r\n            }\r\n        }\r\n        if (this.disableScroll) {\r\n            this.ctrl.enableScroll(this.id);\r\n        }\r\n    };\r\n    BlockerDelegate.prototype.destroy = function () {\r\n        this.unblock();\r\n        this.ctrl = undefined;\r\n    };\r\n    return BlockerDelegate;\r\n}());\r\nvar BACKDROP_NO_SCROLL = 'backdrop-no-scroll';\r\nvar GESTURE_CONTROLLER = new GestureController();\r\nvar addEventListener = function (el, eventName, callback, opts) {\r\n    // use event listener options when supported\r\n    // otherwise it's just a boolean for the \"capture\" arg\r\n    var listenerOpts = supportsPassive(el) ? {\r\n        'capture': !!opts.capture,\r\n        'passive': !!opts.passive,\r\n    } : !!opts.capture;\r\n    var add;\r\n    var remove;\r\n    if (el['__zone_symbol__addEventListener']) {\r\n        add = '__zone_symbol__addEventListener';\r\n        remove = '__zone_symbol__removeEventListener';\r\n    }\r\n    else {\r\n        add = 'addEventListener';\r\n        remove = 'removeEventListener';\r\n    }\r\n    el[add](eventName, callback, listenerOpts);\r\n    return function () {\r\n        el[remove](eventName, callback, listenerOpts);\r\n    };\r\n};\r\nvar supportsPassive = function (node) {\r\n    if (_sPassive === undefined) {\r\n        try {\r\n            var opts = Object.defineProperty({}, 'passive', {\r\n                get: function () {\r\n                    _sPassive = true;\r\n                }\r\n            });\r\n            node.addEventListener('optsTest', function () { return; }, opts);\r\n        }\r\n        catch (e) {\r\n            _sPassive = false;\r\n        }\r\n    }\r\n    return !!_sPassive;\r\n};\r\nvar _sPassive;\r\nvar MOUSE_WAIT = 2000;\r\nvar createPointerEvents = function (el, pointerDown, pointerMove, pointerUp, options) {\r\n    var rmTouchStart;\r\n    var rmTouchMove;\r\n    var rmTouchEnd;\r\n    var rmTouchCancel;\r\n    var rmMouseStart;\r\n    var rmMouseMove;\r\n    var rmMouseUp;\r\n    var lastTouchEvent = 0;\r\n    var handleTouchStart = function (ev) {\r\n        lastTouchEvent = Date.now() + MOUSE_WAIT;\r\n        if (!pointerDown(ev)) {\r\n            return;\r\n        }\r\n        if (!rmTouchMove && pointerMove) {\r\n            rmTouchMove = addEventListener(el, 'touchmove', pointerMove, options);\r\n        }\r\n        if (!rmTouchEnd) {\r\n            rmTouchEnd = addEventListener(el, 'touchend', handleTouchEnd, options);\r\n        }\r\n        if (!rmTouchCancel) {\r\n            rmTouchCancel = addEventListener(el, 'touchcancel', handleTouchEnd, options);\r\n        }\r\n    };\r\n    var handleMouseDown = function (ev) {\r\n        if (lastTouchEvent > Date.now()) {\r\n            return;\r\n        }\r\n        if (!pointerDown(ev)) {\r\n            return;\r\n        }\r\n        if (!rmMouseMove && pointerMove) {\r\n            rmMouseMove = addEventListener(getDocument(el), 'mousemove', pointerMove, options);\r\n        }\r\n        if (!rmMouseUp) {\r\n            rmMouseUp = addEventListener(getDocument(el), 'mouseup', handleMouseUp, options);\r\n        }\r\n    };\r\n    var handleTouchEnd = function (ev) {\r\n        stopTouch();\r\n        if (pointerUp) {\r\n            pointerUp(ev);\r\n        }\r\n    };\r\n    var handleMouseUp = function (ev) {\r\n        stopMouse();\r\n        if (pointerUp) {\r\n            pointerUp(ev);\r\n        }\r\n    };\r\n    var stopTouch = function () {\r\n        if (rmTouchMove) {\r\n            rmTouchMove();\r\n        }\r\n        if (rmTouchEnd) {\r\n            rmTouchEnd();\r\n        }\r\n        if (rmTouchCancel) {\r\n            rmTouchCancel();\r\n        }\r\n        rmTouchMove = rmTouchEnd = rmTouchCancel = undefined;\r\n    };\r\n    var stopMouse = function () {\r\n        if (rmMouseMove) {\r\n            rmMouseMove();\r\n        }\r\n        if (rmMouseUp) {\r\n            rmMouseUp();\r\n        }\r\n        rmMouseMove = rmMouseUp = undefined;\r\n    };\r\n    var stop = function () {\r\n        stopTouch();\r\n        stopMouse();\r\n    };\r\n    var enable = function (isEnabled) {\r\n        if (isEnabled === void 0) { isEnabled = true; }\r\n        if (!isEnabled) {\r\n            if (rmTouchStart) {\r\n                rmTouchStart();\r\n            }\r\n            if (rmMouseStart) {\r\n                rmMouseStart();\r\n            }\r\n            rmTouchStart = rmMouseStart = undefined;\r\n            stop();\r\n        }\r\n        else {\r\n            if (!rmTouchStart) {\r\n                rmTouchStart = addEventListener(el, 'touchstart', handleTouchStart, options);\r\n            }\r\n            if (!rmMouseStart) {\r\n                rmMouseStart = addEventListener(el, 'mousedown', handleMouseDown, options);\r\n            }\r\n        }\r\n    };\r\n    var destroy = function () {\r\n        enable(false);\r\n        pointerUp = pointerMove = pointerDown = undefined;\r\n    };\r\n    return {\r\n        enable: enable,\r\n        stop: stop,\r\n        destroy: destroy\r\n    };\r\n};\r\nvar getDocument = function (node) {\r\n    return node instanceof Document ? node : node.ownerDocument;\r\n};\r\nvar createPanRecognizer = function (direction, thresh, maxAngle) {\r\n    var radians = maxAngle * (Math.PI / 180);\r\n    var isDirX = direction === 'x';\r\n    var maxCosine = Math.cos(radians);\r\n    var threshold = thresh * thresh;\r\n    var startX = 0;\r\n    var startY = 0;\r\n    var dirty = false;\r\n    var isPan = 0;\r\n    return {\r\n        start: function (x, y) {\r\n            startX = x;\r\n            startY = y;\r\n            isPan = 0;\r\n            dirty = true;\r\n        },\r\n        detect: function (x, y) {\r\n            if (!dirty) {\r\n                return false;\r\n            }\r\n            var deltaX = (x - startX);\r\n            var deltaY = (y - startY);\r\n            var distance = deltaX * deltaX + deltaY * deltaY;\r\n            if (distance < threshold) {\r\n                return false;\r\n            }\r\n            var hypotenuse = Math.sqrt(distance);\r\n            var cosine = (isDirX ? deltaX : deltaY) / hypotenuse;\r\n            if (cosine > maxCosine) {\r\n                isPan = 1;\r\n            }\r\n            else if (cosine < -maxCosine) {\r\n                isPan = -1;\r\n            }\r\n            else {\r\n                isPan = 0;\r\n            }\r\n            dirty = false;\r\n            return true;\r\n        },\r\n        isGesture: function () {\r\n            return isPan !== 0;\r\n        },\r\n        getDirection: function () {\r\n            return isPan;\r\n        }\r\n    };\r\n};\r\nvar createGesture = function (config) {\r\n    var hasCapturedPan = false;\r\n    var hasStartedPan = false;\r\n    var hasFiredStart = true;\r\n    var isMoveQueued = false;\r\n    var finalConfig = Object.assign({ disableScroll: false, direction: 'x', gesturePriority: 0, passive: true, maxAngle: 40, threshold: 10 }, config);\r\n    var canStart = finalConfig.canStart;\r\n    var onWillStart = finalConfig.onWillStart;\r\n    var onStart = finalConfig.onStart;\r\n    var onEnd = finalConfig.onEnd;\r\n    var notCaptured = finalConfig.notCaptured;\r\n    var onMove = finalConfig.onMove;\r\n    var threshold = finalConfig.threshold;\r\n    var detail = {\r\n        type: 'pan',\r\n        startX: 0,\r\n        startY: 0,\r\n        startTime: 0,\r\n        currentX: 0,\r\n        currentY: 0,\r\n        velocityX: 0,\r\n        velocityY: 0,\r\n        deltaX: 0,\r\n        deltaY: 0,\r\n        currentTime: 0,\r\n        event: undefined,\r\n        data: undefined\r\n    };\r\n    var pan = createPanRecognizer(finalConfig.direction, finalConfig.threshold, finalConfig.maxAngle);\r\n    var gesture = GESTURE_CONTROLLER.createGesture({\r\n        name: config.gestureName,\r\n        priority: config.gesturePriority,\r\n        disableScroll: config.disableScroll\r\n    });\r\n    var pointerDown = function (ev) {\r\n        var timeStamp = now(ev);\r\n        if (hasStartedPan || !hasFiredStart) {\r\n            return false;\r\n        }\r\n        updateDetail(ev, detail);\r\n        detail.startX = detail.currentX;\r\n        detail.startY = detail.currentY;\r\n        detail.startTime = detail.currentTime = timeStamp;\r\n        detail.velocityX = detail.velocityY = detail.deltaX = detail.deltaY = 0;\r\n        detail.event = ev;\r\n        // Check if gesture can start\r\n        if (canStart && canStart(detail) === false) {\r\n            return false;\r\n        }\r\n        // Release fallback\r\n        gesture.release();\r\n        // Start gesture\r\n        if (!gesture.start()) {\r\n            return false;\r\n        }\r\n        hasStartedPan = true;\r\n        if (threshold === 0) {\r\n            return tryToCapturePan();\r\n        }\r\n        pan.start(detail.startX, detail.startY);\r\n        return true;\r\n    };\r\n    var pointerMove = function (ev) {\r\n        // fast path, if gesture is currently captured\r\n        // do minimum job to get user-land even dispatched\r\n        if (hasCapturedPan) {\r\n            if (!isMoveQueued && hasFiredStart) {\r\n                isMoveQueued = true;\r\n                calcGestureData(detail, ev);\r\n                requestAnimationFrame(fireOnMove);\r\n            }\r\n            return;\r\n        }\r\n        // gesture is currently being detected\r\n        calcGestureData(detail, ev);\r\n        if (pan.detect(detail.currentX, detail.currentY)) {\r\n            if (!pan.isGesture() || !tryToCapturePan()) {\r\n                abortGesture();\r\n            }\r\n        }\r\n    };\r\n    var fireOnMove = function () {\r\n        // Since fireOnMove is called inside a RAF, onEnd() might be called,\r\n        // we must double check hasCapturedPan\r\n        if (!hasCapturedPan) {\r\n            return;\r\n        }\r\n        isMoveQueued = false;\r\n        if (onMove) {\r\n            onMove(detail);\r\n        }\r\n    };\r\n    var tryToCapturePan = function () {\r\n        if (gesture && !gesture.capture()) {\r\n            return false;\r\n        }\r\n        hasCapturedPan = true;\r\n        hasFiredStart = false;\r\n        // reset start position since the real user-land event starts here\r\n        // If the pan detector threshold is big, not resetting the start position\r\n        // will cause a jump in the animation equal to the detector threshold.\r\n        // the array of positions used to calculate the gesture velocity does not\r\n        // need to be cleaned, more points in the positions array always results in a\r\n        // more accurate value of the velocity.\r\n        detail.startX = detail.currentX;\r\n        detail.startY = detail.currentY;\r\n        detail.startTime = detail.currentTime;\r\n        if (onWillStart) {\r\n            onWillStart(detail).then(fireOnStart);\r\n        }\r\n        else {\r\n            fireOnStart();\r\n        }\r\n        return true;\r\n    };\r\n    var fireOnStart = function () {\r\n        if (onStart) {\r\n            onStart(detail);\r\n        }\r\n        hasFiredStart = true;\r\n    };\r\n    var reset = function () {\r\n        hasCapturedPan = false;\r\n        hasStartedPan = false;\r\n        isMoveQueued = false;\r\n        hasFiredStart = true;\r\n        gesture.release();\r\n    };\r\n    // END *************************\r\n    var pointerUp = function (ev) {\r\n        var tmpHasCaptured = hasCapturedPan;\r\n        var tmpHasFiredStart = hasFiredStart;\r\n        reset();\r\n        if (!tmpHasFiredStart) {\r\n            return;\r\n        }\r\n        calcGestureData(detail, ev);\r\n        // Try to capture press\r\n        if (tmpHasCaptured) {\r\n            if (onEnd) {\r\n                onEnd(detail);\r\n            }\r\n            return;\r\n        }\r\n        // Not captured any event\r\n        if (notCaptured) {\r\n            notCaptured(detail);\r\n        }\r\n    };\r\n    var pointerEvents = createPointerEvents(finalConfig.el, pointerDown, pointerMove, pointerUp, {\r\n        capture: false,\r\n    });\r\n    var abortGesture = function () {\r\n        reset();\r\n        pointerEvents.stop();\r\n        if (notCaptured) {\r\n            notCaptured(detail);\r\n        }\r\n    };\r\n    return {\r\n        enable: function (enable) {\r\n            if (enable === void 0) { enable = true; }\r\n            if (!enable) {\r\n                if (hasCapturedPan) {\r\n                    pointerUp(undefined);\r\n                }\r\n                reset();\r\n            }\r\n            pointerEvents.enable(enable);\r\n        },\r\n        destroy: function () {\r\n            gesture.destroy();\r\n            pointerEvents.destroy();\r\n        }\r\n    };\r\n};\r\nvar calcGestureData = function (detail, ev) {\r\n    if (!ev) {\r\n        return;\r\n    }\r\n    var prevX = detail.currentX;\r\n    var prevY = detail.currentY;\r\n    var prevT = detail.currentTime;\r\n    updateDetail(ev, detail);\r\n    var currentX = detail.currentX;\r\n    var currentY = detail.currentY;\r\n    var timestamp = detail.currentTime = now(ev);\r\n    var timeDelta = timestamp - prevT;\r\n    if (timeDelta > 0 && timeDelta < 100) {\r\n        var velocityX = (currentX - prevX) / timeDelta;\r\n        var velocityY = (currentY - prevY) / timeDelta;\r\n        detail.velocityX = velocityX * 0.7 + detail.velocityX * 0.3;\r\n        detail.velocityY = velocityY * 0.7 + detail.velocityY * 0.3;\r\n    }\r\n    detail.deltaX = currentX - detail.startX;\r\n    detail.deltaY = currentY - detail.startY;\r\n    detail.event = ev;\r\n};\r\nvar updateDetail = function (ev, detail) {\r\n    // get X coordinates for either a mouse click\r\n    // or a touch depending on the given event\r\n    var x = 0;\r\n    var y = 0;\r\n    if (ev) {\r\n        var changedTouches = ev.changedTouches;\r\n        if (changedTouches && changedTouches.length > 0) {\r\n            var touch = changedTouches[0];\r\n            x = touch.clientX;\r\n            y = touch.clientY;\r\n        }\r\n        else if (ev.pageX !== undefined) {\r\n            x = ev.pageX;\r\n            y = ev.pageY;\r\n        }\r\n    }\r\n    detail.currentX = x;\r\n    detail.currentY = y;\r\n};\r\nvar now = function (ev) {\r\n    return ev.timeStamp || Date.now();\r\n};\r\nexport { GESTURE_CONTROLLER, createGesture };\r\n","var LIFECYCLE_WILL_ENTER = 'ionViewWillEnter';\r\nvar LIFECYCLE_DID_ENTER = 'ionViewDidEnter';\r\nvar LIFECYCLE_WILL_LEAVE = 'ionViewWillLeave';\r\nvar LIFECYCLE_DID_LEAVE = 'ionViewDidLeave';\r\nvar LIFECYCLE_WILL_UNLOAD = 'ionViewWillUnload';\r\nexport { LIFECYCLE_WILL_LEAVE as L, LIFECYCLE_WILL_ENTER as a, LIFECYCLE_DID_ENTER as b, LIFECYCLE_DID_LEAVE as c, LIFECYCLE_WILL_UNLOAD as d };\r\n","/**\r\n * Based on:\r\n * https://stackoverflow.com/questions/7348009/y-coordinate-for-a-given-x-cubic-bezier\r\n * https://math.stackexchange.com/questions/26846/is-there-an-explicit-form-for-cubic-b%C3%A9zier-curves\r\n * TODO: Reduce rounding error\r\n */\r\n/**\r\n * EXPERIMENTAL\r\n * Given a cubic-bezier curve, get the x value (time) given\r\n * the y value (progression).\r\n * Ex: cubic-bezier(0.32, 0.72, 0, 1);\r\n * P0: (0, 0)\r\n * P1: (0.32, 0.72)\r\n * P2: (0, 1)\r\n * P3: (1, 1)\r\n *\r\n * If you give a cubic bezier curve that never reaches the\r\n * provided progression, this function will return an empty array.\r\n */\r\nvar getTimeGivenProgression = function (p0, p1, p2, p3, progression) {\r\n    return solveCubicBezier(p0[1], p1[1], p2[1], p3[1], progression).map(function (tValue) {\r\n        return solveCubicParametricEquation(p0[0], p1[0], p2[0], p3[0], tValue);\r\n    });\r\n};\r\n/**\r\n * Solve a cubic equation in one dimension (time)\r\n */\r\nvar solveCubicParametricEquation = function (p0, p1, p2, p3, t) {\r\n    var partA = (3 * p1) * Math.pow(t - 1, 2);\r\n    var partB = (-3 * p2 * t) + (3 * p2) + (p3 * t);\r\n    var partC = p0 * Math.pow(t - 1, 3);\r\n    return t * (partA + (t * partB)) - partC;\r\n};\r\n/**\r\n * Find the `t` value for a cubic bezier using Cardano's formula\r\n */\r\nvar solveCubicBezier = function (p0, p1, p2, p3, refPoint) {\r\n    p0 -= refPoint;\r\n    p1 -= refPoint;\r\n    p2 -= refPoint;\r\n    p3 -= refPoint;\r\n    var roots = solveCubicEquation(p3 - 3 * p2 + 3 * p1 - p0, 3 * p2 - 6 * p1 + 3 * p0, 3 * p1 - 3 * p0, p0);\r\n    return roots.filter(function (root) { return root >= 0 && root <= 1; });\r\n};\r\nvar solveQuadraticEquation = function (a, b, c) {\r\n    var discriminant = b * b - 4 * a * c;\r\n    if (discriminant < 0) {\r\n        return [];\r\n    }\r\n    else {\r\n        return [\r\n            (-b + Math.sqrt(discriminant)) / (2 * a),\r\n            (-b - Math.sqrt(discriminant)) / (2 * a)\r\n        ];\r\n    }\r\n};\r\nvar solveCubicEquation = function (a, b, c, d) {\r\n    if (a === 0) {\r\n        return solveQuadraticEquation(b, c, d);\r\n    }\r\n    b /= a;\r\n    c /= a;\r\n    d /= a;\r\n    var p = (3 * c - b * b) / 3;\r\n    var q = (2 * b * b * b - 9 * b * c + 27 * d) / 27;\r\n    if (p === 0) {\r\n        return [Math.pow(-q, 1 / 3)];\r\n    }\r\n    else if (q === 0) {\r\n        return [Math.sqrt(-p), -Math.sqrt(-p)];\r\n    }\r\n    var discriminant = Math.pow(q / 2, 2) + Math.pow(p / 3, 3);\r\n    if (discriminant === 0) {\r\n        return [Math.pow(q / 2, 1 / 2) - b / 3];\r\n    }\r\n    else if (discriminant > 0) {\r\n        return [Math.pow(-(q / 2) + Math.sqrt(discriminant), 1 / 3) - Math.pow((q / 2) + Math.sqrt(discriminant), 1 / 3) - b / 3];\r\n    }\r\n    var r = Math.sqrt(Math.pow(-(p / 3), 3));\r\n    var phi = Math.acos(-(q / (2 * Math.sqrt(Math.pow(-(p / 3), 3)))));\r\n    var s = 2 * Math.pow(r, 1 / 3);\r\n    return [\r\n        s * Math.cos(phi / 3) - b / 3,\r\n        s * Math.cos((phi + 2 * Math.PI) / 3) - b / 3,\r\n        s * Math.cos((phi + 4 * Math.PI) / 3) - b / 3\r\n    ];\r\n};\r\nexport { getTimeGivenProgression as g };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar attachComponent = function (delegate, container, component, cssClasses, componentProps) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var el;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (delegate) {\r\n                    return [2 /*return*/, delegate.attachViewToDom(container, component, componentProps, cssClasses)];\r\n                }\r\n                if (typeof component !== 'string' && !(component instanceof HTMLElement)) {\r\n                    throw new Error('framework delegate is missing');\r\n                }\r\n                el = (typeof component === 'string')\r\n                    ? container.ownerDocument && container.ownerDocument.createElement(component)\r\n                    : component;\r\n                if (cssClasses) {\r\n                    cssClasses.forEach(function (c) { return el.classList.add(c); });\r\n                }\r\n                if (componentProps) {\r\n                    Object.assign(el, componentProps);\r\n                }\r\n                container.appendChild(el);\r\n                if (!el.componentOnReady) return [3 /*break*/, 2];\r\n                return [4 /*yield*/, el.componentOnReady()];\r\n            case 1:\r\n                _a.sent();\r\n                _a.label = 2;\r\n            case 2: return [2 /*return*/, el];\r\n        }\r\n    });\r\n}); };\r\nvar detachComponent = function (delegate, element) {\r\n    if (element) {\r\n        if (delegate) {\r\n            var container = element.parentElement;\r\n            return delegate.removeViewFromDom(container, element);\r\n        }\r\n        element.remove();\r\n    }\r\n    return Promise.resolve();\r\n};\r\nexport { attachComponent as a, detachComponent as d };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { w as writeTask } from './core-0428d3c8.js';\r\nimport { L as LIFECYCLE_WILL_LEAVE, a as LIFECYCLE_WILL_ENTER, b as LIFECYCLE_DID_ENTER, c as LIFECYCLE_DID_LEAVE } from './constants-7647fb9e.js';\r\nvar iosTransitionAnimation = function () { return import('./ios.transition-8502398f.js'); };\r\nvar mdTransitionAnimation = function () { return import('./md.transition-009b990b.js'); };\r\nvar transition = function (opts) {\r\n    return new Promise(function (resolve, reject) {\r\n        writeTask(function () {\r\n            beforeTransition(opts);\r\n            runTransition(opts).then(function (result) {\r\n                if (result.animation) {\r\n                    result.animation.destroy();\r\n                }\r\n                afterTransition(opts);\r\n                resolve(result);\r\n            }, function (error) {\r\n                afterTransition(opts);\r\n                reject(error);\r\n            });\r\n        });\r\n    });\r\n};\r\nvar beforeTransition = function (opts) {\r\n    var enteringEl = opts.enteringEl;\r\n    var leavingEl = opts.leavingEl;\r\n    setZIndex(enteringEl, leavingEl, opts.direction);\r\n    if (opts.showGoBack) {\r\n        enteringEl.classList.add('can-go-back');\r\n    }\r\n    else {\r\n        enteringEl.classList.remove('can-go-back');\r\n    }\r\n    setPageHidden(enteringEl, false);\r\n    if (leavingEl) {\r\n        setPageHidden(leavingEl, false);\r\n    }\r\n};\r\nvar runTransition = function (opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var animationBuilder, ani;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, getAnimationBuilder(opts)];\r\n            case 1:\r\n                animationBuilder = _a.sent();\r\n                ani = (animationBuilder)\r\n                    ? animation(animationBuilder, opts)\r\n                    : noAnimation(opts);\r\n                return [2 /*return*/, ani];\r\n        }\r\n    });\r\n}); };\r\nvar afterTransition = function (opts) {\r\n    var enteringEl = opts.enteringEl;\r\n    var leavingEl = opts.leavingEl;\r\n    enteringEl.classList.remove('ion-page-invisible');\r\n    if (leavingEl !== undefined) {\r\n        leavingEl.classList.remove('ion-page-invisible');\r\n    }\r\n};\r\nvar getAnimationBuilder = function (opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var getAnimation, _a;\r\n    return __generator(this, function (_b) {\r\n        switch (_b.label) {\r\n            case 0:\r\n                if (!opts.leavingEl || !opts.animated || opts.duration === 0) {\r\n                    return [2 /*return*/, undefined];\r\n                }\r\n                if (opts.animationBuilder) {\r\n                    return [2 /*return*/, opts.animationBuilder];\r\n                }\r\n                if (!(opts.mode === 'ios')) return [3 /*break*/, 2];\r\n                return [4 /*yield*/, iosTransitionAnimation()];\r\n            case 1:\r\n                _a = (_b.sent()).iosTransitionAnimation;\r\n                return [3 /*break*/, 4];\r\n            case 2: return [4 /*yield*/, mdTransitionAnimation()];\r\n            case 3:\r\n                _a = (_b.sent()).mdTransitionAnimation;\r\n                _b.label = 4;\r\n            case 4:\r\n                getAnimation = _a;\r\n                return [2 /*return*/, getAnimation];\r\n        }\r\n    });\r\n}); };\r\nvar animation = function (animationBuilder, opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var trans, didComplete;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, waitForReady(opts, true)];\r\n            case 1:\r\n                _a.sent();\r\n                trans = animationBuilder(opts.baseEl, opts);\r\n                fireWillEvents(opts.enteringEl, opts.leavingEl);\r\n                return [4 /*yield*/, playTransition(trans, opts)];\r\n            case 2:\r\n                didComplete = _a.sent();\r\n                if (opts.progressCallback) {\r\n                    opts.progressCallback(undefined);\r\n                }\r\n                if (didComplete) {\r\n                    fireDidEvents(opts.enteringEl, opts.leavingEl);\r\n                }\r\n                return [2 /*return*/, {\r\n                        hasCompleted: didComplete,\r\n                        animation: trans\r\n                    }];\r\n        }\r\n    });\r\n}); };\r\nvar noAnimation = function (opts) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var enteringEl, leavingEl;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                enteringEl = opts.enteringEl;\r\n                leavingEl = opts.leavingEl;\r\n                return [4 /*yield*/, waitForReady(opts, false)];\r\n            case 1:\r\n                _a.sent();\r\n                fireWillEvents(enteringEl, leavingEl);\r\n                fireDidEvents(enteringEl, leavingEl);\r\n                return [2 /*return*/, {\r\n                        hasCompleted: true\r\n                    }];\r\n        }\r\n    });\r\n}); };\r\nvar waitForReady = function (opts, defaultDeep) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var deep, promises;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                deep = opts.deepWait !== undefined ? opts.deepWait : defaultDeep;\r\n                promises = deep ? [\r\n                    deepReady(opts.enteringEl),\r\n                    deepReady(opts.leavingEl),\r\n                ] : [\r\n                    shallowReady(opts.enteringEl),\r\n                    shallowReady(opts.leavingEl),\r\n                ];\r\n                return [4 /*yield*/, Promise.all(promises)];\r\n            case 1:\r\n                _a.sent();\r\n                return [4 /*yield*/, notifyViewReady(opts.viewIsReady, opts.enteringEl)];\r\n            case 2:\r\n                _a.sent();\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar notifyViewReady = function (viewIsReady, enteringEl) { return __awaiter(void 0, void 0, void 0, function () {\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (!viewIsReady) return [3 /*break*/, 2];\r\n                return [4 /*yield*/, viewIsReady(enteringEl)];\r\n            case 1:\r\n                _a.sent();\r\n                _a.label = 2;\r\n            case 2: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar playTransition = function (trans, opts) {\r\n    var progressCallback = opts.progressCallback;\r\n    var promise = new Promise(function (resolve) {\r\n        trans.onFinish(function (currentStep) { return resolve(currentStep === 1); });\r\n    });\r\n    // cool, let's do this, start the transition\r\n    if (progressCallback) {\r\n        // this is a swipe to go back, just get the transition progress ready\r\n        // kick off the swipe animation start\r\n        trans.progressStart(true);\r\n        progressCallback(trans);\r\n    }\r\n    else {\r\n        // only the top level transition should actually start \"play\"\r\n        // kick it off and let it play through\r\n        // ******** DOM WRITE ****************\r\n        trans.play();\r\n    }\r\n    // create a callback for when the animation is done\r\n    return promise;\r\n};\r\nvar fireWillEvents = function (enteringEl, leavingEl) {\r\n    lifecycle(leavingEl, LIFECYCLE_WILL_LEAVE);\r\n    lifecycle(enteringEl, LIFECYCLE_WILL_ENTER);\r\n};\r\nvar fireDidEvents = function (enteringEl, leavingEl) {\r\n    lifecycle(enteringEl, LIFECYCLE_DID_ENTER);\r\n    lifecycle(leavingEl, LIFECYCLE_DID_LEAVE);\r\n};\r\nvar lifecycle = function (el, eventName) {\r\n    if (el) {\r\n        var ev = new CustomEvent(eventName, {\r\n            bubbles: false,\r\n            cancelable: false,\r\n        });\r\n        el.dispatchEvent(ev);\r\n    }\r\n};\r\nvar shallowReady = function (el) {\r\n    if (el && el.componentOnReady) {\r\n        return el.componentOnReady();\r\n    }\r\n    return Promise.resolve();\r\n};\r\nvar deepReady = function (el) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var element, stencilEl;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                element = el;\r\n                if (!element) return [3 /*break*/, 4];\r\n                if (!(element.componentOnReady != null)) return [3 /*break*/, 2];\r\n                return [4 /*yield*/, element.componentOnReady()];\r\n            case 1:\r\n                stencilEl = _a.sent();\r\n                if (stencilEl != null) {\r\n                    return [2 /*return*/];\r\n                }\r\n                _a.label = 2;\r\n            case 2: return [4 /*yield*/, Promise.all(Array.from(element.children).map(deepReady))];\r\n            case 3:\r\n                _a.sent();\r\n                _a.label = 4;\r\n            case 4: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar setPageHidden = function (el, hidden) {\r\n    if (hidden) {\r\n        el.setAttribute('aria-hidden', 'true');\r\n        el.classList.add('ion-page-hidden');\r\n    }\r\n    else {\r\n        el.hidden = false;\r\n        el.removeAttribute('aria-hidden');\r\n        el.classList.remove('ion-page-hidden');\r\n    }\r\n};\r\nvar setZIndex = function (enteringEl, leavingEl, direction) {\r\n    if (enteringEl !== undefined) {\r\n        enteringEl.style.zIndex = (direction === 'back')\r\n            ? '99'\r\n            : '101';\r\n    }\r\n    if (leavingEl !== undefined) {\r\n        leavingEl.style.zIndex = '100';\r\n    }\r\n};\r\nvar getIonPageElement = function (element) {\r\n    if (element.classList.contains('ion-page')) {\r\n        return element;\r\n    }\r\n    var ionPage = element.querySelector(':scope > .ion-page, :scope > ion-nav, :scope > ion-tabs');\r\n    if (ionPage) {\r\n        return ionPage;\r\n    }\r\n    // idk, return the original element so at least something animates and we don't have a null pointer\r\n    return element;\r\n};\r\nexport { deepReady as d, getIonPageElement as g, lifecycle as l, setPageHidden as s, transition as t };\r\n"],"sourceRoot":""}