{"version":3,"sources":["webpack:///./node_modules/iiif-explorer/dist/esm-es5/helpers-b7c9db54.js","webpack:///./node_modules/iiif-explorer/dist/esm-es5/tap-click-9cf5d0f6.js"],"names":["__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","raf","h","__zone_symbol__requestAnimationFrame","requestAnimationFrame","setTimeout","hasShadowDom","el","shadowRoot","attachShadow","findItemLabel","componentEl","itemEl","closest","querySelector","renderHiddenInput","always","container","name","value","disabled","input","ownerDocument","createElement","type","classList","add","appendChild","clamp","min","n","max","Math","assert","actual","reason","message","console","error","Error","now","ev","timeStamp","Date","pointerCoord","changedTouches","touch","x","clientX","y","clientY","undefined","pageX","pageY","isEndSide","side","isRTL","document","dir","debounceEvent","event","wait","original","_original","emit","debounce","bind","func","timer","args","_i","clearTimeout","apply","startTapClick","config","scrollingEl","activatableEle","activeRipple","activeDefer","lastTouch","MOUSE_WAIT","lastActivated","useRippleEffect","getBoolean","clearDefers","WeakMap","onTouchEnd","pointerUp","cancelActive","removeActivated","pointerDown","parentElement","setActivatedElement","getActivatableTarget","_a","has","contains","ACTIVATED","addActivated","deferId","get","delete","delay","isInstant","ADD_ACTIVATED_DEFERS","remove","rippleEffect","getRippleEffect","addRipple","removeRipple","then","smooth","active","time","CLEAR_STATE_DEFERS","set","doc","addEventListener","target","t","composedPath","path","ripple"],"mappings":"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","file":"64.cbabe122a4c685257875.js","sourcesContent":["var __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n/**\r\n * Patched version of requestAnimationFrame that avoids ngzone\r\n * Use only when you know ngzone should not run\r\n */\r\nvar raf = function (h) {\r\n    if (typeof __zone_symbol__requestAnimationFrame === 'function') {\r\n        return __zone_symbol__requestAnimationFrame(h);\r\n    }\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        return requestAnimationFrame(h);\r\n    }\r\n    return setTimeout(h);\r\n};\r\nvar hasShadowDom = function (el) {\r\n    return !!el.shadowRoot && !!el.attachShadow;\r\n};\r\nvar findItemLabel = function (componentEl) {\r\n    var itemEl = componentEl.closest('ion-item');\r\n    if (itemEl) {\r\n        return itemEl.querySelector('ion-label');\r\n    }\r\n    return null;\r\n};\r\nvar renderHiddenInput = function (always, container, name, value, disabled) {\r\n    if (always || hasShadowDom(container)) {\r\n        var input = container.querySelector('input.aux-input');\r\n        if (!input) {\r\n            input = container.ownerDocument.createElement('input');\r\n            input.type = 'hidden';\r\n            input.classList.add('aux-input');\r\n            container.appendChild(input);\r\n        }\r\n        input.disabled = disabled;\r\n        input.name = name;\r\n        input.value = value || '';\r\n    }\r\n};\r\nvar clamp = function (min, n, max) {\r\n    return Math.max(min, Math.min(n, max));\r\n};\r\nvar assert = function (actual, reason) {\r\n    if (!actual) {\r\n        var message = 'ASSERT: ' + reason;\r\n        console.error(message);\r\n        debugger; // tslint:disable-line\r\n        throw new Error(message);\r\n    }\r\n};\r\nvar now = function (ev) {\r\n    return ev.timeStamp || Date.now();\r\n};\r\nvar pointerCoord = function (ev) {\r\n    // get X coordinates for either a mouse click\r\n    // or a touch depending on the given event\r\n    if (ev) {\r\n        var changedTouches = ev.changedTouches;\r\n        if (changedTouches && changedTouches.length > 0) {\r\n            var touch = changedTouches[0];\r\n            return { x: touch.clientX, y: touch.clientY };\r\n        }\r\n        if (ev.pageX !== undefined) {\r\n            return { x: ev.pageX, y: ev.pageY };\r\n        }\r\n    }\r\n    return { x: 0, y: 0 };\r\n};\r\n/**\r\n * @hidden\r\n * Given a side, return if it should be on the end\r\n * based on the value of dir\r\n * @param side the side\r\n * @param isRTL whether the application dir is rtl\r\n */\r\nvar isEndSide = function (side) {\r\n    var isRTL = document.dir === 'rtl';\r\n    switch (side) {\r\n        case 'start': return isRTL;\r\n        case 'end': return !isRTL;\r\n        default:\r\n            throw new Error(\"\\\"\" + side + \"\\\" is not a valid value for [side]. Use \\\"start\\\" or \\\"end\\\" instead.\");\r\n    }\r\n};\r\nvar debounceEvent = function (event, wait) {\r\n    var original = event._original || event;\r\n    return {\r\n        _original: event,\r\n        emit: debounce(original.emit.bind(original), wait)\r\n    };\r\n};\r\nvar debounce = function (func, wait) {\r\n    if (wait === void 0) { wait = 0; }\r\n    var timer;\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        clearTimeout(timer);\r\n        timer = setTimeout.apply(void 0, __spreadArrays([func, wait], args));\r\n    };\r\n};\r\nexport { renderHiddenInput as a, assert as b, clamp as c, debounceEvent as d, debounce as e, findItemLabel as f, hasShadowDom as h, isEndSide as i, now as n, pointerCoord as p, raf as r };\r\n","import { n as now, p as pointerCoord } from './helpers-b7c9db54.js';\r\nvar startTapClick = function (config) {\r\n    var lastTouch = -MOUSE_WAIT * 10;\r\n    var lastActivated = 0;\r\n    var scrollingEl;\r\n    var activatableEle;\r\n    var activeRipple;\r\n    var activeDefer;\r\n    var useRippleEffect = config.getBoolean('animated', true) && config.getBoolean('rippleEffect', true);\r\n    var clearDefers = new WeakMap();\r\n    var isScrolling = function () {\r\n        return scrollingEl !== undefined && scrollingEl.parentElement !== null;\r\n    };\r\n    // Touch Events\r\n    var onTouchStart = function (ev) {\r\n        lastTouch = now(ev);\r\n        pointerDown(ev);\r\n    };\r\n    var onTouchEnd = function (ev) {\r\n        lastTouch = now(ev);\r\n        pointerUp(ev);\r\n    };\r\n    var onMouseDown = function (ev) {\r\n        var t = now(ev) - MOUSE_WAIT;\r\n        if (lastTouch < t) {\r\n            pointerDown(ev);\r\n        }\r\n    };\r\n    var onMouseUp = function (ev) {\r\n        var t = now(ev) - MOUSE_WAIT;\r\n        if (lastTouch < t) {\r\n            pointerUp(ev);\r\n        }\r\n    };\r\n    var cancelActive = function () {\r\n        clearTimeout(activeDefer);\r\n        activeDefer = undefined;\r\n        if (activatableEle) {\r\n            removeActivated(false);\r\n            activatableEle = undefined;\r\n        }\r\n    };\r\n    var pointerDown = function (ev) {\r\n        if (activatableEle || isScrolling()) {\r\n            return;\r\n        }\r\n        scrollingEl = undefined;\r\n        setActivatedElement(getActivatableTarget(ev), ev);\r\n    };\r\n    var pointerUp = function (ev) {\r\n        setActivatedElement(undefined, ev);\r\n    };\r\n    var setActivatedElement = function (el, ev) {\r\n        // do nothing\r\n        if (el && el === activatableEle) {\r\n            return;\r\n        }\r\n        clearTimeout(activeDefer);\r\n        activeDefer = undefined;\r\n        var _a = pointerCoord(ev), x = _a.x, y = _a.y;\r\n        // deactivate selected\r\n        if (activatableEle) {\r\n            if (clearDefers.has(activatableEle)) {\r\n                throw new Error('internal error');\r\n            }\r\n            if (!activatableEle.classList.contains(ACTIVATED)) {\r\n                addActivated(activatableEle, x, y);\r\n            }\r\n            removeActivated(true);\r\n        }\r\n        // activate\r\n        if (el) {\r\n            var deferId = clearDefers.get(el);\r\n            if (deferId) {\r\n                clearTimeout(deferId);\r\n                clearDefers.delete(el);\r\n            }\r\n            var delay = isInstant(el) ? 0 : ADD_ACTIVATED_DEFERS;\r\n            el.classList.remove(ACTIVATED);\r\n            activeDefer = setTimeout(function () {\r\n                addActivated(el, x, y);\r\n                activeDefer = undefined;\r\n            }, delay);\r\n        }\r\n        activatableEle = el;\r\n    };\r\n    var addActivated = function (el, x, y) {\r\n        lastActivated = Date.now();\r\n        el.classList.add(ACTIVATED);\r\n        var rippleEffect = useRippleEffect && getRippleEffect(el);\r\n        if (rippleEffect && rippleEffect.addRipple) {\r\n            removeRipple();\r\n            activeRipple = rippleEffect.addRipple(x, y);\r\n        }\r\n    };\r\n    var removeRipple = function () {\r\n        if (activeRipple !== undefined) {\r\n            activeRipple.then(function (remove) { return remove(); });\r\n            activeRipple = undefined;\r\n        }\r\n    };\r\n    var removeActivated = function (smooth) {\r\n        removeRipple();\r\n        var active = activatableEle;\r\n        if (!active) {\r\n            return;\r\n        }\r\n        var time = CLEAR_STATE_DEFERS - Date.now() + lastActivated;\r\n        if (smooth && time > 0 && !isInstant(active)) {\r\n            var deferId = setTimeout(function () {\r\n                active.classList.remove(ACTIVATED);\r\n                clearDefers.delete(active);\r\n            }, CLEAR_STATE_DEFERS);\r\n            clearDefers.set(active, deferId);\r\n        }\r\n        else {\r\n            active.classList.remove(ACTIVATED);\r\n        }\r\n    };\r\n    var doc = document;\r\n    doc.addEventListener('ionScrollStart', function (ev) {\r\n        scrollingEl = ev.target;\r\n        cancelActive();\r\n    });\r\n    doc.addEventListener('ionScrollEnd', function () {\r\n        scrollingEl = undefined;\r\n    });\r\n    doc.addEventListener('ionGestureCaptured', cancelActive);\r\n    doc.addEventListener('touchstart', onTouchStart, true);\r\n    doc.addEventListener('touchcancel', onTouchEnd, true);\r\n    doc.addEventListener('touchend', onTouchEnd, true);\r\n    doc.addEventListener('mousedown', onMouseDown, true);\r\n    doc.addEventListener('mouseup', onMouseUp, true);\r\n};\r\nvar getActivatableTarget = function (ev) {\r\n    if (ev.composedPath) {\r\n        var path = ev.composedPath();\r\n        for (var i = 0; i < path.length - 2; i++) {\r\n            var el = path[i];\r\n            if (el.classList && el.classList.contains('ion-activatable')) {\r\n                return el;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        return ev.target.closest('.ion-activatable');\r\n    }\r\n};\r\nvar isInstant = function (el) {\r\n    return el.classList.contains('ion-activatable-instant');\r\n};\r\nvar getRippleEffect = function (el) {\r\n    if (el.shadowRoot) {\r\n        var ripple = el.shadowRoot.querySelector('ion-ripple-effect');\r\n        if (ripple) {\r\n            return ripple;\r\n        }\r\n    }\r\n    return el.querySelector('ion-ripple-effect');\r\n};\r\nvar ACTIVATED = 'ion-activated';\r\nvar ADD_ACTIVATED_DEFERS = 200;\r\nvar CLEAR_STATE_DEFERS = 200;\r\nvar MOUSE_WAIT = 2500;\r\nexport { startTapClick };\r\n"],"sourceRoot":""}